"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/pg-boss@12.11.1";
exports.ids = ["vendor-chunks/pg-boss@12.11.1"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/attorney.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/attorney.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POLICY: () => (/* binding */ POLICY),\n/* harmony export */   assertKey: () => (/* binding */ assertKey),\n/* harmony export */   assertPostgresObjectName: () => (/* binding */ assertPostgresObjectName),\n/* harmony export */   assertQueueName: () => (/* binding */ assertQueueName),\n/* harmony export */   checkFetchArgs: () => (/* binding */ checkFetchArgs),\n/* harmony export */   checkSendArgs: () => (/* binding */ checkSendArgs),\n/* harmony export */   checkWorkArgs: () => (/* binding */ checkWorkArgs),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   validateQueueArgs: () => (/* binding */ validateQueueArgs)\n/* harmony export */ });\n/* harmony import */ var node_assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:assert */ \"node:assert\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n\n\nconst POLICY = {\n    MAX_EXPIRATION_HOURS: 24,\n    MIN_POLLING_INTERVAL_MS: 500,\n    MAX_RETENTION_DAYS: 365\n};\nfunction assertObjectName(value, name = 'Name') {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(/^[\\w.-]+$/.test(value), `${name} can only contain alphanumeric characters, underscores, hyphens, or periods`);\n}\nfunction validateQueueArgs(config = {}) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('deadLetter' in config) || config.deadLetter === null || (typeof config.deadLetter === 'string'), 'deadLetter must be a string');\n    if (config.deadLetter) {\n        assertObjectName(config.deadLetter, 'deadLetter');\n    }\n    validateRetryConfig(config);\n    validateExpirationConfig(config);\n    validateRetentionConfig(config);\n    validateDeletionConfig(config);\n}\nfunction checkSendArgs(args) {\n    let name, data, options;\n    if (typeof args[0] === 'string') {\n        name = args[0];\n        data = args[1];\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof data !== 'function', 'send() cannot accept a function as the payload.  Did you intend to use work()?');\n        options = args[2];\n    }\n    else if (typeof args[0] === 'object') {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(args.length === 1, 'send object API only accepts 1 argument');\n        const job = args[0];\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(job, 'boss requires all jobs to have a name');\n        name = job.name;\n        data = job.data;\n        options = job.options;\n    }\n    options = options || {};\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'boss requires all jobs to have a queue name');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof options === 'object', 'options should be an object');\n    options = { ...options };\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('priority' in options) || (Number.isInteger(options.priority)), 'priority must be an integer');\n    options.priority = options.priority || 0;\n    options.startAfter = (options.startAfter instanceof Date && typeof options.startAfter.toISOString === 'function')\n        ? options.startAfter.toISOString()\n        : (+options.startAfter > 0)\n            ? '' + options.startAfter\n            : (typeof options.startAfter === 'string')\n                ? options.startAfter\n                : undefined;\n    validateRetryConfig(options);\n    validateExpirationConfig(options);\n    validateRetentionConfig(options);\n    validateDeletionConfig(options);\n    validateGroupConfig(options);\n    return { name, data, options };\n}\nfunction validateGroupConfig(config) {\n    if (!('group' in config) || config.group === undefined || config.group === null) {\n        return;\n    }\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof config.group === 'object', 'group must be an object');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof config.group.id === 'string' && config.group.id.length > 0, 'group.id must be a non-empty string');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('tier' in config.group) || (typeof config.group.tier === 'string' && config.group.tier.length > 0), 'group.tier must be a non-empty string if provided');\n}\nfunction validateGroupConcurrencyValue(value, optionName) {\n    if (typeof value === 'number') {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(Number.isInteger(value) && value >= 1, `${optionName} must be an integer >= 1`);\n        return;\n    }\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof value === 'object', `${optionName} must be a number or an object with { default, tiers? }`);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(Number.isInteger(value.default) && value.default >= 1, `${optionName}.default must be an integer >= 1`);\n    if ('tiers' in value && value.tiers) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof value.tiers === 'object', `${optionName}.tiers must be an object`);\n        for (const [tier, limit] of Object.entries(value.tiers)) {\n            node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof tier === 'string' && tier.length > 0, `${optionName} tier keys must be non-empty strings`);\n            node_assert__WEBPACK_IMPORTED_MODULE_0__(Number.isInteger(limit) && limit >= 1, `${optionName}.tiers[\"${tier}\"] must be an integer >= 1`);\n        }\n    }\n}\nfunction validateGroupConcurrencyConfig(config) {\n    const hasGlobal = config.groupConcurrency != null;\n    const hasLocal = config.localGroupConcurrency != null;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!(hasGlobal && hasLocal), 'cannot specify both groupConcurrency and localGroupConcurrency - choose one');\n    if (hasGlobal)\n        validateGroupConcurrencyValue(config.groupConcurrency, 'groupConcurrency');\n    if (hasLocal) {\n        validateGroupConcurrencyValue(config.localGroupConcurrency, 'localGroupConcurrency');\n        validateLocalGroupConcurrencyLimit(config.localGroupConcurrency, config.localConcurrency);\n    }\n}\nfunction validateLocalGroupConcurrencyLimit(localGroupConcurrency, localConcurrency) {\n    const effectiveLocalConcurrency = localConcurrency ?? 1;\n    if (typeof localGroupConcurrency === 'number') {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(localGroupConcurrency <= effectiveLocalConcurrency, `localGroupConcurrency (${localGroupConcurrency}) cannot exceed localConcurrency (${effectiveLocalConcurrency})`);\n    }\n    else if (typeof localGroupConcurrency === 'object') {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(localGroupConcurrency.default <= effectiveLocalConcurrency, `localGroupConcurrency.default (${localGroupConcurrency.default}) cannot exceed localConcurrency (${effectiveLocalConcurrency})`);\n        if (localGroupConcurrency.tiers) {\n            for (const [tier, limit] of Object.entries(localGroupConcurrency.tiers)) {\n                node_assert__WEBPACK_IMPORTED_MODULE_0__(limit <= effectiveLocalConcurrency, `localGroupConcurrency.tiers[\"${tier}\"] (${limit}) cannot exceed localConcurrency (${effectiveLocalConcurrency})`);\n            }\n        }\n    }\n}\nfunction checkWorkArgs(name, args) {\n    let options, callback;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'queue name is required');\n    if (args.length === 1) {\n        callback = args[0];\n        options = {};\n    }\n    else if (args.length > 1) {\n        options = args[0] || {};\n        callback = args[1];\n    }\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof callback === 'function', 'expected callback to be a function');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof options === 'object', 'expected config to be an object');\n    options = { ...options };\n    applyPollingInterval(options);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('batchSize' in options) || (Number.isInteger(options.batchSize) && options.batchSize >= 1), 'batchSize must be an integer > 0');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('includeMetadata' in options) || typeof options.includeMetadata === 'boolean', 'includeMetadata must be a boolean');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('priority' in options) || typeof options.priority === 'boolean', 'priority must be a boolean');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('localConcurrency' in options) || (Number.isInteger(options.localConcurrency) && options.localConcurrency >= 1), 'localConcurrency must be an integer >= 1');\n    validateGroupConcurrencyConfig(options);\n    return { options, callback };\n}\nfunction checkFetchArgs(name, options) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'missing queue name');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('batchSize' in options) || (Number.isInteger(options.batchSize) && options.batchSize >= 1), 'batchSize must be an integer > 0');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('includeMetadata' in options) || typeof options.includeMetadata === 'boolean', 'includeMetadata must be a boolean');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('priority' in options) || typeof options.priority === 'boolean', 'priority must be a boolean');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('ignoreStartAfter' in options) || typeof options.ignoreStartAfter === 'boolean', 'ignoreStartAfter must be a boolean');\n}\nfunction getConfig(value) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(value && (typeof value === 'object' || typeof value === 'string'), 'configuration assert: string or config object is required to connect to postgres');\n    const config = (typeof value === 'string')\n        ? { connectionString: value }\n        : { ...value };\n    config.schedule = ('schedule' in config) ? config.schedule : true;\n    config.supervise = ('supervise' in config) ? config.supervise : true;\n    config.migrate = ('migrate' in config) ? config.migrate : true;\n    config.createSchema = ('createSchema' in config) ? config.createSchema : true;\n    applySchemaConfig(config);\n    applyOpsConfig(config);\n    applyScheduleConfig(config);\n    applyBamConfig(config);\n    validateWarningConfig(config);\n    return config;\n}\nfunction applySchemaConfig(config) {\n    if (config.schema) {\n        assertPostgresObjectName(config.schema);\n    }\n    config.schema = config.schema || _plans_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCHEMA;\n}\nfunction validateWarningConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('warningQueueSize' in config) || config.warningQueueSize >= 1, 'configuration assert: warningQueueSize must be at least 1');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('warningSlowQuerySeconds' in config) || config.warningSlowQuerySeconds >= 1, 'configuration assert: warningSlowQuerySeconds must be at least 1');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('warningRetentionDays' in config) || (Number.isInteger(config.warningRetentionDays) && config.warningRetentionDays >= 1), 'configuration assert: warningRetentionDays must be an integer >= 1');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('warningRetentionDays' in config) || config.warningRetentionDays <= POLICY.MAX_RETENTION_DAYS, `configuration assert: warningRetentionDays cannot exceed ${POLICY.MAX_RETENTION_DAYS} days`);\n}\nfunction assertPostgresObjectName(name) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof name === 'string', 'Name must be a string');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(name.length <= 50, 'Name cannot exceed 50 characters');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!/\\W/.test(name), 'Name can only contain alphanumeric characters or underscores');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!/^\\d/.test(name), 'Name cannot start with a number');\n}\nfunction assertQueueName(name) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'Name is required');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof name === 'string', 'Name must be a string');\n    assertObjectName(name);\n}\nfunction assertKey(key) {\n    if (!key)\n        return;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof key === 'string', 'Key must be a string');\n    assertObjectName(key, 'Key');\n}\nfunction validateRetentionConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('retentionSeconds' in config) || config.retentionSeconds >= 1, 'configuration assert: retentionSeconds must be at least every second');\n}\nfunction validateExpirationConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('expireInSeconds' in config) || config.expireInSeconds >= 1, 'configuration assert: expireInSeconds must be at least every second');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!config.expireInSeconds || config.expireInSeconds / 60 / 60 < POLICY.MAX_EXPIRATION_HOURS, `configuration assert: expiration cannot exceed ${POLICY.MAX_EXPIRATION_HOURS} hours`);\n}\nfunction validateRetryConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('retryDelay' in config) || (Number.isInteger(config.retryDelay) && config.retryDelay >= 0), 'retryDelay must be an integer >= 0');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('retryLimit' in config) || (Number.isInteger(config.retryLimit) && config.retryLimit >= 0), 'retryLimit must be an integer >= 0');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('retryBackoff' in config) || (config.retryBackoff === true || config.retryBackoff === false), 'retryBackoff must be either true or false');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('retryDelayMax' in config) || config.retryDelayMax === null || config.retryBackoff === true, 'retryDelayMax can only be set if retryBackoff is true');\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('retryDelayMax' in config) || config.retryDelayMax === null || (Number.isInteger(config.retryDelayMax) && config.retryDelayMax >= 0), 'retryDelayMax must be an integer >= 0');\n}\nfunction applyPollingInterval(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('pollingIntervalSeconds' in config) || config.pollingIntervalSeconds >= POLICY.MIN_POLLING_INTERVAL_MS / 1000, `configuration assert: pollingIntervalSeconds must be at least every ${POLICY.MIN_POLLING_INTERVAL_MS}ms`);\n    config.pollingInterval = ('pollingIntervalSeconds' in config)\n        ? config.pollingIntervalSeconds * 1000\n        : 2000;\n}\nfunction applyOpsConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('superviseIntervalSeconds' in config) || config.superviseIntervalSeconds >= 1, 'configuration assert: superviseIntervalSeconds must be at least every second');\n    config.superviseIntervalSeconds = config.superviseIntervalSeconds || 60;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(config.superviseIntervalSeconds / 60 / 60 <= POLICY.MAX_EXPIRATION_HOURS, `configuration assert: superviseIntervalSeconds cannot exceed ${POLICY.MAX_EXPIRATION_HOURS} hours`);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('maintenanceIntervalSeconds' in config) || config.maintenanceIntervalSeconds >= 1, 'configuration assert: maintenanceIntervalSeconds must be at least every second');\n    config.maintenanceIntervalSeconds = config.maintenanceIntervalSeconds || POLICY.MAX_EXPIRATION_HOURS * 60 * 60;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(config.maintenanceIntervalSeconds / 60 / 60 <= POLICY.MAX_EXPIRATION_HOURS, `configuration assert: maintenanceIntervalSeconds cannot exceed ${POLICY.MAX_EXPIRATION_HOURS} hours`);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('monitorIntervalSeconds' in config) || config.monitorIntervalSeconds >= 1, 'configuration assert: monitorIntervalSeconds must be at least every second');\n    config.monitorIntervalSeconds = config.monitorIntervalSeconds || 60;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(config.monitorIntervalSeconds / 60 / 60 <= POLICY.MAX_EXPIRATION_HOURS, `configuration assert: monitorIntervalSeconds cannot exceed ${POLICY.MAX_EXPIRATION_HOURS} hours`);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('queueCacheIntervalSeconds' in config) || config.queueCacheIntervalSeconds >= 1, 'configuration assert: queueCacheIntervalSeconds must be at least every second');\n    config.queueCacheIntervalSeconds = config.queueCacheIntervalSeconds || 60;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(config.queueCacheIntervalSeconds / 60 / 60 <= POLICY.MAX_EXPIRATION_HOURS, `configuration assert: queueCacheIntervalSeconds cannot exceed ${POLICY.MAX_EXPIRATION_HOURS} hours`);\n}\nfunction validateDeletionConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('deleteAfterSeconds' in config) || config.deleteAfterSeconds >= 0, 'configuration assert: deleteAfterSeconds must be at least 0 (0 disables deletion)');\n}\nfunction applyScheduleConfig(config) {\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('clockMonitorIntervalSeconds' in config) || (config.clockMonitorIntervalSeconds >= 1 && config.clockMonitorIntervalSeconds <= 600), 'configuration assert: clockMonitorIntervalSeconds must be between 1 second and 10 minutes');\n    config.clockMonitorIntervalSeconds = config.clockMonitorIntervalSeconds || 600;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('cronMonitorIntervalSeconds' in config) || (config.cronMonitorIntervalSeconds >= 1 && config.cronMonitorIntervalSeconds <= 45), 'configuration assert: cronMonitorIntervalSeconds must be between 1 and 45 seconds');\n    config.cronMonitorIntervalSeconds = config.cronMonitorIntervalSeconds || 30;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('cronWorkerIntervalSeconds' in config) || (config.cronWorkerIntervalSeconds >= 1 && config.cronWorkerIntervalSeconds <= 45), 'configuration assert: cronWorkerIntervalSeconds must be between 1 and 45 seconds');\n    config.cronWorkerIntervalSeconds = config.cronWorkerIntervalSeconds || 5;\n}\nfunction applyBamConfig(config) {\n    const minInterval = config.__test__bypass_bam_interval_check ? 1 : 10;\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(!('bamIntervalSeconds' in config) || config.bamIntervalSeconds >= minInterval, `configuration assert: bamIntervalSeconds must be at least ${minInterval} seconds`);\n    config.bamIntervalSeconds = config.bamIntervalSeconds || 60;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvYXR0b3JuZXkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdDQUFNLDZCQUE2QixNQUFNO0FBQzdDO0FBQ0Esc0NBQXNDO0FBQ3RDLElBQUksd0NBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0NBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdDQUFNO0FBQ2Q7QUFDQSxRQUFRLHdDQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1YsZ0JBQWdCO0FBQ2hCLElBQUksd0NBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3Q0FBTTtBQUNWLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3Q0FBTSwyQ0FBMkMsWUFBWTtBQUNyRTtBQUNBO0FBQ0EsSUFBSSx3Q0FBTSwrQkFBK0IsWUFBWSxxQ0FBcUMsaUJBQWlCO0FBQzNHLElBQUksd0NBQU0sMkRBQTJELFdBQVc7QUFDaEY7QUFDQSxRQUFRLHdDQUFNLHFDQUFxQyxXQUFXO0FBQzlEO0FBQ0EsWUFBWSx3Q0FBTSxpREFBaUQsWUFBWTtBQUMvRSxZQUFZLHdDQUFNLDJDQUEyQyxXQUFXLFVBQVUsS0FBSztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdDQUFNLCtFQUErRSxzQkFBc0Isb0NBQW9DLDBCQUEwQjtBQUNqTDtBQUNBO0FBQ0EsUUFBUSx3Q0FBTSwrRkFBK0YsOEJBQThCLG9DQUFvQywwQkFBMEI7QUFDek07QUFDQTtBQUNBLGdCQUFnQix3Q0FBTSxxRUFBcUUsS0FBSyxNQUFNLE1BQU0sb0NBQW9DLDBCQUEwQjtBQUMxSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1YsZ0JBQWdCO0FBQ2hCO0FBQ0EsSUFBSSx3Q0FBTTtBQUNWLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1YsSUFBSSx3Q0FBTTtBQUNWO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1YsSUFBSSx3Q0FBTTtBQUNWLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1YsSUFBSSx3Q0FBTTtBQUNWO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1Y7QUFDQSxZQUFZO0FBQ1osWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxxREFBYztBQUNuRDtBQUNBO0FBQ0EsSUFBSSx3Q0FBTTtBQUNWLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1YsSUFBSSx3Q0FBTSw4SkFBOEosMkJBQTJCO0FBQ25NO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1YsSUFBSSx3Q0FBTTtBQUNWLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNLDhJQUE4SSw2QkFBNkI7QUFDckw7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1YsSUFBSSx3Q0FBTTtBQUNWLElBQUksd0NBQU07QUFDVixJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBLElBQUksd0NBQU0seUxBQXlMLCtCQUErQjtBQUNsTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3Q0FBTTtBQUNWO0FBQ0EsSUFBSSx3Q0FBTSwySUFBMkksNkJBQTZCO0FBQ2xMLElBQUksd0NBQU07QUFDVjtBQUNBLElBQUksd0NBQU0sK0lBQStJLDZCQUE2QjtBQUN0TCxJQUFJLHdDQUFNO0FBQ1Y7QUFDQSxJQUFJLHdDQUFNLHVJQUF1SSw2QkFBNkI7QUFDOUssSUFBSSx3Q0FBTTtBQUNWO0FBQ0EsSUFBSSx3Q0FBTSw2SUFBNkksNkJBQTZCO0FBQ3BMO0FBQ0E7QUFDQSxJQUFJLHdDQUFNO0FBQ1Y7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVjtBQUNBLElBQUksd0NBQU07QUFDVjtBQUNBLElBQUksd0NBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0NBQU0sNklBQTZJLGFBQWE7QUFDcEs7QUFDQTtBQUNvSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlZXAtYXJjaGl0ZWN0dXJlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BnLWJvc3NAMTIuMTEuMS9ub2RlX21vZHVsZXMvcGctYm9zcy9kaXN0L2F0dG9ybmV5LmpzP2UxMDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzc2VydCBmcm9tICdub2RlOmFzc2VydCc7XG5pbXBvcnQgeyBERUZBVUxUX1NDSEVNQSB9IGZyb20gXCIuL3BsYW5zLmpzXCI7XG5jb25zdCBQT0xJQ1kgPSB7XG4gICAgTUFYX0VYUElSQVRJT05fSE9VUlM6IDI0LFxuICAgIE1JTl9QT0xMSU5HX0lOVEVSVkFMX01TOiA1MDAsXG4gICAgTUFYX1JFVEVOVElPTl9EQVlTOiAzNjVcbn07XG5mdW5jdGlvbiBhc3NlcnRPYmplY3ROYW1lKHZhbHVlLCBuYW1lID0gJ05hbWUnKSB7XG4gICAgYXNzZXJ0KC9eW1xcdy4tXSskLy50ZXN0KHZhbHVlKSwgYCR7bmFtZX0gY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycywgdW5kZXJzY29yZXMsIGh5cGhlbnMsIG9yIHBlcmlvZHNgKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUXVldWVBcmdzKGNvbmZpZyA9IHt9KSB7XG4gICAgYXNzZXJ0KCEoJ2RlYWRMZXR0ZXInIGluIGNvbmZpZykgfHwgY29uZmlnLmRlYWRMZXR0ZXIgPT09IG51bGwgfHwgKHR5cGVvZiBjb25maWcuZGVhZExldHRlciA9PT0gJ3N0cmluZycpLCAnZGVhZExldHRlciBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgaWYgKGNvbmZpZy5kZWFkTGV0dGVyKSB7XG4gICAgICAgIGFzc2VydE9iamVjdE5hbWUoY29uZmlnLmRlYWRMZXR0ZXIsICdkZWFkTGV0dGVyJyk7XG4gICAgfVxuICAgIHZhbGlkYXRlUmV0cnlDb25maWcoY29uZmlnKTtcbiAgICB2YWxpZGF0ZUV4cGlyYXRpb25Db25maWcoY29uZmlnKTtcbiAgICB2YWxpZGF0ZVJldGVudGlvbkNvbmZpZyhjb25maWcpO1xuICAgIHZhbGlkYXRlRGVsZXRpb25Db25maWcoY29uZmlnKTtcbn1cbmZ1bmN0aW9uIGNoZWNrU2VuZEFyZ3MoYXJncykge1xuICAgIGxldCBuYW1lLCBkYXRhLCBvcHRpb25zO1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbmFtZSA9IGFyZ3NbMF07XG4gICAgICAgIGRhdGEgPSBhcmdzWzFdO1xuICAgICAgICBhc3NlcnQodHlwZW9mIGRhdGEgIT09ICdmdW5jdGlvbicsICdzZW5kKCkgY2Fubm90IGFjY2VwdCBhIGZ1bmN0aW9uIGFzIHRoZSBwYXlsb2FkLiAgRGlkIHlvdSBpbnRlbmQgdG8gdXNlIHdvcmsoKT8nKTtcbiAgICAgICAgb3B0aW9ucyA9IGFyZ3NbMl07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhc3NlcnQoYXJncy5sZW5ndGggPT09IDEsICdzZW5kIG9iamVjdCBBUEkgb25seSBhY2NlcHRzIDEgYXJndW1lbnQnKTtcbiAgICAgICAgY29uc3Qgam9iID0gYXJnc1swXTtcbiAgICAgICAgYXNzZXJ0KGpvYiwgJ2Jvc3MgcmVxdWlyZXMgYWxsIGpvYnMgdG8gaGF2ZSBhIG5hbWUnKTtcbiAgICAgICAgbmFtZSA9IGpvYi5uYW1lO1xuICAgICAgICBkYXRhID0gam9iLmRhdGE7XG4gICAgICAgIG9wdGlvbnMgPSBqb2Iub3B0aW9ucztcbiAgICB9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgYXNzZXJ0KG5hbWUsICdib3NzIHJlcXVpcmVzIGFsbCBqb2JzIHRvIGhhdmUgYSBxdWV1ZSBuYW1lJyk7XG4gICAgYXNzZXJ0KHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JywgJ29wdGlvbnMgc2hvdWxkIGJlIGFuIG9iamVjdCcpO1xuICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICBhc3NlcnQoISgncHJpb3JpdHknIGluIG9wdGlvbnMpIHx8IChOdW1iZXIuaXNJbnRlZ2VyKG9wdGlvbnMucHJpb3JpdHkpKSwgJ3ByaW9yaXR5IG11c3QgYmUgYW4gaW50ZWdlcicpO1xuICAgIG9wdGlvbnMucHJpb3JpdHkgPSBvcHRpb25zLnByaW9yaXR5IHx8IDA7XG4gICAgb3B0aW9ucy5zdGFydEFmdGVyID0gKG9wdGlvbnMuc3RhcnRBZnRlciBpbnN0YW5jZW9mIERhdGUgJiYgdHlwZW9mIG9wdGlvbnMuc3RhcnRBZnRlci50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgPyBvcHRpb25zLnN0YXJ0QWZ0ZXIudG9JU09TdHJpbmcoKVxuICAgICAgICA6ICgrb3B0aW9ucy5zdGFydEFmdGVyID4gMClcbiAgICAgICAgICAgID8gJycgKyBvcHRpb25zLnN0YXJ0QWZ0ZXJcbiAgICAgICAgICAgIDogKHR5cGVvZiBvcHRpb25zLnN0YXJ0QWZ0ZXIgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5zdGFydEFmdGVyXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgdmFsaWRhdGVSZXRyeUNvbmZpZyhvcHRpb25zKTtcbiAgICB2YWxpZGF0ZUV4cGlyYXRpb25Db25maWcob3B0aW9ucyk7XG4gICAgdmFsaWRhdGVSZXRlbnRpb25Db25maWcob3B0aW9ucyk7XG4gICAgdmFsaWRhdGVEZWxldGlvbkNvbmZpZyhvcHRpb25zKTtcbiAgICB2YWxpZGF0ZUdyb3VwQ29uZmlnKG9wdGlvbnMpO1xuICAgIHJldHVybiB7IG5hbWUsIGRhdGEsIG9wdGlvbnMgfTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlR3JvdXBDb25maWcoY29uZmlnKSB7XG4gICAgaWYgKCEoJ2dyb3VwJyBpbiBjb25maWcpIHx8IGNvbmZpZy5ncm91cCA9PT0gdW5kZWZpbmVkIHx8IGNvbmZpZy5ncm91cCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2VydCh0eXBlb2YgY29uZmlnLmdyb3VwID09PSAnb2JqZWN0JywgJ2dyb3VwIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgYXNzZXJ0KHR5cGVvZiBjb25maWcuZ3JvdXAuaWQgPT09ICdzdHJpbmcnICYmIGNvbmZpZy5ncm91cC5pZC5sZW5ndGggPiAwLCAnZ3JvdXAuaWQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICBhc3NlcnQoISgndGllcicgaW4gY29uZmlnLmdyb3VwKSB8fCAodHlwZW9mIGNvbmZpZy5ncm91cC50aWVyID09PSAnc3RyaW5nJyAmJiBjb25maWcuZ3JvdXAudGllci5sZW5ndGggPiAwKSwgJ2dyb3VwLnRpZXIgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgaWYgcHJvdmlkZWQnKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlR3JvdXBDb25jdXJyZW5jeVZhbHVlKHZhbHVlLCBvcHRpb25OYW1lKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgYXNzZXJ0KE51bWJlci5pc0ludGVnZXIodmFsdWUpICYmIHZhbHVlID49IDEsIGAke29wdGlvbk5hbWV9IG11c3QgYmUgYW4gaW50ZWdlciA+PSAxYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzZXJ0KHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcsIGAke29wdGlvbk5hbWV9IG11c3QgYmUgYSBudW1iZXIgb3IgYW4gb2JqZWN0IHdpdGggeyBkZWZhdWx0LCB0aWVycz8gfWApO1xuICAgIGFzc2VydChOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlLmRlZmF1bHQpICYmIHZhbHVlLmRlZmF1bHQgPj0gMSwgYCR7b3B0aW9uTmFtZX0uZGVmYXVsdCBtdXN0IGJlIGFuIGludGVnZXIgPj0gMWApO1xuICAgIGlmICgndGllcnMnIGluIHZhbHVlICYmIHZhbHVlLnRpZXJzKSB7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgdmFsdWUudGllcnMgPT09ICdvYmplY3QnLCBgJHtvcHRpb25OYW1lfS50aWVycyBtdXN0IGJlIGFuIG9iamVjdGApO1xuICAgICAgICBmb3IgKGNvbnN0IFt0aWVyLCBsaW1pdF0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUudGllcnMpKSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIHRpZXIgPT09ICdzdHJpbmcnICYmIHRpZXIubGVuZ3RoID4gMCwgYCR7b3B0aW9uTmFtZX0gdGllciBrZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3NgKTtcbiAgICAgICAgICAgIGFzc2VydChOdW1iZXIuaXNJbnRlZ2VyKGxpbWl0KSAmJiBsaW1pdCA+PSAxLCBgJHtvcHRpb25OYW1lfS50aWVyc1tcIiR7dGllcn1cIl0gbXVzdCBiZSBhbiBpbnRlZ2VyID49IDFgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlR3JvdXBDb25jdXJyZW5jeUNvbmZpZyhjb25maWcpIHtcbiAgICBjb25zdCBoYXNHbG9iYWwgPSBjb25maWcuZ3JvdXBDb25jdXJyZW5jeSAhPSBudWxsO1xuICAgIGNvbnN0IGhhc0xvY2FsID0gY29uZmlnLmxvY2FsR3JvdXBDb25jdXJyZW5jeSAhPSBudWxsO1xuICAgIGFzc2VydCghKGhhc0dsb2JhbCAmJiBoYXNMb2NhbCksICdjYW5ub3Qgc3BlY2lmeSBib3RoIGdyb3VwQ29uY3VycmVuY3kgYW5kIGxvY2FsR3JvdXBDb25jdXJyZW5jeSAtIGNob29zZSBvbmUnKTtcbiAgICBpZiAoaGFzR2xvYmFsKVxuICAgICAgICB2YWxpZGF0ZUdyb3VwQ29uY3VycmVuY3lWYWx1ZShjb25maWcuZ3JvdXBDb25jdXJyZW5jeSwgJ2dyb3VwQ29uY3VycmVuY3knKTtcbiAgICBpZiAoaGFzTG9jYWwpIHtcbiAgICAgICAgdmFsaWRhdGVHcm91cENvbmN1cnJlbmN5VmFsdWUoY29uZmlnLmxvY2FsR3JvdXBDb25jdXJyZW5jeSwgJ2xvY2FsR3JvdXBDb25jdXJyZW5jeScpO1xuICAgICAgICB2YWxpZGF0ZUxvY2FsR3JvdXBDb25jdXJyZW5jeUxpbWl0KGNvbmZpZy5sb2NhbEdyb3VwQ29uY3VycmVuY3ksIGNvbmZpZy5sb2NhbENvbmN1cnJlbmN5KTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZUxvY2FsR3JvdXBDb25jdXJyZW5jeUxpbWl0KGxvY2FsR3JvdXBDb25jdXJyZW5jeSwgbG9jYWxDb25jdXJyZW5jeSkge1xuICAgIGNvbnN0IGVmZmVjdGl2ZUxvY2FsQ29uY3VycmVuY3kgPSBsb2NhbENvbmN1cnJlbmN5ID8/IDE7XG4gICAgaWYgKHR5cGVvZiBsb2NhbEdyb3VwQ29uY3VycmVuY3kgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGFzc2VydChsb2NhbEdyb3VwQ29uY3VycmVuY3kgPD0gZWZmZWN0aXZlTG9jYWxDb25jdXJyZW5jeSwgYGxvY2FsR3JvdXBDb25jdXJyZW5jeSAoJHtsb2NhbEdyb3VwQ29uY3VycmVuY3l9KSBjYW5ub3QgZXhjZWVkIGxvY2FsQ29uY3VycmVuY3kgKCR7ZWZmZWN0aXZlTG9jYWxDb25jdXJyZW5jeX0pYCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBsb2NhbEdyb3VwQ29uY3VycmVuY3kgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGFzc2VydChsb2NhbEdyb3VwQ29uY3VycmVuY3kuZGVmYXVsdCA8PSBlZmZlY3RpdmVMb2NhbENvbmN1cnJlbmN5LCBgbG9jYWxHcm91cENvbmN1cnJlbmN5LmRlZmF1bHQgKCR7bG9jYWxHcm91cENvbmN1cnJlbmN5LmRlZmF1bHR9KSBjYW5ub3QgZXhjZWVkIGxvY2FsQ29uY3VycmVuY3kgKCR7ZWZmZWN0aXZlTG9jYWxDb25jdXJyZW5jeX0pYCk7XG4gICAgICAgIGlmIChsb2NhbEdyb3VwQ29uY3VycmVuY3kudGllcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3RpZXIsIGxpbWl0XSBvZiBPYmplY3QuZW50cmllcyhsb2NhbEdyb3VwQ29uY3VycmVuY3kudGllcnMpKSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KGxpbWl0IDw9IGVmZmVjdGl2ZUxvY2FsQ29uY3VycmVuY3ksIGBsb2NhbEdyb3VwQ29uY3VycmVuY3kudGllcnNbXCIke3RpZXJ9XCJdICgke2xpbWl0fSkgY2Fubm90IGV4Y2VlZCBsb2NhbENvbmN1cnJlbmN5ICgke2VmZmVjdGl2ZUxvY2FsQ29uY3VycmVuY3l9KWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tXb3JrQXJncyhuYW1lLCBhcmdzKSB7XG4gICAgbGV0IG9wdGlvbnMsIGNhbGxiYWNrO1xuICAgIGFzc2VydChuYW1lLCAncXVldWUgbmFtZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjYWxsYmFjayA9IGFyZ3NbMF07XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5sZW5ndGggPiAxKSB7XG4gICAgICAgIG9wdGlvbnMgPSBhcmdzWzBdIHx8IHt9O1xuICAgICAgICBjYWxsYmFjayA9IGFyZ3NbMV07XG4gICAgfVxuICAgIGFzc2VydCh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicsICdleHBlY3RlZCBjYWxsYmFjayB0byBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgYXNzZXJ0KHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JywgJ2V4cGVjdGVkIGNvbmZpZyB0byBiZSBhbiBvYmplY3QnKTtcbiAgICBvcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgYXBwbHlQb2xsaW5nSW50ZXJ2YWwob3B0aW9ucyk7XG4gICAgYXNzZXJ0KCEoJ2JhdGNoU2l6ZScgaW4gb3B0aW9ucykgfHwgKE51bWJlci5pc0ludGVnZXIob3B0aW9ucy5iYXRjaFNpemUpICYmIG9wdGlvbnMuYmF0Y2hTaXplID49IDEpLCAnYmF0Y2hTaXplIG11c3QgYmUgYW4gaW50ZWdlciA+IDAnKTtcbiAgICBhc3NlcnQoISgnaW5jbHVkZU1ldGFkYXRhJyBpbiBvcHRpb25zKSB8fCB0eXBlb2Ygb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGEgPT09ICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YSBtdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgIGFzc2VydCghKCdwcmlvcml0eScgaW4gb3B0aW9ucykgfHwgdHlwZW9mIG9wdGlvbnMucHJpb3JpdHkgPT09ICdib29sZWFuJywgJ3ByaW9yaXR5IG11c3QgYmUgYSBib29sZWFuJyk7XG4gICAgYXNzZXJ0KCEoJ2xvY2FsQ29uY3VycmVuY3knIGluIG9wdGlvbnMpIHx8IChOdW1iZXIuaXNJbnRlZ2VyKG9wdGlvbnMubG9jYWxDb25jdXJyZW5jeSkgJiYgb3B0aW9ucy5sb2NhbENvbmN1cnJlbmN5ID49IDEpLCAnbG9jYWxDb25jdXJyZW5jeSBtdXN0IGJlIGFuIGludGVnZXIgPj0gMScpO1xuICAgIHZhbGlkYXRlR3JvdXBDb25jdXJyZW5jeUNvbmZpZyhvcHRpb25zKTtcbiAgICByZXR1cm4geyBvcHRpb25zLCBjYWxsYmFjayB9O1xufVxuZnVuY3Rpb24gY2hlY2tGZXRjaEFyZ3MobmFtZSwgb3B0aW9ucykge1xuICAgIGFzc2VydChuYW1lLCAnbWlzc2luZyBxdWV1ZSBuYW1lJyk7XG4gICAgYXNzZXJ0KCEoJ2JhdGNoU2l6ZScgaW4gb3B0aW9ucykgfHwgKE51bWJlci5pc0ludGVnZXIob3B0aW9ucy5iYXRjaFNpemUpICYmIG9wdGlvbnMuYmF0Y2hTaXplID49IDEpLCAnYmF0Y2hTaXplIG11c3QgYmUgYW4gaW50ZWdlciA+IDAnKTtcbiAgICBhc3NlcnQoISgnaW5jbHVkZU1ldGFkYXRhJyBpbiBvcHRpb25zKSB8fCB0eXBlb2Ygb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGEgPT09ICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YSBtdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgIGFzc2VydCghKCdwcmlvcml0eScgaW4gb3B0aW9ucykgfHwgdHlwZW9mIG9wdGlvbnMucHJpb3JpdHkgPT09ICdib29sZWFuJywgJ3ByaW9yaXR5IG11c3QgYmUgYSBib29sZWFuJyk7XG4gICAgYXNzZXJ0KCEoJ2lnbm9yZVN0YXJ0QWZ0ZXInIGluIG9wdGlvbnMpIHx8IHR5cGVvZiBvcHRpb25zLmlnbm9yZVN0YXJ0QWZ0ZXIgPT09ICdib29sZWFuJywgJ2lnbm9yZVN0YXJ0QWZ0ZXIgbXVzdCBiZSBhIGJvb2xlYW4nKTtcbn1cbmZ1bmN0aW9uIGdldENvbmZpZyh2YWx1ZSkge1xuICAgIGFzc2VydCh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSwgJ2NvbmZpZ3VyYXRpb24gYXNzZXJ0OiBzdHJpbmcgb3IgY29uZmlnIG9iamVjdCBpcyByZXF1aXJlZCB0byBjb25uZWN0IHRvIHBvc3RncmVzJyk7XG4gICAgY29uc3QgY29uZmlnID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgID8geyBjb25uZWN0aW9uU3RyaW5nOiB2YWx1ZSB9XG4gICAgICAgIDogeyAuLi52YWx1ZSB9O1xuICAgIGNvbmZpZy5zY2hlZHVsZSA9ICgnc2NoZWR1bGUnIGluIGNvbmZpZykgPyBjb25maWcuc2NoZWR1bGUgOiB0cnVlO1xuICAgIGNvbmZpZy5zdXBlcnZpc2UgPSAoJ3N1cGVydmlzZScgaW4gY29uZmlnKSA/IGNvbmZpZy5zdXBlcnZpc2UgOiB0cnVlO1xuICAgIGNvbmZpZy5taWdyYXRlID0gKCdtaWdyYXRlJyBpbiBjb25maWcpID8gY29uZmlnLm1pZ3JhdGUgOiB0cnVlO1xuICAgIGNvbmZpZy5jcmVhdGVTY2hlbWEgPSAoJ2NyZWF0ZVNjaGVtYScgaW4gY29uZmlnKSA/IGNvbmZpZy5jcmVhdGVTY2hlbWEgOiB0cnVlO1xuICAgIGFwcGx5U2NoZW1hQ29uZmlnKGNvbmZpZyk7XG4gICAgYXBwbHlPcHNDb25maWcoY29uZmlnKTtcbiAgICBhcHBseVNjaGVkdWxlQ29uZmlnKGNvbmZpZyk7XG4gICAgYXBwbHlCYW1Db25maWcoY29uZmlnKTtcbiAgICB2YWxpZGF0ZVdhcm5pbmdDb25maWcoY29uZmlnKTtcbiAgICByZXR1cm4gY29uZmlnO1xufVxuZnVuY3Rpb24gYXBwbHlTY2hlbWFDb25maWcoY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZy5zY2hlbWEpIHtcbiAgICAgICAgYXNzZXJ0UG9zdGdyZXNPYmplY3ROYW1lKGNvbmZpZy5zY2hlbWEpO1xuICAgIH1cbiAgICBjb25maWcuc2NoZW1hID0gY29uZmlnLnNjaGVtYSB8fCBERUZBVUxUX1NDSEVNQTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlV2FybmluZ0NvbmZpZyhjb25maWcpIHtcbiAgICBhc3NlcnQoISgnd2FybmluZ1F1ZXVlU2l6ZScgaW4gY29uZmlnKSB8fCBjb25maWcud2FybmluZ1F1ZXVlU2l6ZSA+PSAxLCAnY29uZmlndXJhdGlvbiBhc3NlcnQ6IHdhcm5pbmdRdWV1ZVNpemUgbXVzdCBiZSBhdCBsZWFzdCAxJyk7XG4gICAgYXNzZXJ0KCEoJ3dhcm5pbmdTbG93UXVlcnlTZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy53YXJuaW5nU2xvd1F1ZXJ5U2Vjb25kcyA+PSAxLCAnY29uZmlndXJhdGlvbiBhc3NlcnQ6IHdhcm5pbmdTbG93UXVlcnlTZWNvbmRzIG11c3QgYmUgYXQgbGVhc3QgMScpO1xuICAgIGFzc2VydCghKCd3YXJuaW5nUmV0ZW50aW9uRGF5cycgaW4gY29uZmlnKSB8fCAoTnVtYmVyLmlzSW50ZWdlcihjb25maWcud2FybmluZ1JldGVudGlvbkRheXMpICYmIGNvbmZpZy53YXJuaW5nUmV0ZW50aW9uRGF5cyA+PSAxKSwgJ2NvbmZpZ3VyYXRpb24gYXNzZXJ0OiB3YXJuaW5nUmV0ZW50aW9uRGF5cyBtdXN0IGJlIGFuIGludGVnZXIgPj0gMScpO1xuICAgIGFzc2VydCghKCd3YXJuaW5nUmV0ZW50aW9uRGF5cycgaW4gY29uZmlnKSB8fCBjb25maWcud2FybmluZ1JldGVudGlvbkRheXMgPD0gUE9MSUNZLk1BWF9SRVRFTlRJT05fREFZUywgYGNvbmZpZ3VyYXRpb24gYXNzZXJ0OiB3YXJuaW5nUmV0ZW50aW9uRGF5cyBjYW5ub3QgZXhjZWVkICR7UE9MSUNZLk1BWF9SRVRFTlRJT05fREFZU30gZGF5c2ApO1xufVxuZnVuY3Rpb24gYXNzZXJ0UG9zdGdyZXNPYmplY3ROYW1lKG5hbWUpIHtcbiAgICBhc3NlcnQodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnLCAnTmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgYXNzZXJ0KG5hbWUubGVuZ3RoIDw9IDUwLCAnTmFtZSBjYW5ub3QgZXhjZWVkIDUwIGNoYXJhY3RlcnMnKTtcbiAgICBhc3NlcnQoIS9cXFcvLnRlc3QobmFtZSksICdOYW1lIGNhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgb3IgdW5kZXJzY29yZXMnKTtcbiAgICBhc3NlcnQoIS9eXFxkLy50ZXN0KG5hbWUpLCAnTmFtZSBjYW5ub3Qgc3RhcnQgd2l0aCBhIG51bWJlcicpO1xufVxuZnVuY3Rpb24gYXNzZXJ0UXVldWVOYW1lKG5hbWUpIHtcbiAgICBhc3NlcnQobmFtZSwgJ05hbWUgaXMgcmVxdWlyZWQnKTtcbiAgICBhc3NlcnQodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnLCAnTmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgYXNzZXJ0T2JqZWN0TmFtZShuYW1lKTtcbn1cbmZ1bmN0aW9uIGFzc2VydEtleShrZXkpIHtcbiAgICBpZiAoIWtleSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGFzc2VydCh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJywgJ0tleSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgYXNzZXJ0T2JqZWN0TmFtZShrZXksICdLZXknKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUmV0ZW50aW9uQ29uZmlnKGNvbmZpZykge1xuICAgIGFzc2VydCghKCdyZXRlbnRpb25TZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy5yZXRlbnRpb25TZWNvbmRzID49IDEsICdjb25maWd1cmF0aW9uIGFzc2VydDogcmV0ZW50aW9uU2Vjb25kcyBtdXN0IGJlIGF0IGxlYXN0IGV2ZXJ5IHNlY29uZCcpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVFeHBpcmF0aW9uQ29uZmlnKGNvbmZpZykge1xuICAgIGFzc2VydCghKCdleHBpcmVJblNlY29uZHMnIGluIGNvbmZpZykgfHwgY29uZmlnLmV4cGlyZUluU2Vjb25kcyA+PSAxLCAnY29uZmlndXJhdGlvbiBhc3NlcnQ6IGV4cGlyZUluU2Vjb25kcyBtdXN0IGJlIGF0IGxlYXN0IGV2ZXJ5IHNlY29uZCcpO1xuICAgIGFzc2VydCghY29uZmlnLmV4cGlyZUluU2Vjb25kcyB8fCBjb25maWcuZXhwaXJlSW5TZWNvbmRzIC8gNjAgLyA2MCA8IFBPTElDWS5NQVhfRVhQSVJBVElPTl9IT1VSUywgYGNvbmZpZ3VyYXRpb24gYXNzZXJ0OiBleHBpcmF0aW9uIGNhbm5vdCBleGNlZWQgJHtQT0xJQ1kuTUFYX0VYUElSQVRJT05fSE9VUlN9IGhvdXJzYCk7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVJldHJ5Q29uZmlnKGNvbmZpZykge1xuICAgIGFzc2VydCghKCdyZXRyeURlbGF5JyBpbiBjb25maWcpIHx8IChOdW1iZXIuaXNJbnRlZ2VyKGNvbmZpZy5yZXRyeURlbGF5KSAmJiBjb25maWcucmV0cnlEZWxheSA+PSAwKSwgJ3JldHJ5RGVsYXkgbXVzdCBiZSBhbiBpbnRlZ2VyID49IDAnKTtcbiAgICBhc3NlcnQoISgncmV0cnlMaW1pdCcgaW4gY29uZmlnKSB8fCAoTnVtYmVyLmlzSW50ZWdlcihjb25maWcucmV0cnlMaW1pdCkgJiYgY29uZmlnLnJldHJ5TGltaXQgPj0gMCksICdyZXRyeUxpbWl0IG11c3QgYmUgYW4gaW50ZWdlciA+PSAwJyk7XG4gICAgYXNzZXJ0KCEoJ3JldHJ5QmFja29mZicgaW4gY29uZmlnKSB8fCAoY29uZmlnLnJldHJ5QmFja29mZiA9PT0gdHJ1ZSB8fCBjb25maWcucmV0cnlCYWNrb2ZmID09PSBmYWxzZSksICdyZXRyeUJhY2tvZmYgbXVzdCBiZSBlaXRoZXIgdHJ1ZSBvciBmYWxzZScpO1xuICAgIGFzc2VydCghKCdyZXRyeURlbGF5TWF4JyBpbiBjb25maWcpIHx8IGNvbmZpZy5yZXRyeURlbGF5TWF4ID09PSBudWxsIHx8IGNvbmZpZy5yZXRyeUJhY2tvZmYgPT09IHRydWUsICdyZXRyeURlbGF5TWF4IGNhbiBvbmx5IGJlIHNldCBpZiByZXRyeUJhY2tvZmYgaXMgdHJ1ZScpO1xuICAgIGFzc2VydCghKCdyZXRyeURlbGF5TWF4JyBpbiBjb25maWcpIHx8IGNvbmZpZy5yZXRyeURlbGF5TWF4ID09PSBudWxsIHx8IChOdW1iZXIuaXNJbnRlZ2VyKGNvbmZpZy5yZXRyeURlbGF5TWF4KSAmJiBjb25maWcucmV0cnlEZWxheU1heCA+PSAwKSwgJ3JldHJ5RGVsYXlNYXggbXVzdCBiZSBhbiBpbnRlZ2VyID49IDAnKTtcbn1cbmZ1bmN0aW9uIGFwcGx5UG9sbGluZ0ludGVydmFsKGNvbmZpZykge1xuICAgIGFzc2VydCghKCdwb2xsaW5nSW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy5wb2xsaW5nSW50ZXJ2YWxTZWNvbmRzID49IFBPTElDWS5NSU5fUE9MTElOR19JTlRFUlZBTF9NUyAvIDEwMDAsIGBjb25maWd1cmF0aW9uIGFzc2VydDogcG9sbGluZ0ludGVydmFsU2Vjb25kcyBtdXN0IGJlIGF0IGxlYXN0IGV2ZXJ5ICR7UE9MSUNZLk1JTl9QT0xMSU5HX0lOVEVSVkFMX01TfW1zYCk7XG4gICAgY29uZmlnLnBvbGxpbmdJbnRlcnZhbCA9ICgncG9sbGluZ0ludGVydmFsU2Vjb25kcycgaW4gY29uZmlnKVxuICAgICAgICA/IGNvbmZpZy5wb2xsaW5nSW50ZXJ2YWxTZWNvbmRzICogMTAwMFxuICAgICAgICA6IDIwMDA7XG59XG5mdW5jdGlvbiBhcHBseU9wc0NvbmZpZyhjb25maWcpIHtcbiAgICBhc3NlcnQoISgnc3VwZXJ2aXNlSW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy5zdXBlcnZpc2VJbnRlcnZhbFNlY29uZHMgPj0gMSwgJ2NvbmZpZ3VyYXRpb24gYXNzZXJ0OiBzdXBlcnZpc2VJbnRlcnZhbFNlY29uZHMgbXVzdCBiZSBhdCBsZWFzdCBldmVyeSBzZWNvbmQnKTtcbiAgICBjb25maWcuc3VwZXJ2aXNlSW50ZXJ2YWxTZWNvbmRzID0gY29uZmlnLnN1cGVydmlzZUludGVydmFsU2Vjb25kcyB8fCA2MDtcbiAgICBhc3NlcnQoY29uZmlnLnN1cGVydmlzZUludGVydmFsU2Vjb25kcyAvIDYwIC8gNjAgPD0gUE9MSUNZLk1BWF9FWFBJUkFUSU9OX0hPVVJTLCBgY29uZmlndXJhdGlvbiBhc3NlcnQ6IHN1cGVydmlzZUludGVydmFsU2Vjb25kcyBjYW5ub3QgZXhjZWVkICR7UE9MSUNZLk1BWF9FWFBJUkFUSU9OX0hPVVJTfSBob3Vyc2ApO1xuICAgIGFzc2VydCghKCdtYWludGVuYW5jZUludGVydmFsU2Vjb25kcycgaW4gY29uZmlnKSB8fCBjb25maWcubWFpbnRlbmFuY2VJbnRlcnZhbFNlY29uZHMgPj0gMSwgJ2NvbmZpZ3VyYXRpb24gYXNzZXJ0OiBtYWludGVuYW5jZUludGVydmFsU2Vjb25kcyBtdXN0IGJlIGF0IGxlYXN0IGV2ZXJ5IHNlY29uZCcpO1xuICAgIGNvbmZpZy5tYWludGVuYW5jZUludGVydmFsU2Vjb25kcyA9IGNvbmZpZy5tYWludGVuYW5jZUludGVydmFsU2Vjb25kcyB8fCBQT0xJQ1kuTUFYX0VYUElSQVRJT05fSE9VUlMgKiA2MCAqIDYwO1xuICAgIGFzc2VydChjb25maWcubWFpbnRlbmFuY2VJbnRlcnZhbFNlY29uZHMgLyA2MCAvIDYwIDw9IFBPTElDWS5NQVhfRVhQSVJBVElPTl9IT1VSUywgYGNvbmZpZ3VyYXRpb24gYXNzZXJ0OiBtYWludGVuYW5jZUludGVydmFsU2Vjb25kcyBjYW5ub3QgZXhjZWVkICR7UE9MSUNZLk1BWF9FWFBJUkFUSU9OX0hPVVJTfSBob3Vyc2ApO1xuICAgIGFzc2VydCghKCdtb25pdG9ySW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy5tb25pdG9ySW50ZXJ2YWxTZWNvbmRzID49IDEsICdjb25maWd1cmF0aW9uIGFzc2VydDogbW9uaXRvckludGVydmFsU2Vjb25kcyBtdXN0IGJlIGF0IGxlYXN0IGV2ZXJ5IHNlY29uZCcpO1xuICAgIGNvbmZpZy5tb25pdG9ySW50ZXJ2YWxTZWNvbmRzID0gY29uZmlnLm1vbml0b3JJbnRlcnZhbFNlY29uZHMgfHwgNjA7XG4gICAgYXNzZXJ0KGNvbmZpZy5tb25pdG9ySW50ZXJ2YWxTZWNvbmRzIC8gNjAgLyA2MCA8PSBQT0xJQ1kuTUFYX0VYUElSQVRJT05fSE9VUlMsIGBjb25maWd1cmF0aW9uIGFzc2VydDogbW9uaXRvckludGVydmFsU2Vjb25kcyBjYW5ub3QgZXhjZWVkICR7UE9MSUNZLk1BWF9FWFBJUkFUSU9OX0hPVVJTfSBob3Vyc2ApO1xuICAgIGFzc2VydCghKCdxdWV1ZUNhY2hlSW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy5xdWV1ZUNhY2hlSW50ZXJ2YWxTZWNvbmRzID49IDEsICdjb25maWd1cmF0aW9uIGFzc2VydDogcXVldWVDYWNoZUludGVydmFsU2Vjb25kcyBtdXN0IGJlIGF0IGxlYXN0IGV2ZXJ5IHNlY29uZCcpO1xuICAgIGNvbmZpZy5xdWV1ZUNhY2hlSW50ZXJ2YWxTZWNvbmRzID0gY29uZmlnLnF1ZXVlQ2FjaGVJbnRlcnZhbFNlY29uZHMgfHwgNjA7XG4gICAgYXNzZXJ0KGNvbmZpZy5xdWV1ZUNhY2hlSW50ZXJ2YWxTZWNvbmRzIC8gNjAgLyA2MCA8PSBQT0xJQ1kuTUFYX0VYUElSQVRJT05fSE9VUlMsIGBjb25maWd1cmF0aW9uIGFzc2VydDogcXVldWVDYWNoZUludGVydmFsU2Vjb25kcyBjYW5ub3QgZXhjZWVkICR7UE9MSUNZLk1BWF9FWFBJUkFUSU9OX0hPVVJTfSBob3Vyc2ApO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVEZWxldGlvbkNvbmZpZyhjb25maWcpIHtcbiAgICBhc3NlcnQoISgnZGVsZXRlQWZ0ZXJTZWNvbmRzJyBpbiBjb25maWcpIHx8IGNvbmZpZy5kZWxldGVBZnRlclNlY29uZHMgPj0gMCwgJ2NvbmZpZ3VyYXRpb24gYXNzZXJ0OiBkZWxldGVBZnRlclNlY29uZHMgbXVzdCBiZSBhdCBsZWFzdCAwICgwIGRpc2FibGVzIGRlbGV0aW9uKScpO1xufVxuZnVuY3Rpb24gYXBwbHlTY2hlZHVsZUNvbmZpZyhjb25maWcpIHtcbiAgICBhc3NlcnQoISgnY2xvY2tNb25pdG9ySW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IChjb25maWcuY2xvY2tNb25pdG9ySW50ZXJ2YWxTZWNvbmRzID49IDEgJiYgY29uZmlnLmNsb2NrTW9uaXRvckludGVydmFsU2Vjb25kcyA8PSA2MDApLCAnY29uZmlndXJhdGlvbiBhc3NlcnQ6IGNsb2NrTW9uaXRvckludGVydmFsU2Vjb25kcyBtdXN0IGJlIGJldHdlZW4gMSBzZWNvbmQgYW5kIDEwIG1pbnV0ZXMnKTtcbiAgICBjb25maWcuY2xvY2tNb25pdG9ySW50ZXJ2YWxTZWNvbmRzID0gY29uZmlnLmNsb2NrTW9uaXRvckludGVydmFsU2Vjb25kcyB8fCA2MDA7XG4gICAgYXNzZXJ0KCEoJ2Nyb25Nb25pdG9ySW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IChjb25maWcuY3Jvbk1vbml0b3JJbnRlcnZhbFNlY29uZHMgPj0gMSAmJiBjb25maWcuY3Jvbk1vbml0b3JJbnRlcnZhbFNlY29uZHMgPD0gNDUpLCAnY29uZmlndXJhdGlvbiBhc3NlcnQ6IGNyb25Nb25pdG9ySW50ZXJ2YWxTZWNvbmRzIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA0NSBzZWNvbmRzJyk7XG4gICAgY29uZmlnLmNyb25Nb25pdG9ySW50ZXJ2YWxTZWNvbmRzID0gY29uZmlnLmNyb25Nb25pdG9ySW50ZXJ2YWxTZWNvbmRzIHx8IDMwO1xuICAgIGFzc2VydCghKCdjcm9uV29ya2VySW50ZXJ2YWxTZWNvbmRzJyBpbiBjb25maWcpIHx8IChjb25maWcuY3JvbldvcmtlckludGVydmFsU2Vjb25kcyA+PSAxICYmIGNvbmZpZy5jcm9uV29ya2VySW50ZXJ2YWxTZWNvbmRzIDw9IDQ1KSwgJ2NvbmZpZ3VyYXRpb24gYXNzZXJ0OiBjcm9uV29ya2VySW50ZXJ2YWxTZWNvbmRzIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA0NSBzZWNvbmRzJyk7XG4gICAgY29uZmlnLmNyb25Xb3JrZXJJbnRlcnZhbFNlY29uZHMgPSBjb25maWcuY3JvbldvcmtlckludGVydmFsU2Vjb25kcyB8fCA1O1xufVxuZnVuY3Rpb24gYXBwbHlCYW1Db25maWcoY29uZmlnKSB7XG4gICAgY29uc3QgbWluSW50ZXJ2YWwgPSBjb25maWcuX190ZXN0X19ieXBhc3NfYmFtX2ludGVydmFsX2NoZWNrID8gMSA6IDEwO1xuICAgIGFzc2VydCghKCdiYW1JbnRlcnZhbFNlY29uZHMnIGluIGNvbmZpZykgfHwgY29uZmlnLmJhbUludGVydmFsU2Vjb25kcyA+PSBtaW5JbnRlcnZhbCwgYGNvbmZpZ3VyYXRpb24gYXNzZXJ0OiBiYW1JbnRlcnZhbFNlY29uZHMgbXVzdCBiZSBhdCBsZWFzdCAke21pbkludGVydmFsfSBzZWNvbmRzYCk7XG4gICAgY29uZmlnLmJhbUludGVydmFsU2Vjb25kcyA9IGNvbmZpZy5iYW1JbnRlcnZhbFNlY29uZHMgfHwgNjA7XG59XG5leHBvcnQgeyBhc3NlcnRLZXksIGFzc2VydFBvc3RncmVzT2JqZWN0TmFtZSwgYXNzZXJ0UXVldWVOYW1lLCBjaGVja0ZldGNoQXJncywgY2hlY2tTZW5kQXJncywgY2hlY2tXb3JrQXJncywgZ2V0Q29uZmlnLCBQT0xJQ1ksIHZhbGlkYXRlUXVldWVBcmdzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/attorney.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/bam.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/bam.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js\");\n\n\n\nconst events = {\n    error: 'error',\n    bam: 'bam'\n};\nclass Bam extends node_events__WEBPACK_IMPORTED_MODULE_0__ {\n    #stopped;\n    #working;\n    #pollInterval;\n    #db;\n    #config;\n    events = events;\n    constructor(db, config) {\n        super();\n        this.#db = db;\n        this.#config = config;\n        this.#stopped = true;\n        this.#working = false;\n    }\n    async start() {\n        if (!this.#stopped)\n            return;\n        this.#stopped = false;\n        setImmediate(() => this.#onPoll());\n        this.#pollInterval = setInterval(() => this.#onPoll(), this.#config.bamIntervalSeconds * 1000);\n    }\n    async stop() {\n        if (this.#stopped)\n            return;\n        this.#stopped = true;\n        if (this.#pollInterval) {\n            clearInterval(this.#pollInterval);\n            this.#pollInterval = undefined;\n        }\n    }\n    async #onPoll() {\n        if (this.#stopped || this.#working || !this.#config.migrate)\n            return;\n        this.#working = true;\n        try {\n            if (this.#config.__test__throw_bam) {\n                throw new Error(this.#config.__test__throw_bam);\n            }\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.trySetBamTime(this.#config.schema, this.#config.bamIntervalSeconds);\n            const { rows } = await this.#db.executeSql(sql);\n            if (rows.length === 1) {\n                await this.#processCommands();\n            }\n        }\n        catch (err) {\n            this.emit(events.error, err);\n        }\n        finally {\n            this.#working = false;\n        }\n    }\n    async #processCommands() {\n        if (this.#stopped)\n            return;\n        const entry = await this.#getNextCommand();\n        if (!entry || this.#stopped)\n            return;\n        this.emit(events.bam, {\n            id: entry.id,\n            name: entry.name,\n            status: 'in_progress',\n            queue: entry.queue,\n            table: entry.table\n        });\n        try {\n            await this.#db.executeSql(entry.command);\n            if (this.#stopped)\n                return;\n            await this.#markCompleted(entry.id);\n            this.emit(events.bam, {\n                id: entry.id,\n                name: entry.name,\n                status: 'completed',\n                queue: entry.queue,\n                table: entry.table\n            });\n        }\n        catch (err) {\n            if (this.#stopped)\n                return;\n            await this.#markFailed(entry.id, err);\n            this.emit(events.error, err);\n            this.emit(events.bam, {\n                id: entry.id,\n                name: entry.name,\n                status: 'failed',\n                queue: entry.queue,\n                table: entry.table,\n                error: String(err)\n            });\n        }\n    }\n    async #getNextCommand() {\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.getNextBamCommand(this.#config.schema);\n        const { rows } = await this.#db.executeSql(sql);\n        return rows[0] || null;\n    }\n    async #markCompleted(id) {\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.setBamCompleted(this.#config.schema, id);\n        await this.#db.executeSql(sql);\n    }\n    async #markFailed(id, error) {\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.setBamFailed(this.#config.schema, id, String(error));\n        await this.#db.executeSql(sql);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Bam);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvYmFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUM7QUFDSDtBQUNBO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdDQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFtQjtBQUMzQyxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdEQUF1QjtBQUMzQyxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0RBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsR0FBRyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVlcC1hcmNoaXRlY3R1cmUvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvYmFtLmpzP2JkN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdub2RlOmV2ZW50cyc7XG5pbXBvcnQgKiBhcyBwbGFucyBmcm9tIFwiLi9wbGFucy5qc1wiO1xuaW1wb3J0ICogYXMgdHlwZXMgZnJvbSBcIi4vdHlwZXMuanNcIjtcbmNvbnN0IGV2ZW50cyA9IHtcbiAgICBlcnJvcjogJ2Vycm9yJyxcbiAgICBiYW06ICdiYW0nXG59O1xuY2xhc3MgQmFtIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICAjc3RvcHBlZDtcbiAgICAjd29ya2luZztcbiAgICAjcG9sbEludGVydmFsO1xuICAgICNkYjtcbiAgICAjY29uZmlnO1xuICAgIGV2ZW50cyA9IGV2ZW50cztcbiAgICBjb25zdHJ1Y3RvcihkYiwgY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI2RiID0gZGI7XG4gICAgICAgIHRoaXMuI2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy4jc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuI3dvcmtpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RvcHBlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy4jc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBzZXRJbW1lZGlhdGUoKCkgPT4gdGhpcy4jb25Qb2xsKCkpO1xuICAgICAgICB0aGlzLiNwb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLiNvblBvbGwoKSwgdGhpcy4jY29uZmlnLmJhbUludGVydmFsU2Vjb25kcyAqIDEwMDApO1xuICAgIH1cbiAgICBhc3luYyBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RvcHBlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy4jc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLiNwb2xsSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy4jcG9sbEludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMuI3BvbGxJbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjb25Qb2xsKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RvcHBlZCB8fCB0aGlzLiN3b3JraW5nIHx8ICF0aGlzLiNjb25maWcubWlncmF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy4jd29ya2luZyA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy4jY29uZmlnLl9fdGVzdF9fdGhyb3dfYmFtKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuI2NvbmZpZy5fX3Rlc3RfX3Rocm93X2JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzcWwgPSBwbGFucy50cnlTZXRCYW1UaW1lKHRoaXMuI2NvbmZpZy5zY2hlbWEsIHRoaXMuI2NvbmZpZy5iYW1JbnRlcnZhbFNlY29uZHMpO1xuICAgICAgICAgICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCB0aGlzLiNkYi5leGVjdXRlU3FsKHNxbCk7XG4gICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzQ29tbWFuZHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoZXZlbnRzLmVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy4jd29ya2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNwcm9jZXNzQ29tbWFuZHMoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdG9wcGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHRoaXMuI2dldE5leHRDb21tYW5kKCk7XG4gICAgICAgIGlmICghZW50cnkgfHwgdGhpcy4jc3RvcHBlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5lbWl0KGV2ZW50cy5iYW0sIHtcbiAgICAgICAgICAgIGlkOiBlbnRyeS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGVudHJ5Lm5hbWUsXG4gICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgICBxdWV1ZTogZW50cnkucXVldWUsXG4gICAgICAgICAgICB0YWJsZTogZW50cnkudGFibGVcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNkYi5leGVjdXRlU3FsKGVudHJ5LmNvbW1hbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuI3N0b3BwZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jbWFya0NvbXBsZXRlZChlbnRyeS5pZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoZXZlbnRzLmJhbSwge1xuICAgICAgICAgICAgICAgIGlkOiBlbnRyeS5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBlbnRyeS5uYW1lLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgcXVldWU6IGVudHJ5LnF1ZXVlLFxuICAgICAgICAgICAgICAgIHRhYmxlOiBlbnRyeS50YWJsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKHRoaXMuI3N0b3BwZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jbWFya0ZhaWxlZChlbnRyeS5pZCwgZXJyKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChldmVudHMuZXJyb3IsIGVycik7XG4gICAgICAgICAgICB0aGlzLmVtaXQoZXZlbnRzLmJhbSwge1xuICAgICAgICAgICAgICAgIGlkOiBlbnRyeS5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBlbnRyeS5uYW1lLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXG4gICAgICAgICAgICAgICAgcXVldWU6IGVudHJ5LnF1ZXVlLFxuICAgICAgICAgICAgICAgIHRhYmxlOiBlbnRyeS50YWJsZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNnZXROZXh0Q29tbWFuZCgpIHtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuZ2V0TmV4dEJhbUNvbW1hbmQodGhpcy4jY29uZmlnLnNjaGVtYSk7XG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgdGhpcy4jZGIuZXhlY3V0ZVNxbChzcWwpO1xuICAgICAgICByZXR1cm4gcm93c1swXSB8fCBudWxsO1xuICAgIH1cbiAgICBhc3luYyAjbWFya0NvbXBsZXRlZChpZCkge1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5zZXRCYW1Db21wbGV0ZWQodGhpcy4jY29uZmlnLnNjaGVtYSwgaWQpO1xuICAgICAgICBhd2FpdCB0aGlzLiNkYi5leGVjdXRlU3FsKHNxbCk7XG4gICAgfVxuICAgIGFzeW5jICNtYXJrRmFpbGVkKGlkLCBlcnJvcikge1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5zZXRCYW1GYWlsZWQodGhpcy4jY29uZmlnLnNjaGVtYSwgaWQsIFN0cmluZyhlcnJvcikpO1xuICAgICAgICBhd2FpdCB0aGlzLiNkYi5leGVjdXRlU3FsKHNxbCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQmFtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/bam.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/boss.js":
/*!******************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/boss.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tools.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js\");\n/* harmony import */ var _warning_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./warning.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/warning.js\");\n\n\n\n\n\nconst events = {\n    error: 'error',\n    warning: 'warning'\n};\nconst WARNINGS = {\n    SLOW_QUERY: { seconds: 30, message: 'Warning: slow query. Your queues and/or database server should be reviewed' },\n    LARGE_QUEUE: { size: 10_000, message: 'Warning: large queue backlog. Your queue should be reviewed' }\n};\nconst WARNING_TYPES = {\n    SLOW_QUERY: 'slow_query',\n    QUEUE_BACKLOG: 'queue_backlog'\n};\nclass Boss extends node_events__WEBPACK_IMPORTED_MODULE_0__ {\n    #stopped;\n    #stopping;\n    #maintaining;\n    #superviseInterval;\n    #db;\n    #config;\n    #manager;\n    events = events;\n    constructor(db, manager, config) {\n        super();\n        this.#db = db;\n        this.#config = config;\n        this.#manager = manager;\n        this.#stopped = true;\n        this.#stopping = false;\n        if (config.warningSlowQuerySeconds) {\n            WARNINGS.SLOW_QUERY.seconds = config.warningSlowQuerySeconds;\n        }\n        if (config.warningQueueSize) {\n            WARNINGS.LARGE_QUEUE.size = config.warningQueueSize;\n        }\n    }\n    async start() {\n        if (this.#stopped) {\n            this.#stopping = false;\n            this.#superviseInterval = setInterval(() => this.#onSupervise(), this.#config.superviseIntervalSeconds * 1000);\n            this.#stopped = false;\n        }\n    }\n    async stop() {\n        if (!this.#stopped) {\n            this.#stopping = true;\n            if (this.#superviseInterval)\n                clearInterval(this.#superviseInterval);\n            this.#stopped = true;\n        }\n    }\n    get #warningContext() {\n        return {\n            emitter: this,\n            db: this.#db,\n            schema: this.#config.schema,\n            persistWarnings: this.#config.persistWarnings,\n            warningEvent: events.warning,\n            errorEvent: events.error\n        };\n    }\n    async #executeSql(sql) {\n        const started = Date.now();\n        const result = (0,_tools_js__WEBPACK_IMPORTED_MODULE_2__.unwrapSQLResult)(await this.#db.executeSql(sql));\n        const elapsed = (Date.now() - started) / 1000;\n        if (elapsed > WARNINGS.SLOW_QUERY.seconds ||\n            this.#config.__test__warn_slow_query) {\n            await (0,_warning_js__WEBPACK_IMPORTED_MODULE_4__.emitAndPersistWarning)(this.#warningContext, WARNING_TYPES.SLOW_QUERY, WARNINGS.SLOW_QUERY.message, { elapsed, sql });\n        }\n        return result;\n    }\n    async #executeQuery(query) {\n        const started = Date.now();\n        const result = (0,_tools_js__WEBPACK_IMPORTED_MODULE_2__.unwrapSQLResult)(await this.#db.executeSql(query.text, query.values));\n        const elapsed = (Date.now() - started) / 1000;\n        if (elapsed > WARNINGS.SLOW_QUERY.seconds ||\n            this.#config.__test__warn_slow_query) {\n            await (0,_warning_js__WEBPACK_IMPORTED_MODULE_4__.emitAndPersistWarning)(this.#warningContext, WARNING_TYPES.SLOW_QUERY, WARNINGS.SLOW_QUERY.message, { elapsed, sql: query.text, values: query.values });\n        }\n        return result;\n    }\n    async #onSupervise() {\n        try {\n            if (this.#stopped)\n                return;\n            if (this.#maintaining)\n                return;\n            if (this.#config.__test__throw_maint) {\n                throw new Error(this.#config.__test__throw_maint);\n            }\n            this.#maintaining = true;\n            const queues = await this.#manager.getQueues();\n            !this.#stopped && (await this.supervise(queues));\n            !this.#stopped && (await this.#maintainWarnings());\n        }\n        catch (err) {\n            this.emit(events.error, err);\n        }\n        finally {\n            this.#maintaining = false;\n        }\n    }\n    async #maintainWarnings() {\n        if (!this.#config.persistWarnings || !this.#config.warningRetentionDays) {\n            return;\n        }\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.deleteOldWarnings(this.#config.schema, this.#config.warningRetentionDays);\n        await this.#executeSql(sql);\n    }\n    async supervise(value) {\n        let queues;\n        if (Array.isArray(value)) {\n            queues = value;\n        }\n        else {\n            queues = await this.#manager.getQueues(value);\n        }\n        const queueGroups = queues.reduce((acc, q) => {\n            const { table } = q;\n            acc[table] = acc[table] || { table, queues: [] };\n            acc[table].queues.push(q);\n            return acc;\n        }, {});\n        for (const queueGroup of Object.values(queueGroups)) {\n            if (this.#stopping)\n                return;\n            const { table, queues } = queueGroup;\n            const names = queues.map((i) => i.name);\n            while (names.length) {\n                if (this.#stopping)\n                    return;\n                const chunk = names.splice(0, 100);\n                await this.#monitor(table, chunk);\n                await this.#maintain(table, chunk);\n            }\n        }\n    }\n    async #monitor(table, names) {\n        if (this.#stopping)\n            return;\n        const command = _plans_js__WEBPACK_IMPORTED_MODULE_1__.trySetQueueMonitorTime(this.#config.schema, names, this.#config.monitorIntervalSeconds);\n        const { rows } = await this.#executeQuery(command);\n        if (this.#stopping)\n            return;\n        if (rows.length) {\n            const queues = rows.map((q) => q.name);\n            const cacheStatsSql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.cacheQueueStats(this.#config.schema, table, queues);\n            const { rows: rowsCacheStats } = await this.#executeSql(cacheStatsSql);\n            if (this.#stopping)\n                return;\n            const warnings = rowsCacheStats.filter(i => i.queuedCount > (i.warningQueueSize || WARNINGS.LARGE_QUEUE.size));\n            for (const warning of warnings) {\n                await (0,_warning_js__WEBPACK_IMPORTED_MODULE_4__.emitAndPersistWarning)(this.#warningContext, WARNING_TYPES.QUEUE_BACKLOG, WARNINGS.LARGE_QUEUE.message, warning);\n            }\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.failJobsByTimeout(this.#config.schema, table, queues);\n            await this.#executeSql(sql);\n        }\n    }\n    async #maintain(table, names) {\n        if (this.#stopping)\n            return;\n        const command = _plans_js__WEBPACK_IMPORTED_MODULE_1__.trySetQueueDeletionTime(this.#config.schema, names, this.#config.maintenanceIntervalSeconds);\n        const { rows } = await this.#executeQuery(command);\n        if (this.#stopping)\n            return;\n        if (rows.length) {\n            const queues = rows.map((q) => q.name);\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_1__.deletion(this.#config.schema, table, queues);\n            await this.#executeSql(sql);\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Boss);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvYm9zcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUM7QUFDSDtBQUNTO0FBQ1Q7QUFDaUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvR0FBb0c7QUFDdEgsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsd0NBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMERBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtFQUFxQixnRkFBZ0YsY0FBYztBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBEQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrRUFBcUIsZ0ZBQWdGLGdEQUFnRDtBQUN2SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBdUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCLHlDQUF5QztBQUN6QztBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2REFBNEI7QUFDcEQsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0RBQXFCO0FBQ3ZELG9CQUFvQix1QkFBdUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isa0VBQXFCO0FBQzNDO0FBQ0Esd0JBQXdCLHdEQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQTZCO0FBQ3JELGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsSUFBSSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVlcC1hcmNoaXRlY3R1cmUvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvYm9zcy5qcz8yMTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnbm9kZTpldmVudHMnO1xuaW1wb3J0ICogYXMgcGxhbnMgZnJvbSBcIi4vcGxhbnMuanNcIjtcbmltcG9ydCB7IHVud3JhcFNRTFJlc3VsdCB9IGZyb20gXCIuL3Rvb2xzLmpzXCI7XG5pbXBvcnQgKiBhcyB0eXBlcyBmcm9tIFwiLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgZW1pdEFuZFBlcnNpc3RXYXJuaW5nIH0gZnJvbSBcIi4vd2FybmluZy5qc1wiO1xuY29uc3QgZXZlbnRzID0ge1xuICAgIGVycm9yOiAnZXJyb3InLFxuICAgIHdhcm5pbmc6ICd3YXJuaW5nJ1xufTtcbmNvbnN0IFdBUk5JTkdTID0ge1xuICAgIFNMT1dfUVVFUlk6IHsgc2Vjb25kczogMzAsIG1lc3NhZ2U6ICdXYXJuaW5nOiBzbG93IHF1ZXJ5LiBZb3VyIHF1ZXVlcyBhbmQvb3IgZGF0YWJhc2Ugc2VydmVyIHNob3VsZCBiZSByZXZpZXdlZCcgfSxcbiAgICBMQVJHRV9RVUVVRTogeyBzaXplOiAxMF8wMDAsIG1lc3NhZ2U6ICdXYXJuaW5nOiBsYXJnZSBxdWV1ZSBiYWNrbG9nLiBZb3VyIHF1ZXVlIHNob3VsZCBiZSByZXZpZXdlZCcgfVxufTtcbmNvbnN0IFdBUk5JTkdfVFlQRVMgPSB7XG4gICAgU0xPV19RVUVSWTogJ3Nsb3dfcXVlcnknLFxuICAgIFFVRVVFX0JBQ0tMT0c6ICdxdWV1ZV9iYWNrbG9nJ1xufTtcbmNsYXNzIEJvc3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgICNzdG9wcGVkO1xuICAgICNzdG9wcGluZztcbiAgICAjbWFpbnRhaW5pbmc7XG4gICAgI3N1cGVydmlzZUludGVydmFsO1xuICAgICNkYjtcbiAgICAjY29uZmlnO1xuICAgICNtYW5hZ2VyO1xuICAgIGV2ZW50cyA9IGV2ZW50cztcbiAgICBjb25zdHJ1Y3RvcihkYiwgbWFuYWdlciwgY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI2RiID0gZGI7XG4gICAgICAgIHRoaXMuI2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy4jbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuI3N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLiNzdG9wcGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAoY29uZmlnLndhcm5pbmdTbG93UXVlcnlTZWNvbmRzKSB7XG4gICAgICAgICAgICBXQVJOSU5HUy5TTE9XX1FVRVJZLnNlY29uZHMgPSBjb25maWcud2FybmluZ1Nsb3dRdWVyeVNlY29uZHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy53YXJuaW5nUXVldWVTaXplKSB7XG4gICAgICAgICAgICBXQVJOSU5HUy5MQVJHRV9RVUVVRS5zaXplID0gY29uZmlnLndhcm5pbmdRdWV1ZVNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLiNzdG9wcGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy4jc3VwZXJ2aXNlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLiNvblN1cGVydmlzZSgpLCB0aGlzLiNjb25maWcuc3VwZXJ2aXNlSW50ZXJ2YWxTZWNvbmRzICogMTAwMCk7XG4gICAgICAgICAgICB0aGlzLiNzdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLiNzdG9wcGluZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy4jc3VwZXJ2aXNlSW50ZXJ2YWwpXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLiNzdXBlcnZpc2VJbnRlcnZhbCk7XG4gICAgICAgICAgICB0aGlzLiNzdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgI3dhcm5pbmdDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZW1pdHRlcjogdGhpcyxcbiAgICAgICAgICAgIGRiOiB0aGlzLiNkYixcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcy4jY29uZmlnLnNjaGVtYSxcbiAgICAgICAgICAgIHBlcnNpc3RXYXJuaW5nczogdGhpcy4jY29uZmlnLnBlcnNpc3RXYXJuaW5ncyxcbiAgICAgICAgICAgIHdhcm5pbmdFdmVudDogZXZlbnRzLndhcm5pbmcsXG4gICAgICAgICAgICBlcnJvckV2ZW50OiBldmVudHMuZXJyb3JcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgI2V4ZWN1dGVTcWwoc3FsKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1bndyYXBTUUxSZXN1bHQoYXdhaXQgdGhpcy4jZGIuZXhlY3V0ZVNxbChzcWwpKTtcbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IChEYXRlLm5vdygpIC0gc3RhcnRlZCkgLyAxMDAwO1xuICAgICAgICBpZiAoZWxhcHNlZCA+IFdBUk5JTkdTLlNMT1dfUVVFUlkuc2Vjb25kcyB8fFxuICAgICAgICAgICAgdGhpcy4jY29uZmlnLl9fdGVzdF9fd2Fybl9zbG93X3F1ZXJ5KSB7XG4gICAgICAgICAgICBhd2FpdCBlbWl0QW5kUGVyc2lzdFdhcm5pbmcodGhpcy4jd2FybmluZ0NvbnRleHQsIFdBUk5JTkdfVFlQRVMuU0xPV19RVUVSWSwgV0FSTklOR1MuU0xPV19RVUVSWS5tZXNzYWdlLCB7IGVsYXBzZWQsIHNxbCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyAjZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1bndyYXBTUUxSZXN1bHQoYXdhaXQgdGhpcy4jZGIuZXhlY3V0ZVNxbChxdWVyeS50ZXh0LCBxdWVyeS52YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IChEYXRlLm5vdygpIC0gc3RhcnRlZCkgLyAxMDAwO1xuICAgICAgICBpZiAoZWxhcHNlZCA+IFdBUk5JTkdTLlNMT1dfUVVFUlkuc2Vjb25kcyB8fFxuICAgICAgICAgICAgdGhpcy4jY29uZmlnLl9fdGVzdF9fd2Fybl9zbG93X3F1ZXJ5KSB7XG4gICAgICAgICAgICBhd2FpdCBlbWl0QW5kUGVyc2lzdFdhcm5pbmcodGhpcy4jd2FybmluZ0NvbnRleHQsIFdBUk5JTkdfVFlQRVMuU0xPV19RVUVSWSwgV0FSTklOR1MuU0xPV19RVUVSWS5tZXNzYWdlLCB7IGVsYXBzZWQsIHNxbDogcXVlcnkudGV4dCwgdmFsdWVzOiBxdWVyeS52YWx1ZXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgI29uU3VwZXJ2aXNlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuI3N0b3BwZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuI21haW50YWluaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLiNjb25maWcuX190ZXN0X190aHJvd19tYWludCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLiNjb25maWcuX190ZXN0X190aHJvd19tYWludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiNtYWludGFpbmluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBxdWV1ZXMgPSBhd2FpdCB0aGlzLiNtYW5hZ2VyLmdldFF1ZXVlcygpO1xuICAgICAgICAgICAgIXRoaXMuI3N0b3BwZWQgJiYgKGF3YWl0IHRoaXMuc3VwZXJ2aXNlKHF1ZXVlcykpO1xuICAgICAgICAgICAgIXRoaXMuI3N0b3BwZWQgJiYgKGF3YWl0IHRoaXMuI21haW50YWluV2FybmluZ3MoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5lbWl0KGV2ZW50cy5lcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuI21haW50YWluaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI21haW50YWluV2FybmluZ3MoKSB7XG4gICAgICAgIGlmICghdGhpcy4jY29uZmlnLnBlcnNpc3RXYXJuaW5ncyB8fCAhdGhpcy4jY29uZmlnLndhcm5pbmdSZXRlbnRpb25EYXlzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuZGVsZXRlT2xkV2FybmluZ3ModGhpcy4jY29uZmlnLnNjaGVtYSwgdGhpcy4jY29uZmlnLndhcm5pbmdSZXRlbnRpb25EYXlzKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jZXhlY3V0ZVNxbChzcWwpO1xuICAgIH1cbiAgICBhc3luYyBzdXBlcnZpc2UodmFsdWUpIHtcbiAgICAgICAgbGV0IHF1ZXVlcztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBxdWV1ZXMgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXVlcyA9IGF3YWl0IHRoaXMuI21hbmFnZXIuZ2V0UXVldWVzKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWV1ZUdyb3VwcyA9IHF1ZXVlcy5yZWR1Y2UoKGFjYywgcSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB0YWJsZSB9ID0gcTtcbiAgICAgICAgICAgIGFjY1t0YWJsZV0gPSBhY2NbdGFibGVdIHx8IHsgdGFibGUsIHF1ZXVlczogW10gfTtcbiAgICAgICAgICAgIGFjY1t0YWJsZV0ucXVldWVzLnB1c2gocSk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIGZvciAoY29uc3QgcXVldWVHcm91cCBvZiBPYmplY3QudmFsdWVzKHF1ZXVlR3JvdXBzKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuI3N0b3BwaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHsgdGFibGUsIHF1ZXVlcyB9ID0gcXVldWVHcm91cDtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gcXVldWVzLm1hcCgoaSkgPT4gaS5uYW1lKTtcbiAgICAgICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jc3RvcHBpbmcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IG5hbWVzLnNwbGljZSgwLCAxMDApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI21vbml0b3IodGFibGUsIGNodW5rKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNtYWludGFpbih0YWJsZSwgY2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNtb25pdG9yKHRhYmxlLCBuYW1lcykge1xuICAgICAgICBpZiAodGhpcy4jc3RvcHBpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbGFucy50cnlTZXRRdWV1ZU1vbml0b3JUaW1lKHRoaXMuI2NvbmZpZy5zY2hlbWEsIG5hbWVzLCB0aGlzLiNjb25maWcubW9uaXRvckludGVydmFsU2Vjb25kcyk7XG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgdGhpcy4jZXhlY3V0ZVF1ZXJ5KGNvbW1hbmQpO1xuICAgICAgICBpZiAodGhpcy4jc3RvcHBpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChyb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcXVldWVzID0gcm93cy5tYXAoKHEpID0+IHEubmFtZSk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZVN0YXRzU3FsID0gcGxhbnMuY2FjaGVRdWV1ZVN0YXRzKHRoaXMuI2NvbmZpZy5zY2hlbWEsIHRhYmxlLCBxdWV1ZXMpO1xuICAgICAgICAgICAgY29uc3QgeyByb3dzOiByb3dzQ2FjaGVTdGF0cyB9ID0gYXdhaXQgdGhpcy4jZXhlY3V0ZVNxbChjYWNoZVN0YXRzU3FsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzdG9wcGluZylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB3YXJuaW5ncyA9IHJvd3NDYWNoZVN0YXRzLmZpbHRlcihpID0+IGkucXVldWVkQ291bnQgPiAoaS53YXJuaW5nUXVldWVTaXplIHx8IFdBUk5JTkdTLkxBUkdFX1FVRVVFLnNpemUpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd2FybmluZyBvZiB3YXJuaW5ncykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGVtaXRBbmRQZXJzaXN0V2FybmluZyh0aGlzLiN3YXJuaW5nQ29udGV4dCwgV0FSTklOR19UWVBFUy5RVUVVRV9CQUNLTE9HLCBXQVJOSU5HUy5MQVJHRV9RVUVVRS5tZXNzYWdlLCB3YXJuaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmZhaWxKb2JzQnlUaW1lb3V0KHRoaXMuI2NvbmZpZy5zY2hlbWEsIHRhYmxlLCBxdWV1ZXMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhlY3V0ZVNxbChzcWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNtYWludGFpbih0YWJsZSwgbmFtZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0b3BwaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGxhbnMudHJ5U2V0UXVldWVEZWxldGlvblRpbWUodGhpcy4jY29uZmlnLnNjaGVtYSwgbmFtZXMsIHRoaXMuI2NvbmZpZy5tYWludGVuYW5jZUludGVydmFsU2Vjb25kcyk7XG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgdGhpcy4jZXhlY3V0ZVF1ZXJ5KGNvbW1hbmQpO1xuICAgICAgICBpZiAodGhpcy4jc3RvcHBpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChyb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcXVldWVzID0gcm93cy5tYXAoKHEpID0+IHEubmFtZSk7XG4gICAgICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5kZWxldGlvbih0aGlzLiNjb25maWcuc2NoZW1hLCB0YWJsZSwgcXVldWVzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4ZWN1dGVTcWwoc3FsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEJvc3M7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/boss.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/contractor.js":
/*!************************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/contractor.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:assert */ \"node:assert\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./migrationStore.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/migrationStore.js\");\n/* harmony import */ var _package_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../package.json */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/package.json\");\n\n\n\n\nconst schemaVersion = _package_json__WEBPACK_IMPORTED_MODULE_3__.pgboss.schema;\nclass Contractor {\n    static constructionPlans(schema = _plans_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCHEMA, options = { createSchema: true }) {\n        return _plans_js__WEBPACK_IMPORTED_MODULE_1__.create(schema, schemaVersion, options);\n    }\n    static migrationPlans(schema = _plans_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCHEMA, version = schemaVersion - 1) {\n        return _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__.migrate(schema, version);\n    }\n    static rollbackPlans(schema = _plans_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCHEMA, version = schemaVersion) {\n        return _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__.rollback(schema, version);\n    }\n    config;\n    db;\n    migrations;\n    constructor(db, config) {\n        this.config = config;\n        this.db = db;\n        this.migrations = this.config.migrations || _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__.getAll(this.config.schema);\n    }\n    async schemaVersion() {\n        const result = await this.db.executeSql(_plans_js__WEBPACK_IMPORTED_MODULE_1__.getVersion(this.config.schema));\n        return result.rows.length ? parseInt(result.rows[0].version) : null;\n    }\n    async isInstalled() {\n        const result = await this.db.executeSql(_plans_js__WEBPACK_IMPORTED_MODULE_1__.versionTableExists(this.config.schema));\n        return !!result.rows[0].name;\n    }\n    async start() {\n        const installed = await this.isInstalled();\n        if (installed) {\n            const version = await this.schemaVersion();\n            if (version !== null && schemaVersion > version) {\n                await this.migrate(version);\n            }\n        }\n        else {\n            await this.create();\n        }\n    }\n    async check() {\n        const installed = await this.isInstalled();\n        if (!installed) {\n            throw new Error('pg-boss is not installed');\n        }\n        const version = await this.schemaVersion();\n        if (schemaVersion !== version) {\n            throw new Error('pg-boss database requires migrations');\n        }\n    }\n    async create() {\n        try {\n            const commands = _plans_js__WEBPACK_IMPORTED_MODULE_1__.create(this.config.schema, schemaVersion, this.config);\n            await this.db.executeSql(commands);\n        }\n        catch (err) {\n            node_assert__WEBPACK_IMPORTED_MODULE_0__(err.message.includes(_plans_js__WEBPACK_IMPORTED_MODULE_1__.CREATE_RACE_MESSAGE), err);\n        }\n    }\n    async migrate(version) {\n        try {\n            const commands = _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__.migrate(this.config.schema, version, this.migrations);\n            await this.db.executeSql(commands);\n        }\n        catch (err) {\n            node_assert__WEBPACK_IMPORTED_MODULE_0__(err.message.includes(_plans_js__WEBPACK_IMPORTED_MODULE_1__.MIGRATE_RACE_MESSAGE), err);\n        }\n    }\n    async next(version) {\n        const commands = _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__.next(this.config.schema, version, this.migrations);\n        await this.db.executeSql(commands);\n    }\n    async rollback(version) {\n        const commands = _migrationStore_js__WEBPACK_IMPORTED_MODULE_2__.rollback(this.config.schema, version, this.migrations);\n        await this.db.executeSql(commands);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Contractor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvY29udHJhY3Rvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpQztBQUNHO0FBQ2tCO0FBQ1U7QUFDaEUsc0JBQXNCLHdEQUF5QjtBQUMvQztBQUNBLHNDQUFzQyxxREFBb0IsY0FBYyxvQkFBb0I7QUFDNUYsZUFBZSw2Q0FBWTtBQUMzQjtBQUNBLG1DQUFtQyxxREFBb0I7QUFDdkQsZUFBZSx1REFBc0I7QUFDckM7QUFDQSxrQ0FBa0MscURBQW9CO0FBQ3RELGVBQWUsd0RBQXVCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHNEQUFxQjtBQUN6RTtBQUNBO0FBQ0EsZ0RBQWdELGlEQUFnQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QseURBQXdCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNkNBQVk7QUFDekM7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBTSxzQkFBc0IsMERBQXlCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVEQUFzQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdDQUFNLHNCQUFzQiwyREFBMEI7QUFDbEU7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0RBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLFVBQVUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RlZXAtYXJjaGl0ZWN0dXJlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BnLWJvc3NAMTIuMTEuMS9ub2RlX21vZHVsZXMvcGctYm9zcy9kaXN0L2NvbnRyYWN0b3IuanM/MTBlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0IGZyb20gJ25vZGU6YXNzZXJ0JztcbmltcG9ydCAqIGFzIHBsYW5zIGZyb20gXCIuL3BsYW5zLmpzXCI7XG5pbXBvcnQgKiBhcyBtaWdyYXRpb25TdG9yZSBmcm9tIFwiLi9taWdyYXRpb25TdG9yZS5qc1wiO1xuaW1wb3J0IHBhY2thZ2VKc29uIGZyb20gJy4uL3BhY2thZ2UuanNvbicgd2l0aCB7IHR5cGU6ICdqc29uJyB9O1xuY29uc3Qgc2NoZW1hVmVyc2lvbiA9IHBhY2thZ2VKc29uLnBnYm9zcy5zY2hlbWE7XG5jbGFzcyBDb250cmFjdG9yIHtcbiAgICBzdGF0aWMgY29uc3RydWN0aW9uUGxhbnMoc2NoZW1hID0gcGxhbnMuREVGQVVMVF9TQ0hFTUEsIG9wdGlvbnMgPSB7IGNyZWF0ZVNjaGVtYTogdHJ1ZSB9KSB7XG4gICAgICAgIHJldHVybiBwbGFucy5jcmVhdGUoc2NoZW1hLCBzY2hlbWFWZXJzaW9uLCBvcHRpb25zKTtcbiAgICB9XG4gICAgc3RhdGljIG1pZ3JhdGlvblBsYW5zKHNjaGVtYSA9IHBsYW5zLkRFRkFVTFRfU0NIRU1BLCB2ZXJzaW9uID0gc2NoZW1hVmVyc2lvbiAtIDEpIHtcbiAgICAgICAgcmV0dXJuIG1pZ3JhdGlvblN0b3JlLm1pZ3JhdGUoc2NoZW1hLCB2ZXJzaW9uKTtcbiAgICB9XG4gICAgc3RhdGljIHJvbGxiYWNrUGxhbnMoc2NoZW1hID0gcGxhbnMuREVGQVVMVF9TQ0hFTUEsIHZlcnNpb24gPSBzY2hlbWFWZXJzaW9uKSB7XG4gICAgICAgIHJldHVybiBtaWdyYXRpb25TdG9yZS5yb2xsYmFjayhzY2hlbWEsIHZlcnNpb24pO1xuICAgIH1cbiAgICBjb25maWc7XG4gICAgZGI7XG4gICAgbWlncmF0aW9ucztcbiAgICBjb25zdHJ1Y3RvcihkYiwgY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMubWlncmF0aW9ucyA9IHRoaXMuY29uZmlnLm1pZ3JhdGlvbnMgfHwgbWlncmF0aW9uU3RvcmUuZ2V0QWxsKHRoaXMuY29uZmlnLnNjaGVtYSk7XG4gICAgfVxuICAgIGFzeW5jIHNjaGVtYVZlcnNpb24oKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChwbGFucy5nZXRWZXJzaW9uKHRoaXMuY29uZmlnLnNjaGVtYSkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0LnJvd3MubGVuZ3RoID8gcGFyc2VJbnQocmVzdWx0LnJvd3NbMF0udmVyc2lvbikgOiBudWxsO1xuICAgIH1cbiAgICBhc3luYyBpc0luc3RhbGxlZCgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kYi5leGVjdXRlU3FsKHBsYW5zLnZlcnNpb25UYWJsZUV4aXN0cyh0aGlzLmNvbmZpZy5zY2hlbWEpKTtcbiAgICAgICAgcmV0dXJuICEhcmVzdWx0LnJvd3NbMF0ubmFtZTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGNvbnN0IGluc3RhbGxlZCA9IGF3YWl0IHRoaXMuaXNJbnN0YWxsZWQoKTtcbiAgICAgICAgaWYgKGluc3RhbGxlZCkge1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IGF3YWl0IHRoaXMuc2NoZW1hVmVyc2lvbigpO1xuICAgICAgICAgICAgaWYgKHZlcnNpb24gIT09IG51bGwgJiYgc2NoZW1hVmVyc2lvbiA+IHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGUodmVyc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNoZWNrKCkge1xuICAgICAgICBjb25zdCBpbnN0YWxsZWQgPSBhd2FpdCB0aGlzLmlzSW5zdGFsbGVkKCk7XG4gICAgICAgIGlmICghaW5zdGFsbGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BnLWJvc3MgaXMgbm90IGluc3RhbGxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCB0aGlzLnNjaGVtYVZlcnNpb24oKTtcbiAgICAgICAgaWYgKHNjaGVtYVZlcnNpb24gIT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGctYm9zcyBkYXRhYmFzZSByZXF1aXJlcyBtaWdyYXRpb25zJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZHMgPSBwbGFucy5jcmVhdGUodGhpcy5jb25maWcuc2NoZW1hLCBzY2hlbWFWZXJzaW9uLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwoY29tbWFuZHMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGFzc2VydChlcnIubWVzc2FnZS5pbmNsdWRlcyhwbGFucy5DUkVBVEVfUkFDRV9NRVNTQUdFKSwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBtaWdyYXRlKHZlcnNpb24pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmRzID0gbWlncmF0aW9uU3RvcmUubWlncmF0ZSh0aGlzLmNvbmZpZy5zY2hlbWEsIHZlcnNpb24sIHRoaXMubWlncmF0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwoY29tbWFuZHMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGFzc2VydChlcnIubWVzc2FnZS5pbmNsdWRlcyhwbGFucy5NSUdSQVRFX1JBQ0VfTUVTU0FHRSksIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV4dCh2ZXJzaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRzID0gbWlncmF0aW9uU3RvcmUubmV4dCh0aGlzLmNvbmZpZy5zY2hlbWEsIHZlcnNpb24sIHRoaXMubWlncmF0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChjb21tYW5kcyk7XG4gICAgfVxuICAgIGFzeW5jIHJvbGxiYWNrKHZlcnNpb24pIHtcbiAgICAgICAgY29uc3QgY29tbWFuZHMgPSBtaWdyYXRpb25TdG9yZS5yb2xsYmFjayh0aGlzLmNvbmZpZy5zY2hlbWEsIHZlcnNpb24sIHRoaXMubWlncmF0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChjb21tYW5kcyk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQ29udHJhY3RvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/contractor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/db.js":
/*!****************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/db.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pg */ \"(rsc)/./node_modules/.pnpm/pg@8.18.0/node_modules/pg/esm/index.mjs\");\n/* harmony import */ var node_assert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:assert */ \"node:assert\");\n\n\n\nclass Db extends node_events__WEBPACK_IMPORTED_MODULE_0__ {\n    pool;\n    config;\n    /** @internal */\n    _pgbdb;\n    opened;\n    constructor(config) {\n        super();\n        config.application_name = config.application_name || 'pgboss';\n        config.connectionTimeoutMillis = config.connectionTimeoutMillis || 10000;\n        // config.maxUses = config.maxUses || 1000\n        this.config = config;\n        this._pgbdb = true;\n        this.opened = false;\n    }\n    events = {\n        error: 'error'\n    };\n    async open() {\n        this.pool = new pg__WEBPACK_IMPORTED_MODULE_1__[\"default\"].Pool(this.config);\n        this.pool.on('error', error => this.emit('error', error));\n        this.opened = true;\n    }\n    async close() {\n        if (!this.pool.ending) {\n            this.opened = false;\n            await this.pool.end();\n        }\n    }\n    async executeSql(text, values) {\n        node_assert__WEBPACK_IMPORTED_MODULE_2__(this.opened, 'Database not opened. Call open() before executing SQL.');\n        // if (this.config.debug === true) {\n        //   console.log(`${new Date().toISOString()}: DEBUG SQL`)\n        //   console.log(text)\n        //   if (values) {\n        //     console.log(`${new Date().toISOString()}: DEBUG VALUES`)\n        //     console.log(values)\n        //   }\n        // }\n        return await this.pool.query(text, values);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Db);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1QztBQUNuQjtBQUNhO0FBQ2pDLGlCQUFpQix3Q0FBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0NBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdDQUFNO0FBQ2Q7QUFDQSw0QkFBNEIseUJBQXlCO0FBQ3JEO0FBQ0E7QUFDQSw4QkFBOEIseUJBQXlCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLEVBQUUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RlZXAtYXJjaGl0ZWN0dXJlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BnLWJvc3NAMTIuMTEuMS9ub2RlX21vZHVsZXMvcGctYm9zcy9kaXN0L2RiLmpzPzIwYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdub2RlOmV2ZW50cyc7XG5pbXBvcnQgcGcgZnJvbSAncGcnO1xuaW1wb3J0IGFzc2VydCBmcm9tICdub2RlOmFzc2VydCc7XG5jbGFzcyBEYiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgcG9vbDtcbiAgICBjb25maWc7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9wZ2JkYjtcbiAgICBvcGVuZWQ7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNvbmZpZy5hcHBsaWNhdGlvbl9uYW1lID0gY29uZmlnLmFwcGxpY2F0aW9uX25hbWUgfHwgJ3BnYm9zcyc7XG4gICAgICAgIGNvbmZpZy5jb25uZWN0aW9uVGltZW91dE1pbGxpcyA9IGNvbmZpZy5jb25uZWN0aW9uVGltZW91dE1pbGxpcyB8fCAxMDAwMDtcbiAgICAgICAgLy8gY29uZmlnLm1heFVzZXMgPSBjb25maWcubWF4VXNlcyB8fCAxMDAwXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl9wZ2JkYiA9IHRydWU7XG4gICAgICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XG4gICAgfVxuICAgIGV2ZW50cyA9IHtcbiAgICAgICAgZXJyb3I6ICdlcnJvcidcbiAgICB9O1xuICAgIGFzeW5jIG9wZW4oKSB7XG4gICAgICAgIHRoaXMucG9vbCA9IG5ldyBwZy5Qb29sKHRoaXMuY29uZmlnKTtcbiAgICAgICAgdGhpcy5wb29sLm9uKCdlcnJvcicsIGVycm9yID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcikpO1xuICAgICAgICB0aGlzLm9wZW5lZCA9IHRydWU7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMucG9vbC5lbmRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvb2wuZW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZVNxbCh0ZXh0LCB2YWx1ZXMpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMub3BlbmVkLCAnRGF0YWJhc2Ugbm90IG9wZW5lZC4gQ2FsbCBvcGVuKCkgYmVmb3JlIGV4ZWN1dGluZyBTUUwuJyk7XG4gICAgICAgIC8vIGlmICh0aGlzLmNvbmZpZy5kZWJ1ZyA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX06IERFQlVHIFNRTGApXG4gICAgICAgIC8vICAgY29uc29sZS5sb2codGV4dClcbiAgICAgICAgLy8gICBpZiAodmFsdWVzKSB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhgJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9OiBERUJVRyBWQUxVRVNgKVxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2codmFsdWVzKVxuICAgICAgICAvLyAgIH1cbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wb29sLnF1ZXJ5KHRleHQsIHZhbHVlcyk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgRGI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/db.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PgBoss: () => (/* binding */ PgBoss),\n/* harmony export */   events: () => (/* binding */ events),\n/* harmony export */   getConstructionPlans: () => (/* binding */ getConstructionPlans),\n/* harmony export */   getMigrationPlans: () => (/* binding */ getMigrationPlans),\n/* harmony export */   getRollbackPlans: () => (/* binding */ getRollbackPlans),\n/* harmony export */   policies: () => (/* reexport safe */ _plans_js__WEBPACK_IMPORTED_MODULE_8__.QUEUE_POLICIES),\n/* harmony export */   states: () => (/* reexport safe */ _plans_js__WEBPACK_IMPORTED_MODULE_8__.JOB_STATES)\n/* harmony export */ });\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var _attorney_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./attorney.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/attorney.js\");\n/* harmony import */ var _contractor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contractor.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/contractor.js\");\n/* harmony import */ var _manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./manager.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/manager.js\");\n/* harmony import */ var _timekeeper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./timekeeper.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/timekeeper.js\");\n/* harmony import */ var _boss_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./boss.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/boss.js\");\n/* harmony import */ var _bam_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bam.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/bam.js\");\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tools.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./db.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/db.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst events = Object.freeze({\n    error: 'error',\n    warning: 'warning',\n    wip: 'wip',\n    stopped: 'stopped',\n    bam: 'bam'\n});\nfunction getConstructionPlans(schema) {\n    return _contractor_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].constructionPlans(schema);\n}\nfunction getMigrationPlans(schema, version) {\n    return _contractor_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].migrationPlans(schema, version);\n}\nfunction getRollbackPlans(schema, version) {\n    return _contractor_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].rollbackPlans(schema, version);\n}\nclass PgBoss extends node_events__WEBPACK_IMPORTED_MODULE_0__ {\n    #stoppingOn;\n    #stopped;\n    #starting;\n    #started;\n    #config;\n    #db;\n    #boss;\n    #contractor;\n    #manager;\n    #timekeeper;\n    #bam;\n    constructor(value) {\n        super();\n        this.#stoppingOn = null;\n        this.#stopped = true;\n        const config = _attorney_js__WEBPACK_IMPORTED_MODULE_1__.getConfig(value);\n        this.#config = config;\n        const db = this.getDb();\n        this.#db = db;\n        if ('_pgbdb' in this.#db && this.#db._pgbdb) {\n            this.#promoteEvents(this.#db);\n        }\n        const contractor = new _contractor_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](db, config);\n        const manager = new _manager_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](db, config);\n        const boss = new _boss_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](db, manager, config);\n        const timekeeper = new _timekeeper_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](db, manager, config);\n        manager.timekeeper = timekeeper;\n        const bam = new _bam_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"](db, config);\n        this.#promoteEvents(manager);\n        this.#promoteEvents(boss);\n        this.#promoteEvents(timekeeper);\n        this.#promoteEvents(bam);\n        this.#boss = boss;\n        this.#contractor = contractor;\n        this.#manager = manager;\n        this.#timekeeper = timekeeper;\n        this.#bam = bam;\n    }\n    #promoteEvents(emitter) {\n        for (const event of Object.values(emitter?.events)) {\n            emitter.on(event, arg => this.emit(event, arg));\n        }\n    }\n    async start() {\n        if (this.#starting || this.#started) {\n            return this;\n        }\n        this.#starting = true;\n        if (this.#db._pgbdb && !this.#db.opened) {\n            await this.#db.open();\n        }\n        if (this.#config.migrate) {\n            await this.#contractor.start();\n        }\n        else {\n            await this.#contractor.check();\n        }\n        await this.#manager.start();\n        if (this.#config.supervise) {\n            await this.#boss.start();\n        }\n        if (this.#config.schedule) {\n            await this.#timekeeper.start();\n        }\n        if (this.#config.migrate) {\n            await this.#bam.start();\n        }\n        this.#starting = false;\n        this.#started = true;\n        this.#stopped = false;\n        return this;\n    }\n    async stop(options = {}) {\n        if (this.#stoppingOn || this.#stopped) {\n            return;\n        }\n        let { close = true, graceful = true, timeout = 30000 } = options;\n        timeout = Math.max(timeout, 1000);\n        this.#stoppingOn = Date.now();\n        await this.#manager.stop();\n        await this.#timekeeper.stop();\n        await this.#boss.stop();\n        await this.#bam.stop();\n        const shutdown = async () => {\n            await this.#manager.failWip();\n            if (this.#db._pgbdb && this.#db.opened && close) {\n                await this.#db.close();\n                // Give event loop time to process socket closes\n                await (0,_tools_js__WEBPACK_IMPORTED_MODULE_7__.delay)(10);\n            }\n            this.#stopped = true;\n            this.#stoppingOn = null;\n            this.#started = false;\n            this.emit(events.stopped);\n        };\n        if (!graceful) {\n            return await shutdown();\n        }\n        while ((Date.now() - this.#stoppingOn) < timeout && this.#manager.hasPendingCleanups()) {\n            await (0,_tools_js__WEBPACK_IMPORTED_MODULE_7__.delay)(500);\n        }\n        await shutdown();\n    }\n    async send(...args) {\n        return await this.#manager.send(...args);\n    }\n    async sendAfter(name, data, options, after) {\n        return this.#manager.sendAfter(name, data, options, after);\n    }\n    sendThrottled(name, data, options, seconds, key) {\n        return this.#manager.sendThrottled(name, data, options, seconds, key);\n    }\n    sendDebounced(name, data, options, seconds, key) {\n        return this.#manager.sendDebounced(name, data, options, seconds, key);\n    }\n    insert(name, jobs, options) {\n        return this.#manager.insert(name, jobs, options);\n    }\n    fetch(name, options = {}) {\n        return this.#manager.fetch(name, options);\n    }\n    work(...args) {\n        return this.#manager.work(...args);\n    }\n    offWork(name, options) {\n        return this.#manager.offWork(name, options);\n    }\n    notifyWorker(workerId) {\n        return this.#manager.notifyWorker(workerId);\n    }\n    subscribe(event, name) {\n        return this.#manager.subscribe(event, name);\n    }\n    unsubscribe(event, name) {\n        return this.#manager.unsubscribe(event, name);\n    }\n    publish(event, data, options) {\n        return this.#manager.publish(event, data, options);\n    }\n    cancel(name, id, options) {\n        return this.#manager.cancel(name, id, options);\n    }\n    resume(name, id, options) {\n        return this.#manager.resume(name, id, options);\n    }\n    retry(name, id, options) {\n        return this.#manager.retry(name, id, options);\n    }\n    deleteJob(name, id, options) {\n        return this.#manager.deleteJob(name, id, options);\n    }\n    deleteQueuedJobs(name) {\n        return this.#manager.deleteQueuedJobs(name);\n    }\n    deleteStoredJobs(name) {\n        return this.#manager.deleteStoredJobs(name);\n    }\n    deleteAllJobs(name) {\n        return this.#manager.deleteAllJobs(name);\n    }\n    complete(name, id, data, options) {\n        return this.#manager.complete(name, id, data, options);\n    }\n    fail(name, id, data, options) {\n        return this.#manager.fail(name, id, data, options);\n    }\n    /**\n     * @deprecated Use findJobs() instead\n     */\n    getJobById(name, id, options) {\n        return this.#manager.getJobById(name, id, options);\n    }\n    findJobs(name, options) {\n        return this.#manager.findJobs(name, options);\n    }\n    createQueue(name, options) {\n        return this.#manager.createQueue(name, options);\n    }\n    getBlockedKeys(name) {\n        return this.#manager.getBlockedKeys(name);\n    }\n    updateQueue(name, options) {\n        return this.#manager.updateQueue(name, options);\n    }\n    deleteQueue(name) {\n        return this.#manager.deleteQueue(name);\n    }\n    getQueues(names) {\n        return this.#manager.getQueues();\n    }\n    getQueue(name) {\n        return this.#manager.getQueue(name);\n    }\n    getQueueStats(name) {\n        return this.#manager.getQueueStats(name);\n    }\n    supervise(name) {\n        return this.#boss.supervise(name);\n    }\n    getSpy(name) {\n        return this.#manager.getSpy(name);\n    }\n    clearSpies() {\n        this.#manager.clearSpies();\n    }\n    isInstalled() {\n        return this.#contractor.isInstalled();\n    }\n    schemaVersion() {\n        return this.#contractor.schemaVersion();\n    }\n    schedule(name, cron, data, options) {\n        return this.#timekeeper.schedule(name, cron, data, options);\n    }\n    unschedule(name, key) {\n        return this.#timekeeper.unschedule(name, key);\n    }\n    getSchedules(name, key) {\n        return this.#timekeeper.getSchedules(name, key);\n    }\n    async getBamStatus() {\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_8__.getBamStatus(this.#config.schema);\n        const { rows } = await this.#db.executeSql(sql);\n        return rows;\n    }\n    async getBamEntries() {\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_8__.getBamEntries(this.#config.schema);\n        const { rows } = await this.#db.executeSql(sql);\n        return rows;\n    }\n    getDb() {\n        if (this.#db) {\n            return this.#db;\n        }\n        if (this.#config.db) {\n            return this.#config.db;\n        }\n        return new _db_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.#config);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFDRztBQUNEO0FBQ047QUFDTTtBQUNaO0FBQ0Y7QUFDUTtBQUNDO0FBQ0o7QUFDa0I7QUFDTTtBQUNqRDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLHNEQUFVO0FBQ3JCO0FBQ087QUFDUCxXQUFXLHNEQUFVO0FBQ3JCO0FBQ087QUFDUCxXQUFXLHNEQUFVO0FBQ3JCO0FBQ08scUJBQXFCLHdDQUFZO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtREFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHNEQUFVO0FBQ3pDLDRCQUE0QixtREFBTztBQUNuQyx5QkFBeUIsZ0RBQUk7QUFDN0IsK0JBQStCLHNEQUFVO0FBQ3pDO0FBQ0Esd0JBQXdCLCtDQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpREFBaUQ7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnREFBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnREFBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFrQjtBQUN0QyxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0RBQW1CO0FBQ3ZDLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4Q0FBUztBQUM1QjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVlcC1hcmNoaXRlY3R1cmUvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvaW5kZXguanM/MmExZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ25vZGU6ZXZlbnRzJztcbmltcG9ydCAqIGFzIEF0dG9ybmV5IGZyb20gXCIuL2F0dG9ybmV5LmpzXCI7XG5pbXBvcnQgQ29udHJhY3RvciBmcm9tIFwiLi9jb250cmFjdG9yLmpzXCI7XG5pbXBvcnQgTWFuYWdlciBmcm9tIFwiLi9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgVGltZWtlZXBlciBmcm9tIFwiLi90aW1la2VlcGVyLmpzXCI7XG5pbXBvcnQgQm9zcyBmcm9tIFwiLi9ib3NzLmpzXCI7XG5pbXBvcnQgQmFtIGZyb20gXCIuL2JhbS5qc1wiO1xuaW1wb3J0IHsgZGVsYXkgfSBmcm9tIFwiLi90b29scy5qc1wiO1xuaW1wb3J0ICogYXMgcGxhbnMgZnJvbSBcIi4vcGxhbnMuanNcIjtcbmltcG9ydCBEYkRlZmF1bHQgZnJvbSBcIi4vZGIuanNcIjtcbmV4cG9ydCB7IEpPQl9TVEFURVMgYXMgc3RhdGVzIH0gZnJvbSBcIi4vcGxhbnMuanNcIjtcbmV4cG9ydCB7IFFVRVVFX1BPTElDSUVTIGFzIHBvbGljaWVzIH0gZnJvbSBcIi4vcGxhbnMuanNcIjtcbmV4cG9ydCBjb25zdCBldmVudHMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBlcnJvcjogJ2Vycm9yJyxcbiAgICB3YXJuaW5nOiAnd2FybmluZycsXG4gICAgd2lwOiAnd2lwJyxcbiAgICBzdG9wcGVkOiAnc3RvcHBlZCcsXG4gICAgYmFtOiAnYmFtJ1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc3RydWN0aW9uUGxhbnMoc2NoZW1hKSB7XG4gICAgcmV0dXJuIENvbnRyYWN0b3IuY29uc3RydWN0aW9uUGxhbnMoc2NoZW1hKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaWdyYXRpb25QbGFucyhzY2hlbWEsIHZlcnNpb24pIHtcbiAgICByZXR1cm4gQ29udHJhY3Rvci5taWdyYXRpb25QbGFucyhzY2hlbWEsIHZlcnNpb24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvbGxiYWNrUGxhbnMoc2NoZW1hLCB2ZXJzaW9uKSB7XG4gICAgcmV0dXJuIENvbnRyYWN0b3Iucm9sbGJhY2tQbGFucyhzY2hlbWEsIHZlcnNpb24pO1xufVxuZXhwb3J0IGNsYXNzIFBnQm9zcyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgI3N0b3BwaW5nT247XG4gICAgI3N0b3BwZWQ7XG4gICAgI3N0YXJ0aW5nO1xuICAgICNzdGFydGVkO1xuICAgICNjb25maWc7XG4gICAgI2RiO1xuICAgICNib3NzO1xuICAgICNjb250cmFjdG9yO1xuICAgICNtYW5hZ2VyO1xuICAgICN0aW1la2VlcGVyO1xuICAgICNiYW07XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jc3RvcHBpbmdPbiA9IG51bGw7XG4gICAgICAgIHRoaXMuI3N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBBdHRvcm5leS5nZXRDb25maWcodmFsdWUpO1xuICAgICAgICB0aGlzLiNjb25maWcgPSBjb25maWc7XG4gICAgICAgIGNvbnN0IGRiID0gdGhpcy5nZXREYigpO1xuICAgICAgICB0aGlzLiNkYiA9IGRiO1xuICAgICAgICBpZiAoJ19wZ2JkYicgaW4gdGhpcy4jZGIgJiYgdGhpcy4jZGIuX3BnYmRiKSB7XG4gICAgICAgICAgICB0aGlzLiNwcm9tb3RlRXZlbnRzKHRoaXMuI2RiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250cmFjdG9yID0gbmV3IENvbnRyYWN0b3IoZGIsIGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgTWFuYWdlcihkYiwgY29uZmlnKTtcbiAgICAgICAgY29uc3QgYm9zcyA9IG5ldyBCb3NzKGRiLCBtYW5hZ2VyLCBjb25maWcpO1xuICAgICAgICBjb25zdCB0aW1la2VlcGVyID0gbmV3IFRpbWVrZWVwZXIoZGIsIG1hbmFnZXIsIGNvbmZpZyk7XG4gICAgICAgIG1hbmFnZXIudGltZWtlZXBlciA9IHRpbWVrZWVwZXI7XG4gICAgICAgIGNvbnN0IGJhbSA9IG5ldyBCYW0oZGIsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuI3Byb21vdGVFdmVudHMobWFuYWdlcik7XG4gICAgICAgIHRoaXMuI3Byb21vdGVFdmVudHMoYm9zcyk7XG4gICAgICAgIHRoaXMuI3Byb21vdGVFdmVudHModGltZWtlZXBlcik7XG4gICAgICAgIHRoaXMuI3Byb21vdGVFdmVudHMoYmFtKTtcbiAgICAgICAgdGhpcy4jYm9zcyA9IGJvc3M7XG4gICAgICAgIHRoaXMuI2NvbnRyYWN0b3IgPSBjb250cmFjdG9yO1xuICAgICAgICB0aGlzLiNtYW5hZ2VyID0gbWFuYWdlcjtcbiAgICAgICAgdGhpcy4jdGltZWtlZXBlciA9IHRpbWVrZWVwZXI7XG4gICAgICAgIHRoaXMuI2JhbSA9IGJhbTtcbiAgICB9XG4gICAgI3Byb21vdGVFdmVudHMoZW1pdHRlcikge1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIE9iamVjdC52YWx1ZXMoZW1pdHRlcj8uZXZlbnRzKSkge1xuICAgICAgICAgICAgZW1pdHRlci5vbihldmVudCwgYXJnID0+IHRoaXMuZW1pdChldmVudCwgYXJnKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGFydGluZyB8fCB0aGlzLiNzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLiNkYi5fcGdiZGIgJiYgIXRoaXMuI2RiLm9wZW5lZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZGIub3BlbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNjb25maWcubWlncmF0ZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jY29udHJhY3Rvci5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jY29udHJhY3Rvci5jaGVjaygpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuI21hbmFnZXIuc3RhcnQoKTtcbiAgICAgICAgaWYgKHRoaXMuI2NvbmZpZy5zdXBlcnZpc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2Jvc3Muc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jY29uZmlnLnNjaGVkdWxlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiN0aW1la2VlcGVyLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI2NvbmZpZy5taWdyYXRlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNiYW0uc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLiNzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4jc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXN5bmMgc3RvcChvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0b3BwaW5nT24gfHwgdGhpcy4jc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7IGNsb3NlID0gdHJ1ZSwgZ3JhY2VmdWwgPSB0cnVlLCB0aW1lb3V0ID0gMzAwMDAgfSA9IG9wdGlvbnM7XG4gICAgICAgIHRpbWVvdXQgPSBNYXRoLm1heCh0aW1lb3V0LCAxMDAwKTtcbiAgICAgICAgdGhpcy4jc3RvcHBpbmdPbiA9IERhdGUubm93KCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI21hbmFnZXIuc3RvcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0aW1la2VlcGVyLnN0b3AoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jYm9zcy5zdG9wKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI2JhbS5zdG9wKCk7XG4gICAgICAgIGNvbnN0IHNodXRkb3duID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jbWFuYWdlci5mYWlsV2lwKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4jZGIuX3BnYmRiICYmIHRoaXMuI2RiLm9wZW5lZCAmJiBjbG9zZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2RiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgLy8gR2l2ZSBldmVudCBsb29wIHRpbWUgdG8gcHJvY2VzcyBzb2NrZXQgY2xvc2VzXG4gICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLiNzdG9wcGluZ09uID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChldmVudHMuc3RvcHBlZCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghZ3JhY2VmdWwpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzaHV0ZG93bigpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICgoRGF0ZS5ub3coKSAtIHRoaXMuI3N0b3BwaW5nT24pIDwgdGltZW91dCAmJiB0aGlzLiNtYW5hZ2VyLmhhc1BlbmRpbmdDbGVhbnVwcygpKSB7XG4gICAgICAgICAgICBhd2FpdCBkZWxheSg1MDApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHNodXRkb3duKCk7XG4gICAgfVxuICAgIGFzeW5jIHNlbmQoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy4jbWFuYWdlci5zZW5kKC4uLmFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyBzZW5kQWZ0ZXIobmFtZSwgZGF0YSwgb3B0aW9ucywgYWZ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuc2VuZEFmdGVyKG5hbWUsIGRhdGEsIG9wdGlvbnMsIGFmdGVyKTtcbiAgICB9XG4gICAgc2VuZFRocm90dGxlZChuYW1lLCBkYXRhLCBvcHRpb25zLCBzZWNvbmRzLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuc2VuZFRocm90dGxlZChuYW1lLCBkYXRhLCBvcHRpb25zLCBzZWNvbmRzLCBrZXkpO1xuICAgIH1cbiAgICBzZW5kRGVib3VuY2VkKG5hbWUsIGRhdGEsIG9wdGlvbnMsIHNlY29uZHMsIGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFuYWdlci5zZW5kRGVib3VuY2VkKG5hbWUsIGRhdGEsIG9wdGlvbnMsIHNlY29uZHMsIGtleSk7XG4gICAgfVxuICAgIGluc2VydChuYW1lLCBqb2JzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLmluc2VydChuYW1lLCBqb2JzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZmV0Y2gobmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLmZldGNoKG5hbWUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB3b3JrKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIud29yayguLi5hcmdzKTtcbiAgICB9XG4gICAgb2ZmV29yayhuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLm9mZldvcmsobmFtZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIG5vdGlmeVdvcmtlcih3b3JrZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFuYWdlci5ub3RpZnlXb3JrZXIod29ya2VySWQpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoZXZlbnQsIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuc3Vic2NyaWJlKGV2ZW50LCBuYW1lKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoZXZlbnQsIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIudW5zdWJzY3JpYmUoZXZlbnQsIG5hbWUpO1xuICAgIH1cbiAgICBwdWJsaXNoKGV2ZW50LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLnB1Ymxpc2goZXZlbnQsIGRhdGEsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYW5jZWwobmFtZSwgaWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuY2FuY2VsKG5hbWUsIGlkLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmVzdW1lKG5hbWUsIGlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLnJlc3VtZShuYW1lLCBpZCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHJ5KG5hbWUsIGlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLnJldHJ5KG5hbWUsIGlkLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZGVsZXRlSm9iKG5hbWUsIGlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLmRlbGV0ZUpvYihuYW1lLCBpZCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGRlbGV0ZVF1ZXVlZEpvYnMobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFuYWdlci5kZWxldGVRdWV1ZWRKb2JzKG5hbWUpO1xuICAgIH1cbiAgICBkZWxldGVTdG9yZWRKb2JzKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuZGVsZXRlU3RvcmVkSm9icyhuYW1lKTtcbiAgICB9XG4gICAgZGVsZXRlQWxsSm9icyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLmRlbGV0ZUFsbEpvYnMobmFtZSk7XG4gICAgfVxuICAgIGNvbXBsZXRlKG5hbWUsIGlkLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLmNvbXBsZXRlKG5hbWUsIGlkLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZmFpbChuYW1lLCBpZCwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFuYWdlci5mYWlsKG5hbWUsIGlkLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGZpbmRKb2JzKCkgaW5zdGVhZFxuICAgICAqL1xuICAgIGdldEpvYkJ5SWQobmFtZSwgaWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuZ2V0Sm9iQnlJZChuYW1lLCBpZCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGZpbmRKb2JzKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuZmluZEpvYnMobmFtZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGNyZWF0ZVF1ZXVlKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuY3JlYXRlUXVldWUobmFtZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdldEJsb2NrZWRLZXlzKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuZ2V0QmxvY2tlZEtleXMobmFtZSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXVlKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIudXBkYXRlUXVldWUobmFtZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGRlbGV0ZVF1ZXVlKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuZGVsZXRlUXVldWUobmFtZSk7XG4gICAgfVxuICAgIGdldFF1ZXVlcyhuYW1lcykge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFuYWdlci5nZXRRdWV1ZXMoKTtcbiAgICB9XG4gICAgZ2V0UXVldWUobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFuYWdlci5nZXRRdWV1ZShuYW1lKTtcbiAgICB9XG4gICAgZ2V0UXVldWVTdGF0cyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYW5hZ2VyLmdldFF1ZXVlU3RhdHMobmFtZSk7XG4gICAgfVxuICAgIHN1cGVydmlzZShuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNib3NzLnN1cGVydmlzZShuYW1lKTtcbiAgICB9XG4gICAgZ2V0U3B5KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21hbmFnZXIuZ2V0U3B5KG5hbWUpO1xuICAgIH1cbiAgICBjbGVhclNwaWVzKCkge1xuICAgICAgICB0aGlzLiNtYW5hZ2VyLmNsZWFyU3BpZXMoKTtcbiAgICB9XG4gICAgaXNJbnN0YWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250cmFjdG9yLmlzSW5zdGFsbGVkKCk7XG4gICAgfVxuICAgIHNjaGVtYVZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250cmFjdG9yLnNjaGVtYVZlcnNpb24oKTtcbiAgICB9XG4gICAgc2NoZWR1bGUobmFtZSwgY3JvbiwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy4jdGltZWtlZXBlci5zY2hlZHVsZShuYW1lLCBjcm9uLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgdW5zY2hlZHVsZShuYW1lLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RpbWVrZWVwZXIudW5zY2hlZHVsZShuYW1lLCBrZXkpO1xuICAgIH1cbiAgICBnZXRTY2hlZHVsZXMobmFtZSwga2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0aW1la2VlcGVyLmdldFNjaGVkdWxlcyhuYW1lLCBrZXkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRCYW1TdGF0dXMoKSB7XG4gICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmdldEJhbVN0YXR1cyh0aGlzLiNjb25maWcuc2NoZW1hKTtcbiAgICAgICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCB0aGlzLiNkYi5leGVjdXRlU3FsKHNxbCk7XG4gICAgICAgIHJldHVybiByb3dzO1xuICAgIH1cbiAgICBhc3luYyBnZXRCYW1FbnRyaWVzKCkge1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5nZXRCYW1FbnRyaWVzKHRoaXMuI2NvbmZpZy5zY2hlbWEpO1xuICAgICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHRoaXMuI2RiLmV4ZWN1dGVTcWwoc3FsKTtcbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuICAgIGdldERiKCkge1xuICAgICAgICBpZiAodGhpcy4jZGIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiNkYjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jY29uZmlnLmRiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4jY29uZmlnLmRiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGJEZWZhdWx0KHRoaXMuI2NvbmZpZyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/manager.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/manager.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:assert */ \"node:assert\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var serialize_error__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! serialize-error */ \"(rsc)/./node_modules/.pnpm/serialize-error@13.0.1/node_modules/serialize-error/index.js\");\n/* harmony import */ var _attorney_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./attorney.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/attorney.js\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _timekeeper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./timekeeper.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/timekeeper.js\");\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tools.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js\");\n/* harmony import */ var _worker_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./worker.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/worker.js\");\n/* harmony import */ var _spy_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./spy.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/spy.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst INTERNAL_QUEUES = Object.values(_timekeeper_js__WEBPACK_IMPORTED_MODULE_5__.QUEUES).reduce((acc, i) => ({ ...acc, [i]: i }), {});\nconst events = {\n    error: 'error',\n    wip: 'wip'\n};\nclass Manager extends node_events__WEBPACK_IMPORTED_MODULE_2__ {\n    events = events;\n    db;\n    config;\n    wipTs;\n    workers;\n    stopped;\n    queueCacheInterval;\n    timekeeper;\n    queues;\n    pendingOffWorkCleanups;\n    #spies;\n    #localGroupActive;\n    #localGroupConfig;\n    constructor(db, config) {\n        super();\n        this.config = config;\n        this.db = db;\n        this.wipTs = Date.now();\n        this.workers = new Map();\n        this.queues = null;\n        this.pendingOffWorkCleanups = new Set();\n        this.#spies = new Map();\n        this.#localGroupActive = new Map();\n        this.#localGroupConfig = new Map();\n    }\n    getSpy(name) {\n        if (!this.config.__test__enableSpies) {\n            throw new Error('Spy is not enabled. Set __test__enableSpies: true in constructor options to use spies.');\n        }\n        let spy = this.#spies.get(name);\n        if (!spy) {\n            spy = new _spy_js__WEBPACK_IMPORTED_MODULE_9__.JobSpy();\n            this.#spies.set(name, spy);\n        }\n        return spy;\n    }\n    clearSpies() {\n        for (const spy of this.#spies.values()) {\n            spy.clear();\n        }\n        this.#spies.clear();\n    }\n    #getLocalGroupLimit(queueName, groupTier) {\n        const config = this.#localGroupConfig.get(queueName);\n        if (!config)\n            return Infinity;\n        if (groupTier && config.tiers && groupTier in config.tiers) {\n            return config.tiers[groupTier];\n        }\n        return config.default;\n    }\n    #getGroupsAtLocalCapacity(queueName) {\n        const config = this.#localGroupConfig.get(queueName);\n        if (!config)\n            return [];\n        const queueGroups = this.#localGroupActive.get(queueName);\n        if (!queueGroups)\n            return [];\n        const atCapacity = [];\n        for (const [groupId, activeCount] of queueGroups.entries()) {\n            // We don't have tier info here, so use default limit\n            // Jobs with tiers will be checked individually after fetch\n            const limit = config.default;\n            if (activeCount >= limit) {\n                atCapacity.push(groupId);\n            }\n        }\n        return atCapacity;\n    }\n    #incrementLocalGroupCount(queueName, groupId) {\n        let queueGroups = this.#localGroupActive.get(queueName);\n        if (!queueGroups) {\n            queueGroups = new Map();\n            this.#localGroupActive.set(queueName, queueGroups);\n        }\n        const current = queueGroups.get(groupId) || 0;\n        queueGroups.set(groupId, current + 1);\n    }\n    #decrementLocalGroupCount(queueName, groupId) {\n        const queueGroups = this.#localGroupActive.get(queueName);\n        if (!queueGroups)\n            return;\n        const current = queueGroups.get(groupId) || 0;\n        if (current <= 1) {\n            queueGroups.delete(groupId);\n        }\n        else {\n            queueGroups.set(groupId, current - 1);\n        }\n    }\n    #trackJobsActive(name, jobs) {\n        const spy = this.config.__test__enableSpies ? this.#spies.get(name) : undefined;\n        if (spy) {\n            for (const job of jobs) {\n                spy.addJob(job.id, name, job.data, 'active');\n            }\n        }\n    }\n    #trackJobsCompleted(name, jobs, result) {\n        const spy = this.config.__test__enableSpies ? this.#spies.get(name) : undefined;\n        if (spy) {\n            const output = jobs.length === 1 ? result : undefined;\n            for (const job of jobs) {\n                spy.addJob(job.id, name, job.data, 'completed', output);\n            }\n        }\n    }\n    #trackJobsFailed(name, jobs, err) {\n        const spy = this.config.__test__enableSpies ? this.#spies.get(name) : undefined;\n        if (spy) {\n            for (const job of jobs) {\n                spy.addJob(job.id, name, job.data, 'failed', { message: err?.message, stack: err?.stack });\n            }\n        }\n    }\n    #storeLocalGroupConfig(name, localGroupConcurrency) {\n        const config = typeof localGroupConcurrency === 'number'\n            ? { default: localGroupConcurrency }\n            : localGroupConcurrency;\n        this.#localGroupConfig.set(name, config);\n    }\n    #cleanupLocalGroupTracking(name) {\n        // Only cleanup if no more workers exist for this queue\n        const hasWorkersForQueue = this.getWorkers().some(w => w.name === name && !w.stopping && !w.stopped);\n        if (!hasWorkersForQueue) {\n            this.#localGroupConfig.delete(name);\n            this.#localGroupActive.delete(name);\n        }\n    }\n    #trackLocalGroupStart(name, jobs) {\n        const allowed = [];\n        const excess = [];\n        const groupedJobs = [];\n        for (const job of jobs) {\n            if (!job.groupId) {\n                // Jobs without group bypass local group limits\n                allowed.push(job);\n                continue;\n            }\n            const currentCount = this.#localGroupActive.get(name)?.get(job.groupId) || 0;\n            const limit = this.#getLocalGroupLimit(name, job.groupTier);\n            if (currentCount < limit) {\n                this.#incrementLocalGroupCount(name, job.groupId);\n                allowed.push(job);\n                groupedJobs.push(job);\n            }\n            else {\n                excess.push(job);\n            }\n        }\n        return { allowed, excess, groupedJobs };\n    }\n    #trackLocalGroupEnd(name, groupedJobs) {\n        for (const job of groupedJobs) {\n            if (job.groupId) {\n                this.#decrementLocalGroupCount(name, job.groupId);\n            }\n        }\n    }\n    async #processJobs(name, jobs, callback, worker) {\n        const jobIds = jobs.map(job => job.id);\n        const maxExpiration = jobs.reduce((acc, i) => Math.max(acc, i.expireInSeconds), 0);\n        const ac = new AbortController();\n        jobs.forEach(job => { job.signal = ac.signal; });\n        // Store AbortController on worker so it can be aborted after graceful shutdown\n        if (worker) {\n            worker.abortController = ac;\n        }\n        try {\n            const result = await (0,_tools_js__WEBPACK_IMPORTED_MODULE_6__.resolveWithinSeconds)(callback(jobs), maxExpiration, `handler execution exceeded ${maxExpiration}s`, ac);\n            await this.complete(name, jobIds, jobIds.length === 1 ? result : undefined);\n            this.#trackJobsCompleted(name, jobs, result);\n        }\n        catch (err) {\n            await this.fail(name, jobIds, err);\n            this.#trackJobsFailed(name, jobs, err);\n        }\n        finally {\n            if (worker) {\n                // Clear between jobs\n                worker.abortController = null;\n            }\n        }\n    }\n    async start() {\n        this.stopped = false;\n        this.queueCacheInterval = setInterval(() => this.onCacheQueues({ emit: true }), this.config.queueCacheIntervalSeconds * 1000);\n        await this.onCacheQueues();\n    }\n    async onCacheQueues({ emit = false } = {}) {\n        try {\n            node_assert__WEBPACK_IMPORTED_MODULE_0__(!this.config.__test__throw_queueCache, 'test error');\n            const queues = await this.getQueues();\n            this.queues = queues.reduce((acc, i) => { acc[i.name] = i; return acc; }, {});\n        }\n        catch (error) {\n            emit && this.emit(events.error, { ...error, message: error.message, stack: error.stack });\n        }\n    }\n    async getQueueCache(name) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(this.queues, 'Queue cache is not initialized');\n        let queue = this.queues[name];\n        if (queue) {\n            return queue;\n        }\n        queue = await this.getQueue(name);\n        if (!queue) {\n            throw new Error(`Queue ${name} does not exist`);\n        }\n        this.queues[name] = queue;\n        return queue;\n    }\n    async stop() {\n        this.stopped = true;\n        clearInterval(this.queueCacheInterval);\n        await Promise.allSettled([...this.workers.values()]\n            .filter(worker => !INTERNAL_QUEUES[worker.name])\n            .map(async (worker) => await this.offWork(worker.name, { wait: false })));\n        // Clean up all local group tracking on full stop\n        this.#localGroupConfig.clear();\n        this.#localGroupActive.clear();\n    }\n    async failWip() {\n        for (const worker of this.workers.values()) {\n            const jobIds = worker.jobs.map(j => j.id);\n            if (jobIds.length) {\n                await this.fail(worker.name, jobIds, 'pg-boss shut down while active');\n            }\n            worker.abort();\n        }\n    }\n    async work(name, ...args) {\n        const { options, callback } = _attorney_js__WEBPACK_IMPORTED_MODULE_3__.checkWorkArgs(name, args);\n        if (this.stopped) {\n            throw new Error('Workers are disabled. pg-boss is stopped');\n        }\n        const { pollingInterval: interval, batchSize = 1, includeMetadata = false, priority = true, localConcurrency = 1, localGroupConcurrency, groupConcurrency, orderByCreatedOn = true } = options;\n        if (localGroupConcurrency != null) {\n            this.#storeLocalGroupConfig(name, localGroupConcurrency);\n        }\n        const firstWorkerId = (0,node_crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)({ disableEntropyCache: true });\n        const createWorker = (workerId) => {\n            const fetch = () => {\n                const ignoreGroups = localGroupConcurrency != null\n                    ? this.#getGroupsAtLocalCapacity(name)\n                    : undefined;\n                return this.fetch(name, { batchSize, includeMetadata, priority, orderByCreatedOn, groupConcurrency, ignoreGroups });\n            };\n            const onFetch = async (jobs) => {\n                if (!jobs.length)\n                    return;\n                if (this.config.__test__throw_worker)\n                    throw new Error('__test__throw_worker');\n                this.emitWip(name);\n                this.#trackJobsActive(name, jobs);\n                // Get the worker instance for abort controller tracking\n                const worker = this.workers.get(workerId);\n                // Skip all in-memory group tracking when localGroupConcurrency is not enabled\n                if (localGroupConcurrency == null) {\n                    await this.#processJobs(name, jobs, callback, worker);\n                }\n                else {\n                    const { allowed, excess, groupedJobs } = this.#trackLocalGroupStart(name, jobs);\n                    if (excess.length > 0) {\n                        const excessIds = excess.map(job => job.id);\n                        await this.restore(name, excessIds);\n                    }\n                    if (allowed.length > 0) {\n                        try {\n                            await this.#processJobs(name, allowed, callback, worker);\n                        }\n                        finally {\n                            this.#trackLocalGroupEnd(name, groupedJobs);\n                        }\n                    }\n                }\n                this.emitWip(name);\n            };\n            const onError = (error) => {\n                this.emit(events.error, { ...error, message: error.message, stack: error.stack, queue: name, worker: workerId });\n            };\n            return new _worker_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({ id: workerId, name, options, interval, fetch, onFetch, onError });\n        };\n        // Spawn workers based on localConcurrency setting\n        for (let i = 0; i < localConcurrency; i++) {\n            const workerId = i === 0 ? firstWorkerId : (0,node_crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)({ disableEntropyCache: true });\n            const worker = createWorker(workerId);\n            this.addWorker(worker);\n            worker.start();\n        }\n        return firstWorkerId;\n    }\n    addWorker(worker) {\n        this.workers.set(worker.id, worker);\n    }\n    removeWorker(worker) {\n        this.workers.delete(worker.id);\n    }\n    getWorkers() {\n        return Array.from(this.workers.values());\n    }\n    emitWip(name) {\n        if (!INTERNAL_QUEUES[name]) {\n            const now = Date.now();\n            if (now - this.wipTs > 2000) {\n                this.emit(events.wip, this.getWipData());\n                this.wipTs = now;\n            }\n        }\n    }\n    getWipData(options = {}) {\n        const { includeInternal = false } = options;\n        const data = this.getWorkers()\n            .map(i => i.toWipData())\n            .filter(i => i.state !== 'stopped' && (!INTERNAL_QUEUES[i.name] || includeInternal));\n        return data;\n    }\n    hasPendingCleanups() {\n        return this.pendingOffWorkCleanups.size > 0;\n    }\n    async offWork(name, options = { wait: true }) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'queue name is required');\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(typeof name === 'string', 'queue name must be a string');\n        const query = (i) => options?.id ? i.id === options.id : i.name === name;\n        const workers = this.getWorkers().filter(i => query(i) && !i.stopping && !i.stopped);\n        if (workers.length === 0) {\n            return;\n        }\n        const cleanupPromise = Promise.allSettled(workers.map(async (worker) => {\n            await worker.stop();\n            this.removeWorker(worker);\n        }));\n        if (options.wait) {\n            await cleanupPromise;\n            this.#cleanupLocalGroupTracking(name);\n        }\n        else {\n            this.pendingOffWorkCleanups.add(cleanupPromise);\n            cleanupPromise.finally(() => {\n                this.pendingOffWorkCleanups.delete(cleanupPromise);\n                this.#cleanupLocalGroupTracking(name);\n            });\n        }\n    }\n    notifyWorker(workerId) {\n        this.workers.get(workerId)?.notify();\n    }\n    async subscribe(event, name) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(event, 'Missing required argument');\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'Missing required argument');\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.subscribe(this.config.schema);\n        await this.db.executeSql(sql, [event, name]);\n    }\n    async unsubscribe(event, name) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(event, 'Missing required argument');\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(name, 'Missing required argument');\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.unsubscribe(this.config.schema);\n        await this.db.executeSql(sql, [event, name]);\n    }\n    async publish(event, data, options) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(event, 'Missing required argument');\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.getQueuesForEvent(this.config.schema);\n        const { rows } = await this.db.executeSql(sql, [event]);\n        await Promise.allSettled(rows.map(({ name }) => this.send(name, data, options)));\n    }\n    async send(...args) {\n        const result = _attorney_js__WEBPACK_IMPORTED_MODULE_3__.checkSendArgs(args);\n        return await this.createJob(result);\n    }\n    async sendAfter(name, data, options, after) {\n        options = options ? { ...options } : {};\n        options.startAfter = after;\n        const result = _attorney_js__WEBPACK_IMPORTED_MODULE_3__.checkSendArgs([name, data, options]);\n        return await this.createJob(result);\n    }\n    async sendThrottled(name, data, options, seconds, key) {\n        options = options ? { ...options } : {};\n        options.singletonSeconds = seconds;\n        options.singletonNextSlot = false;\n        options.singletonKey = key;\n        const result = _attorney_js__WEBPACK_IMPORTED_MODULE_3__.checkSendArgs([name, data, options]);\n        return await this.createJob(result);\n    }\n    async sendDebounced(name, data, options, seconds, key) {\n        options = options ? { ...options } : {};\n        options.singletonSeconds = seconds;\n        options.singletonNextSlot = true;\n        options.singletonKey = key;\n        const result = _attorney_js__WEBPACK_IMPORTED_MODULE_3__.checkSendArgs([name, data, options]);\n        return await this.createJob(result);\n    }\n    async createJob(request) {\n        const { name, data = null, options = {} } = request;\n        const { id = null, db: wrapper, priority, startAfter, singletonKey = null, singletonSeconds, singletonNextSlot, expireInSeconds, deleteAfterSeconds, retentionSeconds, keepUntil, retryLimit, retryDelay, retryBackoff, retryDelayMax, group, deadLetter = null } = options;\n        const job = {\n            id,\n            name,\n            data,\n            priority,\n            startAfter,\n            singletonKey,\n            singletonSeconds,\n            singletonOffset: 0,\n            groupId: group?.id ?? null,\n            groupTier: group?.tier ?? null,\n            expireInSeconds,\n            deleteAfterSeconds,\n            retentionSeconds,\n            keepUntil,\n            retryLimit,\n            retryDelay,\n            retryBackoff,\n            retryDelayMax,\n            deadLetter\n        };\n        const db = wrapper || this.db;\n        const { table, policy } = await this.getQueueCache(name);\n        if (policy === _plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.key_strict_fifo && !singletonKey) {\n            throw new Error(`${_plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.key_strict_fifo} queues require a singletonKey`);\n        }\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.insertJobs(this.config.schema, { table, name, returnId: true });\n        const { rows: try1 } = await db.executeSql(sql, [JSON.stringify([job])]);\n        if (try1.length === 1) {\n            const jobId = try1[0].id;\n            if (this.config.__test__enableSpies) {\n                const spy = this.#spies.get(name);\n                if (spy) {\n                    spy.addJob(jobId, name, data || {}, 'created');\n                }\n            }\n            return jobId;\n        }\n        if (singletonNextSlot) {\n            // delay starting by the offset to honor throttling config\n            job.startAfter = this.getDebounceStartAfter(singletonSeconds, this.timekeeper.clockSkew);\n            job.singletonOffset = singletonSeconds;\n            const { rows: try2 } = await db.executeSql(sql, [JSON.stringify([job])]);\n            if (try2.length === 1) {\n                const jobId = try2[0].id;\n                if (this.config.__test__enableSpies) {\n                    const spy = this.#spies.get(name);\n                    if (spy) {\n                        spy.addJob(jobId, name, data || {}, 'created');\n                    }\n                }\n                return jobId;\n            }\n        }\n        return null;\n    }\n    async insert(name, jobs, options = {}) {\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(Array.isArray(jobs), 'jobs argument should be an array');\n        const { table, policy } = await this.getQueueCache(name);\n        if (policy === _plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.key_strict_fifo) {\n            for (const job of jobs) {\n                if (!job.singletonKey) {\n                    throw new Error(`${_plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.key_strict_fifo} queues require a singletonKey`);\n                }\n            }\n        }\n        const db = this.assertDb(options);\n        const spy = this.config.__test__enableSpies ? this.#spies.get(name) : undefined;\n        // Return IDs if spy is active for this queue (needed for job tracking)\n        const returnId = !!spy || !!options.returnId;\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.insertJobs(this.config.schema, { table, name, returnId });\n        const { rows } = await db.executeSql(sql, [JSON.stringify(jobs)]);\n        if (rows.length) {\n            if (spy) {\n                for (let i = 0; i < rows.length; i++) {\n                    spy.addJob(rows[i].id, name, jobs[i].data || {}, 'created');\n                }\n            }\n            return rows.map((i) => i.id);\n        }\n        return null;\n    }\n    getDebounceStartAfter(singletonSeconds, clockOffset) {\n        const debounceInterval = singletonSeconds * 1000;\n        const now = Date.now() + clockOffset;\n        const slot = Math.floor(now / debounceInterval) * debounceInterval;\n        // prevent startAfter=0 during debouncing\n        let startAfter = (singletonSeconds - Math.floor((now - slot) / 1000)) || 1;\n        if (singletonSeconds > 1) {\n            startAfter++;\n        }\n        return startAfter;\n    }\n    async fetch(name, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.checkFetchArgs(name, options);\n        const db = this.assertDb(options);\n        const { table, policy, singletonsActive } = await this.getQueueCache(name);\n        const fetchOptions = {\n            ...options,\n            schema: this.config.schema,\n            table,\n            name,\n            policy,\n            limit: options.batchSize || 1,\n            ignoreSingletons: singletonsActive\n        };\n        const query = _plans_js__WEBPACK_IMPORTED_MODULE_4__.fetchNextJob(fetchOptions);\n        let result;\n        try {\n            result = await db.executeSql(query.text, query.values);\n        }\n        catch (err) {\n            // errors from fetchquery should only be unique constraint violations\n        }\n        return result?.rows || [];\n    }\n    mapCompletionIdArg(id, funcName) {\n        const errorMessage = `${funcName}() requires an id`;\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(id, errorMessage);\n        const ids = Array.isArray(id) ? id : [id];\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(ids.length, errorMessage);\n        return ids;\n    }\n    mapCompletionDataArg(data) {\n        if (data === null || typeof data === 'undefined' || typeof data === 'function') {\n            return null;\n        }\n        const result = (typeof data === 'object' && !Array.isArray(data))\n            ? data\n            : { value: data };\n        return (0,serialize_error__WEBPACK_IMPORTED_MODULE_10__.serializeError)(result);\n    }\n    mapCommandResponse(ids, result) {\n        return {\n            jobs: ids,\n            requested: ids.length,\n            affected: result && result.rows ? parseInt(result.rows[0].count) : 0\n        };\n    }\n    async complete(name, id, data, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const ids = this.mapCompletionIdArg(id, 'complete');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.completeJobs(this.config.schema, table, options.includeQueued);\n        const result = await db.executeSql(sql, [name, ids, this.mapCompletionDataArg(data)]);\n        return this.mapCommandResponse(ids, result);\n    }\n    async fail(name, id, data, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const ids = this.mapCompletionIdArg(id, 'fail');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.failJobsById(this.config.schema, table);\n        const result = await db.executeSql(sql, [name, ids, this.mapCompletionDataArg(data)]);\n        return this.mapCommandResponse(ids, result);\n    }\n    async deleteJob(name, id, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const ids = this.mapCompletionIdArg(id, 'deleteJob');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.deleteJobsById(this.config.schema, table);\n        const result = await db.executeSql(sql, [name, ids]);\n        return this.mapCommandResponse(ids, result);\n    }\n    async cancel(name, id, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const ids = this.mapCompletionIdArg(id, 'cancel');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.cancelJobs(this.config.schema, table);\n        const result = await db.executeSql(sql, [name, ids]);\n        return this.mapCommandResponse(ids, result);\n    }\n    async resume(name, id, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const ids = this.mapCompletionIdArg(id, 'resume');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.resumeJobs(this.config.schema, table);\n        const result = await db.executeSql(sql, [name, ids]);\n        return this.mapCommandResponse(ids, result);\n    }\n    async restore(name, id, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const ids = this.mapCompletionIdArg(id, 'restore');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.restoreJobs(this.config.schema, table);\n        await db.executeSql(sql, [name, ids]);\n    }\n    async retry(name, id, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = options.db || this.db;\n        const ids = this.mapCompletionIdArg(id, 'retry');\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.retryJobs(this.config.schema, table);\n        const result = await db.executeSql(sql, [name, ids]);\n        return this.mapCommandResponse(ids, result);\n    }\n    async createQueue(name, options = {}) {\n        name = name || options.name;\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const policy = options.policy || _plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.standard;\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(policy in _plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES, `${policy} is not a valid queue policy`);\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.validateQueueArgs(options);\n        if (options.deadLetter) {\n            _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(options.deadLetter);\n            (0,node_assert__WEBPACK_IMPORTED_MODULE_0__.notStrictEqual)(name, options.deadLetter, 'deadLetter cannot be itself');\n            await this.getQueueCache(options.deadLetter);\n        }\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.createQueue(this.config.schema, name, { ...options, policy });\n        await this.db.executeSql(sql);\n    }\n    async getBlockedKeys(name) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const { table, policy } = await this.getQueueCache(name);\n        if (policy !== _plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.key_strict_fifo) {\n            throw new Error(`getBlockedKeys is only available for ${_plans_js__WEBPACK_IMPORTED_MODULE_4__.QUEUE_POLICIES.key_strict_fifo} queues`);\n        }\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.getBlockedKeys(this.config.schema, table);\n        const { rows } = await this.db.executeSql(sql, [name]);\n        return rows.map(row => row.singletonKey);\n    }\n    async getQueues(names) {\n        names = Array.isArray(names) ? names : typeof names === 'string' ? [names] : undefined;\n        if (names) {\n            for (const name of names) {\n                _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n            }\n        }\n        const query = _plans_js__WEBPACK_IMPORTED_MODULE_4__.getQueues(this.config.schema, names);\n        const { rows } = await this.db.executeSql(query.text, query.values);\n        return rows;\n    }\n    async updateQueue(name, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        node_assert__WEBPACK_IMPORTED_MODULE_0__(Object.keys(options).length > 0, 'no properties found to update');\n        if ('policy' in options) {\n            throw new Error('queue policy cannot be changed after creation');\n        }\n        if ('partition' in options) {\n            throw new Error('queue partitioning cannot be changed after creation');\n        }\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.validateQueueArgs(options);\n        const { deadLetter } = options;\n        if (deadLetter) {\n            _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(deadLetter);\n            (0,node_assert__WEBPACK_IMPORTED_MODULE_0__.notStrictEqual)(name, deadLetter, 'deadLetter cannot be itself');\n        }\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.updateQueue(this.config.schema, { deadLetter });\n        await this.db.executeSql(sql, [name, options]);\n    }\n    async getQueue(name) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const query = _plans_js__WEBPACK_IMPORTED_MODULE_4__.getQueues(this.config.schema, [name]);\n        const { rows } = await this.db.executeSql(query.text, query.values);\n        return rows[0] || null;\n    }\n    async deleteQueue(name) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        try {\n            await this.getQueueCache(name);\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.deleteQueue(this.config.schema, name);\n            await this.db.executeSql(sql);\n        }\n        catch { }\n    }\n    async deleteQueuedJobs(name) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.deleteQueuedJobs(this.config.schema, table);\n        await this.db.executeSql(sql, [name]);\n    }\n    async deleteStoredJobs(name) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.deleteStoredJobs(this.config.schema, table);\n        await this.db.executeSql(sql, [name]);\n    }\n    async deleteAllJobs(name) {\n        if (!name) {\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.truncateTable(this.config.schema, 'job');\n            await this.db.executeSql(sql);\n            return;\n        }\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const { table, partition } = await this.getQueueCache(name);\n        if (partition) {\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.truncateTable(this.config.schema, table);\n            await this.db.executeSql(sql);\n        }\n        else {\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.deleteAllJobs(this.config.schema, table);\n            await this.db.executeSql(sql, [name]);\n        }\n    }\n    async getQueueStats(name) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const queue = await this.getQueueCache(name);\n        const query = _plans_js__WEBPACK_IMPORTED_MODULE_4__.getQueueStats(this.config.schema, queue.table, [name]);\n        const { rows } = await this.db.executeSql(query.text, query.values);\n        return Object.assign(queue, rows.at(0) ||\n            {\n                deferredCount: 0,\n                queuedCount: 0,\n                activeCount: 0,\n                totalCount: 0\n            });\n    }\n    async getJobById(name, id, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const { table } = await this.getQueueCache(name);\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.getJobById(this.config.schema, table);\n        const result1 = await db.executeSql(sql, [name, id]);\n        if (result1?.rows?.length === 1) {\n            return result1.rows[0];\n        }\n        else {\n            return null;\n        }\n    }\n    async findJobs(name, options = {}) {\n        _attorney_js__WEBPACK_IMPORTED_MODULE_3__.assertQueueName(name);\n        const db = this.assertDb(options);\n        const { table } = await this.getQueueCache(name);\n        const { id, key, data, queued = false } = options;\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_4__.findJobs(this.config.schema, table, {\n            byId: id !== undefined,\n            byKey: key !== undefined,\n            byData: data !== undefined,\n            queued\n        });\n        const values = [name];\n        if (id !== undefined)\n            values.push(id);\n        if (key !== undefined)\n            values.push(key);\n        if (data !== undefined)\n            values.push(JSON.stringify(data));\n        const result = await db.executeSql(sql, values);\n        return result?.rows || [];\n    }\n    assertDb(options) {\n        if (options.db) {\n            return options.db;\n        }\n        if (this.db._pgbdb) {\n            node_assert__WEBPACK_IMPORTED_MODULE_0__(this.db.opened, 'Database connection is not opened');\n        }\n        return this.db;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Manager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDWjtBQUNGO0FBQ3VCO0FBQ3BCO0FBQ047QUFDVTtBQUNJO0FBQ2Q7QUFDSDtBQUNDO0FBQ2xDLHNDQUFzQyxrREFBaUIsd0JBQXdCLGdCQUFnQixLQUFLO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdDQUFZO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDJDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELDBDQUEwQztBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlCQUF5QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLCtEQUFvQiw4REFBOEQsY0FBYztBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxZQUFZO0FBQ3JGO0FBQ0E7QUFDQSwwQkFBMEIsZUFBZSxJQUFJO0FBQzdDO0FBQ0EsWUFBWSx3Q0FBTTtBQUNsQjtBQUNBLHNEQUFzRCxpQkFBaUIsYUFBYSxJQUFJO0FBQ3hGO0FBQ0E7QUFDQSw4Q0FBOEMsc0RBQXNEO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0NBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsTUFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQixFQUFFLHVEQUFzQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNktBQTZLO0FBQzdMO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix1REFBVSxHQUFHLDJCQUEyQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdGQUF3RjtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHFGQUFxRjtBQUMvSDtBQUNBLHVCQUF1QixrREFBTSxHQUFHLGdFQUFnRTtBQUNoRztBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5Qyx1REFBdUQsdURBQVUsR0FBRywyQkFBMkI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLGdCQUFnQiwwQkFBMEI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxZQUFZO0FBQ2hELFFBQVEsd0NBQU07QUFDZCxRQUFRLHdDQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3Q0FBTTtBQUNkLFFBQVEsd0NBQU07QUFDZCxvQkFBb0IsZ0RBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3Q0FBTTtBQUNkLFFBQVEsd0NBQU07QUFDZCxvQkFBb0Isa0RBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0NBQU07QUFDZCxvQkFBb0Isd0RBQXVCO0FBQzNDLGdCQUFnQixPQUFPO0FBQ3ZCLDZDQUE2QyxNQUFNO0FBQ25EO0FBQ0E7QUFDQSx1QkFBdUIsdURBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixhQUFhO0FBQzNDO0FBQ0EsdUJBQXVCLHVEQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsYUFBYTtBQUMzQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixhQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1REFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtDQUFrQztBQUNsRCxnQkFBZ0IsMFBBQTBQO0FBQzFRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQyx1QkFBdUIscURBQW9CO0FBQzNDLCtCQUErQixxREFBb0Isa0JBQWtCO0FBQ3JFO0FBQ0Esb0JBQW9CLGlEQUFnQix1QkFBdUIsNkJBQTZCO0FBQ3hGLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMsUUFBUSx3Q0FBTTtBQUNkLGdCQUFnQixnQkFBZ0I7QUFDaEMsdUJBQXVCLHFEQUFvQjtBQUMzQztBQUNBO0FBQ0EsdUNBQXVDLHFEQUFvQixrQkFBa0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaURBQWdCLHVCQUF1Qix1QkFBdUI7QUFDbEYsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsUUFBUSx3REFBdUI7QUFDL0I7QUFDQSxnQkFBZ0Isa0NBQWtDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtREFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUztBQUN6QyxRQUFRLHdDQUFNO0FBQ2Q7QUFDQSxRQUFRLHdDQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixlQUFlLGdFQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0MsUUFBUSx5REFBd0I7QUFDaEM7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLG9CQUFvQixtREFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDLFFBQVEseURBQXdCO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixvQkFBb0IsbURBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQyxRQUFRLHlEQUF3QjtBQUNoQztBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEIsb0JBQW9CLHFEQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsUUFBUSx5REFBd0I7QUFDaEM7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLG9CQUFvQixpREFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLFFBQVEseURBQXdCO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixvQkFBb0IsaURBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxRQUFRLHlEQUF3QjtBQUNoQztBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEIsb0JBQW9CLGtEQUFpQjtBQUNyQztBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLFFBQVEseURBQXdCO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixvQkFBb0IsZ0RBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsUUFBUSx5REFBd0I7QUFDaEMseUNBQXlDLHFEQUFvQjtBQUM3RCxRQUFRLHdDQUFNLFdBQVcscURBQW9CLEtBQUssUUFBUTtBQUMxRCxRQUFRLDJEQUEwQjtBQUNsQztBQUNBLFlBQVkseURBQXdCO0FBQ3BDLFlBQVksMkRBQWM7QUFDMUI7QUFDQTtBQUNBLG9CQUFvQixrREFBaUIsNkJBQTZCLG9CQUFvQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUF3QjtBQUNoQyxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLHVCQUF1QixxREFBb0I7QUFDM0Msb0VBQW9FLHFEQUFvQixrQkFBa0I7QUFDMUc7QUFDQSxvQkFBb0IscURBQW9CO0FBQ3hDLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5REFBd0I7QUFDeEM7QUFDQTtBQUNBLHNCQUFzQixnREFBZTtBQUNyQyxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLFFBQVEseURBQXdCO0FBQ2hDLFFBQVEsd0NBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJEQUEwQjtBQUNsQyxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBLFlBQVkseURBQXdCO0FBQ3BDLFlBQVksMkRBQWM7QUFDMUI7QUFDQSxvQkFBb0Isa0RBQWlCLHVCQUF1QixZQUFZO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQXdCO0FBQ2hDLHNCQUFzQixnREFBZTtBQUNyQyxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUF3QjtBQUNoQztBQUNBO0FBQ0Esd0JBQXdCLGtEQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBd0I7QUFDaEMsZ0JBQWdCLFFBQVE7QUFDeEIsb0JBQW9CLHVEQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUF3QjtBQUNoQyxnQkFBZ0IsUUFBUTtBQUN4QixvQkFBb0IsdURBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUF3QjtBQUNoQyxnQkFBZ0IsbUJBQW1CO0FBQ25DO0FBQ0Esd0JBQXdCLG9EQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0RBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBd0I7QUFDaEM7QUFDQSxzQkFBc0Isb0RBQW1CO0FBQ3pDLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDJDQUEyQztBQUMzQyxRQUFRLHlEQUF3QjtBQUNoQztBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLG9CQUFvQixpREFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxRQUFRLHlEQUF3QjtBQUNoQztBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixnQ0FBZ0M7QUFDaEQsb0JBQW9CLCtDQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0NBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWVwLWFyY2hpdGVjdHVyZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9wZy1ib3NzQDEyLjExLjEvbm9kZV9tb2R1bGVzL3BnLWJvc3MvZGlzdC9tYW5hZ2VyLmpzPzg0OGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzc2VydCwgeyBub3RTdHJpY3RFcXVhbCB9IGZyb20gJ25vZGU6YXNzZXJ0JztcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ25vZGU6ZXZlbnRzJztcbmltcG9ydCB7IHNlcmlhbGl6ZUVycm9yIGFzIHN0cmluZ2lmeSB9IGZyb20gJ3NlcmlhbGl6ZS1lcnJvcic7XG5pbXBvcnQgKiBhcyBBdHRvcm5leSBmcm9tIFwiLi9hdHRvcm5leS5qc1wiO1xuaW1wb3J0ICogYXMgcGxhbnMgZnJvbSBcIi4vcGxhbnMuanNcIjtcbmltcG9ydCAqIGFzIHRpbWVrZWVwZXIgZnJvbSBcIi4vdGltZWtlZXBlci5qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZVdpdGhpblNlY29uZHMgfSBmcm9tIFwiLi90b29scy5qc1wiO1xuaW1wb3J0ICogYXMgdHlwZXMgZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCBXb3JrZXIgZnJvbSBcIi4vd29ya2VyLmpzXCI7XG5pbXBvcnQgeyBKb2JTcHkgfSBmcm9tIFwiLi9zcHkuanNcIjtcbmNvbnN0IElOVEVSTkFMX1FVRVVFUyA9IE9iamVjdC52YWx1ZXModGltZWtlZXBlci5RVUVVRVMpLnJlZHVjZSgoYWNjLCBpKSA9PiAoeyAuLi5hY2MsIFtpXTogaSB9KSwge30pO1xuY29uc3QgZXZlbnRzID0ge1xuICAgIGVycm9yOiAnZXJyb3InLFxuICAgIHdpcDogJ3dpcCdcbn07XG5jbGFzcyBNYW5hZ2VyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICBldmVudHMgPSBldmVudHM7XG4gICAgZGI7XG4gICAgY29uZmlnO1xuICAgIHdpcFRzO1xuICAgIHdvcmtlcnM7XG4gICAgc3RvcHBlZDtcbiAgICBxdWV1ZUNhY2hlSW50ZXJ2YWw7XG4gICAgdGltZWtlZXBlcjtcbiAgICBxdWV1ZXM7XG4gICAgcGVuZGluZ09mZldvcmtDbGVhbnVwcztcbiAgICAjc3BpZXM7XG4gICAgI2xvY2FsR3JvdXBBY3RpdmU7XG4gICAgI2xvY2FsR3JvdXBDb25maWc7XG4gICAgY29uc3RydWN0b3IoZGIsIGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICB0aGlzLndpcFRzID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy53b3JrZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnF1ZXVlcyA9IG51bGw7XG4gICAgICAgIHRoaXMucGVuZGluZ09mZldvcmtDbGVhbnVwcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy4jc3BpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuI2xvY2FsR3JvdXBBY3RpdmUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuI2xvY2FsR3JvdXBDb25maWcgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldFNweShuYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5jb25maWcuX190ZXN0X19lbmFibGVTcGllcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTcHkgaXMgbm90IGVuYWJsZWQuIFNldCBfX3Rlc3RfX2VuYWJsZVNwaWVzOiB0cnVlIGluIGNvbnN0cnVjdG9yIG9wdGlvbnMgdG8gdXNlIHNwaWVzLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzcHkgPSB0aGlzLiNzcGllcy5nZXQobmFtZSk7XG4gICAgICAgIGlmICghc3B5KSB7XG4gICAgICAgICAgICBzcHkgPSBuZXcgSm9iU3B5KCk7XG4gICAgICAgICAgICB0aGlzLiNzcGllcy5zZXQobmFtZSwgc3B5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3B5O1xuICAgIH1cbiAgICBjbGVhclNwaWVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHNweSBvZiB0aGlzLiNzcGllcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgc3B5LmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3BpZXMuY2xlYXIoKTtcbiAgICB9XG4gICAgI2dldExvY2FsR3JvdXBMaW1pdChxdWV1ZU5hbWUsIGdyb3VwVGllcikge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLiNsb2NhbEdyb3VwQ29uZmlnLmdldChxdWV1ZU5hbWUpO1xuICAgICAgICBpZiAoIWNvbmZpZylcbiAgICAgICAgICAgIHJldHVybiBJbmZpbml0eTtcbiAgICAgICAgaWYgKGdyb3VwVGllciAmJiBjb25maWcudGllcnMgJiYgZ3JvdXBUaWVyIGluIGNvbmZpZy50aWVycykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy50aWVyc1tncm91cFRpZXJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25maWcuZGVmYXVsdDtcbiAgICB9XG4gICAgI2dldEdyb3Vwc0F0TG9jYWxDYXBhY2l0eShxdWV1ZU5hbWUpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy4jbG9jYWxHcm91cENvbmZpZy5nZXQocXVldWVOYW1lKTtcbiAgICAgICAgaWYgKCFjb25maWcpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IHF1ZXVlR3JvdXBzID0gdGhpcy4jbG9jYWxHcm91cEFjdGl2ZS5nZXQocXVldWVOYW1lKTtcbiAgICAgICAgaWYgKCFxdWV1ZUdyb3VwcylcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgY29uc3QgYXRDYXBhY2l0eSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtncm91cElkLCBhY3RpdmVDb3VudF0gb2YgcXVldWVHcm91cHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAvLyBXZSBkb24ndCBoYXZlIHRpZXIgaW5mbyBoZXJlLCBzbyB1c2UgZGVmYXVsdCBsaW1pdFxuICAgICAgICAgICAgLy8gSm9icyB3aXRoIHRpZXJzIHdpbGwgYmUgY2hlY2tlZCBpbmRpdmlkdWFsbHkgYWZ0ZXIgZmV0Y2hcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gY29uZmlnLmRlZmF1bHQ7XG4gICAgICAgICAgICBpZiAoYWN0aXZlQ291bnQgPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICBhdENhcGFjaXR5LnB1c2goZ3JvdXBJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF0Q2FwYWNpdHk7XG4gICAgfVxuICAgICNpbmNyZW1lbnRMb2NhbEdyb3VwQ291bnQocXVldWVOYW1lLCBncm91cElkKSB7XG4gICAgICAgIGxldCBxdWV1ZUdyb3VwcyA9IHRoaXMuI2xvY2FsR3JvdXBBY3RpdmUuZ2V0KHF1ZXVlTmFtZSk7XG4gICAgICAgIGlmICghcXVldWVHcm91cHMpIHtcbiAgICAgICAgICAgIHF1ZXVlR3JvdXBzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy4jbG9jYWxHcm91cEFjdGl2ZS5zZXQocXVldWVOYW1lLCBxdWV1ZUdyb3Vwcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudCA9IHF1ZXVlR3JvdXBzLmdldChncm91cElkKSB8fCAwO1xuICAgICAgICBxdWV1ZUdyb3Vwcy5zZXQoZ3JvdXBJZCwgY3VycmVudCArIDEpO1xuICAgIH1cbiAgICAjZGVjcmVtZW50TG9jYWxHcm91cENvdW50KHF1ZXVlTmFtZSwgZ3JvdXBJZCkge1xuICAgICAgICBjb25zdCBxdWV1ZUdyb3VwcyA9IHRoaXMuI2xvY2FsR3JvdXBBY3RpdmUuZ2V0KHF1ZXVlTmFtZSk7XG4gICAgICAgIGlmICghcXVldWVHcm91cHMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBxdWV1ZUdyb3Vwcy5nZXQoZ3JvdXBJZCkgfHwgMDtcbiAgICAgICAgaWYgKGN1cnJlbnQgPD0gMSkge1xuICAgICAgICAgICAgcXVldWVHcm91cHMuZGVsZXRlKGdyb3VwSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcXVldWVHcm91cHMuc2V0KGdyb3VwSWQsIGN1cnJlbnQgLSAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjdHJhY2tKb2JzQWN0aXZlKG5hbWUsIGpvYnMpIHtcbiAgICAgICAgY29uc3Qgc3B5ID0gdGhpcy5jb25maWcuX190ZXN0X19lbmFibGVTcGllcyA/IHRoaXMuI3NwaWVzLmdldChuYW1lKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNweSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBqb2Igb2Ygam9icykge1xuICAgICAgICAgICAgICAgIHNweS5hZGRKb2Ioam9iLmlkLCBuYW1lLCBqb2IuZGF0YSwgJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgICN0cmFja0pvYnNDb21wbGV0ZWQobmFtZSwgam9icywgcmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IHNweSA9IHRoaXMuY29uZmlnLl9fdGVzdF9fZW5hYmxlU3BpZXMgPyB0aGlzLiNzcGllcy5nZXQobmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzcHkpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGpvYnMubGVuZ3RoID09PSAxID8gcmVzdWx0IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgZm9yIChjb25zdCBqb2Igb2Ygam9icykge1xuICAgICAgICAgICAgICAgIHNweS5hZGRKb2Ioam9iLmlkLCBuYW1lLCBqb2IuZGF0YSwgJ2NvbXBsZXRlZCcsIG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3RyYWNrSm9ic0ZhaWxlZChuYW1lLCBqb2JzLCBlcnIpIHtcbiAgICAgICAgY29uc3Qgc3B5ID0gdGhpcy5jb25maWcuX190ZXN0X19lbmFibGVTcGllcyA/IHRoaXMuI3NwaWVzLmdldChuYW1lKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNweSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBqb2Igb2Ygam9icykge1xuICAgICAgICAgICAgICAgIHNweS5hZGRKb2Ioam9iLmlkLCBuYW1lLCBqb2IuZGF0YSwgJ2ZhaWxlZCcsIHsgbWVzc2FnZTogZXJyPy5tZXNzYWdlLCBzdGFjazogZXJyPy5zdGFjayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAjc3RvcmVMb2NhbEdyb3VwQ29uZmlnKG5hbWUsIGxvY2FsR3JvdXBDb25jdXJyZW5jeSkge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0eXBlb2YgbG9jYWxHcm91cENvbmN1cnJlbmN5ID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyB7IGRlZmF1bHQ6IGxvY2FsR3JvdXBDb25jdXJyZW5jeSB9XG4gICAgICAgICAgICA6IGxvY2FsR3JvdXBDb25jdXJyZW5jeTtcbiAgICAgICAgdGhpcy4jbG9jYWxHcm91cENvbmZpZy5zZXQobmFtZSwgY29uZmlnKTtcbiAgICB9XG4gICAgI2NsZWFudXBMb2NhbEdyb3VwVHJhY2tpbmcobmFtZSkge1xuICAgICAgICAvLyBPbmx5IGNsZWFudXAgaWYgbm8gbW9yZSB3b3JrZXJzIGV4aXN0IGZvciB0aGlzIHF1ZXVlXG4gICAgICAgIGNvbnN0IGhhc1dvcmtlcnNGb3JRdWV1ZSA9IHRoaXMuZ2V0V29ya2VycygpLnNvbWUodyA9PiB3Lm5hbWUgPT09IG5hbWUgJiYgIXcuc3RvcHBpbmcgJiYgIXcuc3RvcHBlZCk7XG4gICAgICAgIGlmICghaGFzV29ya2Vyc0ZvclF1ZXVlKSB7XG4gICAgICAgICAgICB0aGlzLiNsb2NhbEdyb3VwQ29uZmlnLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgICAgIHRoaXMuI2xvY2FsR3JvdXBBY3RpdmUuZGVsZXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgICN0cmFja0xvY2FsR3JvdXBTdGFydChuYW1lLCBqb2JzKSB7XG4gICAgICAgIGNvbnN0IGFsbG93ZWQgPSBbXTtcbiAgICAgICAgY29uc3QgZXhjZXNzID0gW107XG4gICAgICAgIGNvbnN0IGdyb3VwZWRKb2JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgam9iIG9mIGpvYnMpIHtcbiAgICAgICAgICAgIGlmICgham9iLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAvLyBKb2JzIHdpdGhvdXQgZ3JvdXAgYnlwYXNzIGxvY2FsIGdyb3VwIGxpbWl0c1xuICAgICAgICAgICAgICAgIGFsbG93ZWQucHVzaChqb2IpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gdGhpcy4jbG9jYWxHcm91cEFjdGl2ZS5nZXQobmFtZSk/LmdldChqb2IuZ3JvdXBJZCkgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gdGhpcy4jZ2V0TG9jYWxHcm91cExpbWl0KG5hbWUsIGpvYi5ncm91cFRpZXIpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudCA8IGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaW5jcmVtZW50TG9jYWxHcm91cENvdW50KG5hbWUsIGpvYi5ncm91cElkKTtcbiAgICAgICAgICAgICAgICBhbGxvd2VkLnB1c2goam9iKTtcbiAgICAgICAgICAgICAgICBncm91cGVkSm9icy5wdXNoKGpvYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBleGNlc3MucHVzaChqb2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGFsbG93ZWQsIGV4Y2VzcywgZ3JvdXBlZEpvYnMgfTtcbiAgICB9XG4gICAgI3RyYWNrTG9jYWxHcm91cEVuZChuYW1lLCBncm91cGVkSm9icykge1xuICAgICAgICBmb3IgKGNvbnN0IGpvYiBvZiBncm91cGVkSm9icykge1xuICAgICAgICAgICAgaWYgKGpvYi5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jZGVjcmVtZW50TG9jYWxHcm91cENvdW50KG5hbWUsIGpvYi5ncm91cElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcHJvY2Vzc0pvYnMobmFtZSwgam9icywgY2FsbGJhY2ssIHdvcmtlcikge1xuICAgICAgICBjb25zdCBqb2JJZHMgPSBqb2JzLm1hcChqb2IgPT4gam9iLmlkKTtcbiAgICAgICAgY29uc3QgbWF4RXhwaXJhdGlvbiA9IGpvYnMucmVkdWNlKChhY2MsIGkpID0+IE1hdGgubWF4KGFjYywgaS5leHBpcmVJblNlY29uZHMpLCAwKTtcbiAgICAgICAgY29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGpvYnMuZm9yRWFjaChqb2IgPT4geyBqb2Iuc2lnbmFsID0gYWMuc2lnbmFsOyB9KTtcbiAgICAgICAgLy8gU3RvcmUgQWJvcnRDb250cm9sbGVyIG9uIHdvcmtlciBzbyBpdCBjYW4gYmUgYWJvcnRlZCBhZnRlciBncmFjZWZ1bCBzaHV0ZG93blxuICAgICAgICBpZiAod29ya2VyKSB7XG4gICAgICAgICAgICB3b3JrZXIuYWJvcnRDb250cm9sbGVyID0gYWM7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc29sdmVXaXRoaW5TZWNvbmRzKGNhbGxiYWNrKGpvYnMpLCBtYXhFeHBpcmF0aW9uLCBgaGFuZGxlciBleGVjdXRpb24gZXhjZWVkZWQgJHttYXhFeHBpcmF0aW9ufXNgLCBhYyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbXBsZXRlKG5hbWUsIGpvYklkcywgam9iSWRzLmxlbmd0aCA9PT0gMSA/IHJlc3VsdCA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFja0pvYnNDb21wbGV0ZWQobmFtZSwgam9icywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZhaWwobmFtZSwgam9iSWRzLCBlcnIpO1xuICAgICAgICAgICAgdGhpcy4jdHJhY2tKb2JzRmFpbGVkKG5hbWUsIGpvYnMsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAod29ya2VyKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgYmV0d2VlbiBqb2JzXG4gICAgICAgICAgICAgICAgd29ya2VyLmFib3J0Q29udHJvbGxlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1ZXVlQ2FjaGVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHRoaXMub25DYWNoZVF1ZXVlcyh7IGVtaXQ6IHRydWUgfSksIHRoaXMuY29uZmlnLnF1ZXVlQ2FjaGVJbnRlcnZhbFNlY29uZHMgKiAxMDAwKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkNhY2hlUXVldWVzKCk7XG4gICAgfVxuICAgIGFzeW5jIG9uQ2FjaGVRdWV1ZXMoeyBlbWl0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhc3NlcnQoIXRoaXMuY29uZmlnLl9fdGVzdF9fdGhyb3dfcXVldWVDYWNoZSwgJ3Rlc3QgZXJyb3InKTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlcyA9IGF3YWl0IHRoaXMuZ2V0UXVldWVzKCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlcyA9IHF1ZXVlcy5yZWR1Y2UoKGFjYywgaSkgPT4geyBhY2NbaS5uYW1lXSA9IGk7IHJldHVybiBhY2M7IH0sIHt9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGVtaXQgJiYgdGhpcy5lbWl0KGV2ZW50cy5lcnJvciwgeyAuLi5lcnJvciwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgc3RhY2s6IGVycm9yLnN0YWNrIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldFF1ZXVlQ2FjaGUobmFtZSkge1xuICAgICAgICBhc3NlcnQodGhpcy5xdWV1ZXMsICdRdWV1ZSBjYWNoZSBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgbGV0IHF1ZXVlID0gdGhpcy5xdWV1ZXNbbmFtZV07XG4gICAgICAgIGlmIChxdWV1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXVlO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXVlID0gYXdhaXQgdGhpcy5nZXRRdWV1ZShuYW1lKTtcbiAgICAgICAgaWYgKCFxdWV1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBRdWV1ZSAke25hbWV9IGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWV1ZXNbbmFtZV0gPSBxdWV1ZTtcbiAgICAgICAgcmV0dXJuIHF1ZXVlO1xuICAgIH1cbiAgICBhc3luYyBzdG9wKCkge1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMucXVldWVDYWNoZUludGVydmFsKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFsuLi50aGlzLndvcmtlcnMudmFsdWVzKCldXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmtlciA9PiAhSU5URVJOQUxfUVVFVUVTW3dvcmtlci5uYW1lXSlcbiAgICAgICAgICAgIC5tYXAoYXN5bmMgKHdvcmtlcikgPT4gYXdhaXQgdGhpcy5vZmZXb3JrKHdvcmtlci5uYW1lLCB7IHdhaXQ6IGZhbHNlIH0pKSk7XG4gICAgICAgIC8vIENsZWFuIHVwIGFsbCBsb2NhbCBncm91cCB0cmFja2luZyBvbiBmdWxsIHN0b3BcbiAgICAgICAgdGhpcy4jbG9jYWxHcm91cENvbmZpZy5jbGVhcigpO1xuICAgICAgICB0aGlzLiNsb2NhbEdyb3VwQWN0aXZlLmNsZWFyKCk7XG4gICAgfVxuICAgIGFzeW5jIGZhaWxXaXAoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgd29ya2VyIG9mIHRoaXMud29ya2Vycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgam9iSWRzID0gd29ya2VyLmpvYnMubWFwKGogPT4gai5pZCk7XG4gICAgICAgICAgICBpZiAoam9iSWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmFpbCh3b3JrZXIubmFtZSwgam9iSWRzLCAncGctYm9zcyBzaHV0IGRvd24gd2hpbGUgYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3b3JrZXIuYWJvcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB3b3JrKG5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zLCBjYWxsYmFjayB9ID0gQXR0b3JuZXkuY2hlY2tXb3JrQXJncyhuYW1lLCBhcmdzKTtcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3JrZXJzIGFyZSBkaXNhYmxlZC4gcGctYm9zcyBpcyBzdG9wcGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBwb2xsaW5nSW50ZXJ2YWw6IGludGVydmFsLCBiYXRjaFNpemUgPSAxLCBpbmNsdWRlTWV0YWRhdGEgPSBmYWxzZSwgcHJpb3JpdHkgPSB0cnVlLCBsb2NhbENvbmN1cnJlbmN5ID0gMSwgbG9jYWxHcm91cENvbmN1cnJlbmN5LCBncm91cENvbmN1cnJlbmN5LCBvcmRlckJ5Q3JlYXRlZE9uID0gdHJ1ZSB9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKGxvY2FsR3JvdXBDb25jdXJyZW5jeSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLiNzdG9yZUxvY2FsR3JvdXBDb25maWcobmFtZSwgbG9jYWxHcm91cENvbmN1cnJlbmN5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaXJzdFdvcmtlcklkID0gcmFuZG9tVVVJRCh7IGRpc2FibGVFbnRyb3B5Q2FjaGU6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVdvcmtlciA9ICh3b3JrZXJJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmV0Y2ggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWdub3JlR3JvdXBzID0gbG9jYWxHcm91cENvbmN1cnJlbmN5ICE9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLiNnZXRHcm91cHNBdExvY2FsQ2FwYWNpdHkobmFtZSlcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gobmFtZSwgeyBiYXRjaFNpemUsIGluY2x1ZGVNZXRhZGF0YSwgcHJpb3JpdHksIG9yZGVyQnlDcmVhdGVkT24sIGdyb3VwQ29uY3VycmVuY3ksIGlnbm9yZUdyb3VwcyB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvbkZldGNoID0gYXN5bmMgKGpvYnMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWpvYnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLl9fdGVzdF9fdGhyb3dfd29ya2VyKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ19fdGVzdF9fdGhyb3dfd29ya2VyJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0V2lwKG5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYWNrSm9ic0FjdGl2ZShuYW1lLCBqb2JzKTtcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHdvcmtlciBpbnN0YW5jZSBmb3IgYWJvcnQgY29udHJvbGxlciB0cmFja2luZ1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlciA9IHRoaXMud29ya2Vycy5nZXQod29ya2VySWQpO1xuICAgICAgICAgICAgICAgIC8vIFNraXAgYWxsIGluLW1lbW9yeSBncm91cCB0cmFja2luZyB3aGVuIGxvY2FsR3JvdXBDb25jdXJyZW5jeSBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmIChsb2NhbEdyb3VwQ29uY3VycmVuY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzSm9icyhuYW1lLCBqb2JzLCBjYWxsYmFjaywgd29ya2VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYWxsb3dlZCwgZXhjZXNzLCBncm91cGVkSm9icyB9ID0gdGhpcy4jdHJhY2tMb2NhbEdyb3VwU3RhcnQobmFtZSwgam9icyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGNlc3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjZXNzSWRzID0gZXhjZXNzLm1hcChqb2IgPT4gam9iLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzdG9yZShuYW1lLCBleGNlc3NJZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc0pvYnMobmFtZSwgYWxsb3dlZCwgY2FsbGJhY2ssIHdvcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiN0cmFja0xvY2FsR3JvdXBFbmQobmFtZSwgZ3JvdXBlZEpvYnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdFdpcChuYW1lKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvbkVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KGV2ZW50cy5lcnJvciwgeyAuLi5lcnJvciwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgc3RhY2s6IGVycm9yLnN0YWNrLCBxdWV1ZTogbmFtZSwgd29ya2VyOiB3b3JrZXJJZCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdvcmtlcih7IGlkOiB3b3JrZXJJZCwgbmFtZSwgb3B0aW9ucywgaW50ZXJ2YWwsIGZldGNoLCBvbkZldGNoLCBvbkVycm9yIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBTcGF3biB3b3JrZXJzIGJhc2VkIG9uIGxvY2FsQ29uY3VycmVuY3kgc2V0dGluZ1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsQ29uY3VycmVuY3k7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgd29ya2VySWQgPSBpID09PSAwID8gZmlyc3RXb3JrZXJJZCA6IHJhbmRvbVVVSUQoeyBkaXNhYmxlRW50cm9weUNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgICAgY29uc3Qgd29ya2VyID0gY3JlYXRlV29ya2VyKHdvcmtlcklkKTtcbiAgICAgICAgICAgIHRoaXMuYWRkV29ya2VyKHdvcmtlcik7XG4gICAgICAgICAgICB3b3JrZXIuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlyc3RXb3JrZXJJZDtcbiAgICB9XG4gICAgYWRkV29ya2VyKHdvcmtlcikge1xuICAgICAgICB0aGlzLndvcmtlcnMuc2V0KHdvcmtlci5pZCwgd29ya2VyKTtcbiAgICB9XG4gICAgcmVtb3ZlV29ya2VyKHdvcmtlcikge1xuICAgICAgICB0aGlzLndvcmtlcnMuZGVsZXRlKHdvcmtlci5pZCk7XG4gICAgfVxuICAgIGdldFdvcmtlcnMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29ya2Vycy52YWx1ZXMoKSk7XG4gICAgfVxuICAgIGVtaXRXaXAobmFtZSkge1xuICAgICAgICBpZiAoIUlOVEVSTkFMX1FVRVVFU1tuYW1lXSkge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGlmIChub3cgLSB0aGlzLndpcFRzID4gMjAwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChldmVudHMud2lwLCB0aGlzLmdldFdpcERhdGEoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy53aXBUcyA9IG5vdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRXaXBEYXRhKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCB7IGluY2x1ZGVJbnRlcm5hbCA9IGZhbHNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRXb3JrZXJzKClcbiAgICAgICAgICAgIC5tYXAoaSA9PiBpLnRvV2lwRGF0YSgpKVxuICAgICAgICAgICAgLmZpbHRlcihpID0+IGkuc3RhdGUgIT09ICdzdG9wcGVkJyAmJiAoIUlOVEVSTkFMX1FVRVVFU1tpLm5hbWVdIHx8IGluY2x1ZGVJbnRlcm5hbCkpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaGFzUGVuZGluZ0NsZWFudXBzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nT2ZmV29ya0NsZWFudXBzLnNpemUgPiAwO1xuICAgIH1cbiAgICBhc3luYyBvZmZXb3JrKG5hbWUsIG9wdGlvbnMgPSB7IHdhaXQ6IHRydWUgfSkge1xuICAgICAgICBhc3NlcnQobmFtZSwgJ3F1ZXVlIG5hbWUgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJywgJ3F1ZXVlIG5hbWUgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICBjb25zdCBxdWVyeSA9IChpKSA9PiBvcHRpb25zPy5pZCA/IGkuaWQgPT09IG9wdGlvbnMuaWQgOiBpLm5hbWUgPT09IG5hbWU7XG4gICAgICAgIGNvbnN0IHdvcmtlcnMgPSB0aGlzLmdldFdvcmtlcnMoKS5maWx0ZXIoaSA9PiBxdWVyeShpKSAmJiAhaS5zdG9wcGluZyAmJiAhaS5zdG9wcGVkKTtcbiAgICAgICAgaWYgKHdvcmtlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xlYW51cFByb21pc2UgPSBQcm9taXNlLmFsbFNldHRsZWQod29ya2Vycy5tYXAoYXN5bmMgKHdvcmtlcikgPT4ge1xuICAgICAgICAgICAgYXdhaXQgd29ya2VyLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlV29ya2VyKHdvcmtlcik7XG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMud2FpdCkge1xuICAgICAgICAgICAgYXdhaXQgY2xlYW51cFByb21pc2U7XG4gICAgICAgICAgICB0aGlzLiNjbGVhbnVwTG9jYWxHcm91cFRyYWNraW5nKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nT2ZmV29ya0NsZWFudXBzLmFkZChjbGVhbnVwUHJvbWlzZSk7XG4gICAgICAgICAgICBjbGVhbnVwUHJvbWlzZS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdPZmZXb3JrQ2xlYW51cHMuZGVsZXRlKGNsZWFudXBQcm9taXNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjbGVhbnVwTG9jYWxHcm91cFRyYWNraW5nKG5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm90aWZ5V29ya2VyKHdvcmtlcklkKSB7XG4gICAgICAgIHRoaXMud29ya2Vycy5nZXQod29ya2VySWQpPy5ub3RpZnkoKTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKGV2ZW50LCBuYW1lKSB7XG4gICAgICAgIGFzc2VydChldmVudCwgJ01pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnQnKTtcbiAgICAgICAgYXNzZXJ0KG5hbWUsICdNaXNzaW5nIHJlcXVpcmVkIGFyZ3VtZW50Jyk7XG4gICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLnN1YnNjcmliZSh0aGlzLmNvbmZpZy5zY2hlbWEpO1xuICAgICAgICBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwoc3FsLCBbZXZlbnQsIG5hbWVdKTtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoZXZlbnQsIG5hbWUpIHtcbiAgICAgICAgYXNzZXJ0KGV2ZW50LCAnTWlzc2luZyByZXF1aXJlZCBhcmd1bWVudCcpO1xuICAgICAgICBhc3NlcnQobmFtZSwgJ01pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnQnKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMudW5zdWJzY3JpYmUodGhpcy5jb25maWcuc2NoZW1hKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYi5leGVjdXRlU3FsKHNxbCwgW2V2ZW50LCBuYW1lXSk7XG4gICAgfVxuICAgIGFzeW5jIHB1Ymxpc2goZXZlbnQsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgYXNzZXJ0KGV2ZW50LCAnTWlzc2luZyByZXF1aXJlZCBhcmd1bWVudCcpO1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5nZXRRdWV1ZXNGb3JFdmVudCh0aGlzLmNvbmZpZy5zY2hlbWEpO1xuICAgICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwsIFtldmVudF0pO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocm93cy5tYXAoKHsgbmFtZSB9KSA9PiB0aGlzLnNlbmQobmFtZSwgZGF0YSwgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZCguLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IEF0dG9ybmV5LmNoZWNrU2VuZEFyZ3MoYXJncyk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUpvYihyZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyBzZW5kQWZ0ZXIobmFtZSwgZGF0YSwgb3B0aW9ucywgYWZ0ZXIpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyB7IC4uLm9wdGlvbnMgfSA6IHt9O1xuICAgICAgICBvcHRpb25zLnN0YXJ0QWZ0ZXIgPSBhZnRlcjtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gQXR0b3JuZXkuY2hlY2tTZW5kQXJncyhbbmFtZSwgZGF0YSwgb3B0aW9uc10pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVKb2IocmVzdWx0KTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZFRocm90dGxlZChuYW1lLCBkYXRhLCBvcHRpb25zLCBzZWNvbmRzLCBrZXkpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyB7IC4uLm9wdGlvbnMgfSA6IHt9O1xuICAgICAgICBvcHRpb25zLnNpbmdsZXRvblNlY29uZHMgPSBzZWNvbmRzO1xuICAgICAgICBvcHRpb25zLnNpbmdsZXRvbk5leHRTbG90ID0gZmFsc2U7XG4gICAgICAgIG9wdGlvbnMuc2luZ2xldG9uS2V5ID0ga2V5O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBBdHRvcm5leS5jaGVja1NlbmRBcmdzKFtuYW1lLCBkYXRhLCBvcHRpb25zXSk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUpvYihyZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyBzZW5kRGVib3VuY2VkKG5hbWUsIGRhdGEsIG9wdGlvbnMsIHNlY29uZHMsIGtleSkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/IHsgLi4ub3B0aW9ucyB9IDoge307XG4gICAgICAgIG9wdGlvbnMuc2luZ2xldG9uU2Vjb25kcyA9IHNlY29uZHM7XG4gICAgICAgIG9wdGlvbnMuc2luZ2xldG9uTmV4dFNsb3QgPSB0cnVlO1xuICAgICAgICBvcHRpb25zLnNpbmdsZXRvbktleSA9IGtleTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gQXR0b3JuZXkuY2hlY2tTZW5kQXJncyhbbmFtZSwgZGF0YSwgb3B0aW9uc10pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVKb2IocmVzdWx0KTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlSm9iKHJlcXVlc3QpIHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCBkYXRhID0gbnVsbCwgb3B0aW9ucyA9IHt9IH0gPSByZXF1ZXN0O1xuICAgICAgICBjb25zdCB7IGlkID0gbnVsbCwgZGI6IHdyYXBwZXIsIHByaW9yaXR5LCBzdGFydEFmdGVyLCBzaW5nbGV0b25LZXkgPSBudWxsLCBzaW5nbGV0b25TZWNvbmRzLCBzaW5nbGV0b25OZXh0U2xvdCwgZXhwaXJlSW5TZWNvbmRzLCBkZWxldGVBZnRlclNlY29uZHMsIHJldGVudGlvblNlY29uZHMsIGtlZXBVbnRpbCwgcmV0cnlMaW1pdCwgcmV0cnlEZWxheSwgcmV0cnlCYWNrb2ZmLCByZXRyeURlbGF5TWF4LCBncm91cCwgZGVhZExldHRlciA9IG51bGwgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGpvYiA9IHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICAgIHN0YXJ0QWZ0ZXIsXG4gICAgICAgICAgICBzaW5nbGV0b25LZXksXG4gICAgICAgICAgICBzaW5nbGV0b25TZWNvbmRzLFxuICAgICAgICAgICAgc2luZ2xldG9uT2Zmc2V0OiAwLFxuICAgICAgICAgICAgZ3JvdXBJZDogZ3JvdXA/LmlkID8/IG51bGwsXG4gICAgICAgICAgICBncm91cFRpZXI6IGdyb3VwPy50aWVyID8/IG51bGwsXG4gICAgICAgICAgICBleHBpcmVJblNlY29uZHMsXG4gICAgICAgICAgICBkZWxldGVBZnRlclNlY29uZHMsXG4gICAgICAgICAgICByZXRlbnRpb25TZWNvbmRzLFxuICAgICAgICAgICAga2VlcFVudGlsLFxuICAgICAgICAgICAgcmV0cnlMaW1pdCxcbiAgICAgICAgICAgIHJldHJ5RGVsYXksXG4gICAgICAgICAgICByZXRyeUJhY2tvZmYsXG4gICAgICAgICAgICByZXRyeURlbGF5TWF4LFxuICAgICAgICAgICAgZGVhZExldHRlclxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkYiA9IHdyYXBwZXIgfHwgdGhpcy5kYjtcbiAgICAgICAgY29uc3QgeyB0YWJsZSwgcG9saWN5IH0gPSBhd2FpdCB0aGlzLmdldFF1ZXVlQ2FjaGUobmFtZSk7XG4gICAgICAgIGlmIChwb2xpY3kgPT09IHBsYW5zLlFVRVVFX1BPTElDSUVTLmtleV9zdHJpY3RfZmlmbyAmJiAhc2luZ2xldG9uS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cGxhbnMuUVVFVUVfUE9MSUNJRVMua2V5X3N0cmljdF9maWZvfSBxdWV1ZXMgcmVxdWlyZSBhIHNpbmdsZXRvbktleWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmluc2VydEpvYnModGhpcy5jb25maWcuc2NoZW1hLCB7IHRhYmxlLCBuYW1lLCByZXR1cm5JZDogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgeyByb3dzOiB0cnkxIH0gPSBhd2FpdCBkYi5leGVjdXRlU3FsKHNxbCwgW0pTT04uc3RyaW5naWZ5KFtqb2JdKV0pO1xuICAgICAgICBpZiAodHJ5MS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gdHJ5MVswXS5pZDtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5fX3Rlc3RfX2VuYWJsZVNwaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3B5ID0gdGhpcy4jc3BpZXMuZ2V0KG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChzcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3B5LmFkZEpvYihqb2JJZCwgbmFtZSwgZGF0YSB8fCB7fSwgJ2NyZWF0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gam9iSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpbmdsZXRvbk5leHRTbG90KSB7XG4gICAgICAgICAgICAvLyBkZWxheSBzdGFydGluZyBieSB0aGUgb2Zmc2V0IHRvIGhvbm9yIHRocm90dGxpbmcgY29uZmlnXG4gICAgICAgICAgICBqb2Iuc3RhcnRBZnRlciA9IHRoaXMuZ2V0RGVib3VuY2VTdGFydEFmdGVyKHNpbmdsZXRvblNlY29uZHMsIHRoaXMudGltZWtlZXBlci5jbG9ja1NrZXcpO1xuICAgICAgICAgICAgam9iLnNpbmdsZXRvbk9mZnNldCA9IHNpbmdsZXRvblNlY29uZHM7XG4gICAgICAgICAgICBjb25zdCB7IHJvd3M6IHRyeTIgfSA9IGF3YWl0IGRiLmV4ZWN1dGVTcWwoc3FsLCBbSlNPTi5zdHJpbmdpZnkoW2pvYl0pXSk7XG4gICAgICAgICAgICBpZiAodHJ5Mi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JJZCA9IHRyeTJbMF0uaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLl9fdGVzdF9fZW5hYmxlU3BpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3B5ID0gdGhpcy4jc3BpZXMuZ2V0KG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3B5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcHkuYWRkSm9iKGpvYklkLCBuYW1lLCBkYXRhIHx8IHt9LCAnY3JlYXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBqb2JJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgaW5zZXJ0KG5hbWUsIGpvYnMsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShqb2JzKSwgJ2pvYnMgYXJndW1lbnQgc2hvdWxkIGJlIGFuIGFycmF5Jyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUsIHBvbGljeSB9ID0gYXdhaXQgdGhpcy5nZXRRdWV1ZUNhY2hlKG5hbWUpO1xuICAgICAgICBpZiAocG9saWN5ID09PSBwbGFucy5RVUVVRV9QT0xJQ0lFUy5rZXlfc3RyaWN0X2ZpZm8pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgam9iIG9mIGpvYnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWpvYi5zaW5nbGV0b25LZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3BsYW5zLlFVRVVFX1BPTElDSUVTLmtleV9zdHJpY3RfZmlmb30gcXVldWVzIHJlcXVpcmUgYSBzaW5nbGV0b25LZXlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLmFzc2VydERiKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzcHkgPSB0aGlzLmNvbmZpZy5fX3Rlc3RfX2VuYWJsZVNwaWVzID8gdGhpcy4jc3BpZXMuZ2V0KG5hbWUpIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBSZXR1cm4gSURzIGlmIHNweSBpcyBhY3RpdmUgZm9yIHRoaXMgcXVldWUgKG5lZWRlZCBmb3Igam9iIHRyYWNraW5nKVxuICAgICAgICBjb25zdCByZXR1cm5JZCA9ICEhc3B5IHx8ICEhb3B0aW9ucy5yZXR1cm5JZDtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuaW5zZXJ0Sm9icyh0aGlzLmNvbmZpZy5zY2hlbWEsIHsgdGFibGUsIG5hbWUsIHJldHVybklkIH0pO1xuICAgICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IGRiLmV4ZWN1dGVTcWwoc3FsLCBbSlNPTi5zdHJpbmdpZnkoam9icyldKTtcbiAgICAgICAgaWYgKHJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc3B5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNweS5hZGRKb2Iocm93c1tpXS5pZCwgbmFtZSwgam9ic1tpXS5kYXRhIHx8IHt9LCAnY3JlYXRlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzLm1hcCgoaSkgPT4gaS5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldERlYm91bmNlU3RhcnRBZnRlcihzaW5nbGV0b25TZWNvbmRzLCBjbG9ja09mZnNldCkge1xuICAgICAgICBjb25zdCBkZWJvdW5jZUludGVydmFsID0gc2luZ2xldG9uU2Vjb25kcyAqIDEwMDA7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCkgKyBjbG9ja09mZnNldDtcbiAgICAgICAgY29uc3Qgc2xvdCA9IE1hdGguZmxvb3Iobm93IC8gZGVib3VuY2VJbnRlcnZhbCkgKiBkZWJvdW5jZUludGVydmFsO1xuICAgICAgICAvLyBwcmV2ZW50IHN0YXJ0QWZ0ZXI9MCBkdXJpbmcgZGVib3VuY2luZ1xuICAgICAgICBsZXQgc3RhcnRBZnRlciA9IChzaW5nbGV0b25TZWNvbmRzIC0gTWF0aC5mbG9vcigobm93IC0gc2xvdCkgLyAxMDAwKSkgfHwgMTtcbiAgICAgICAgaWYgKHNpbmdsZXRvblNlY29uZHMgPiAxKSB7XG4gICAgICAgICAgICBzdGFydEFmdGVyKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXJ0QWZ0ZXI7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoKG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBBdHRvcm5leS5jaGVja0ZldGNoQXJncyhuYW1lLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLmFzc2VydERiKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IHRhYmxlLCBwb2xpY3ksIHNpbmdsZXRvbnNBY3RpdmUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcy5jb25maWcuc2NoZW1hLFxuICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcG9saWN5LFxuICAgICAgICAgICAgbGltaXQ6IG9wdGlvbnMuYmF0Y2hTaXplIHx8IDEsXG4gICAgICAgICAgICBpZ25vcmVTaW5nbGV0b25zOiBzaW5nbGV0b25zQWN0aXZlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gcGxhbnMuZmV0Y2hOZXh0Sm9iKGZldGNoT3B0aW9ucyk7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5leGVjdXRlU3FsKHF1ZXJ5LnRleHQsIHF1ZXJ5LnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gZXJyb3JzIGZyb20gZmV0Y2hxdWVyeSBzaG91bGQgb25seSBiZSB1bmlxdWUgY29uc3RyYWludCB2aW9sYXRpb25zXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdD8ucm93cyB8fCBbXTtcbiAgICB9XG4gICAgbWFwQ29tcGxldGlvbklkQXJnKGlkLCBmdW5jTmFtZSkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBgJHtmdW5jTmFtZX0oKSByZXF1aXJlcyBhbiBpZGA7XG4gICAgICAgIGFzc2VydChpZCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShpZCkgPyBpZCA6IFtpZF07XG4gICAgICAgIGFzc2VydChpZHMubGVuZ3RoLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gaWRzO1xuICAgIH1cbiAgICBtYXBDb21wbGV0aW9uRGF0YUFyZyhkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhID09PSBudWxsIHx8IHR5cGVvZiBkYXRhID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSlcbiAgICAgICAgICAgID8gZGF0YVxuICAgICAgICAgICAgOiB7IHZhbHVlOiBkYXRhIH07XG4gICAgICAgIHJldHVybiBzdHJpbmdpZnkocmVzdWx0KTtcbiAgICB9XG4gICAgbWFwQ29tbWFuZFJlc3BvbnNlKGlkcywgcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBqb2JzOiBpZHMsXG4gICAgICAgICAgICByZXF1ZXN0ZWQ6IGlkcy5sZW5ndGgsXG4gICAgICAgICAgICBhZmZlY3RlZDogcmVzdWx0ICYmIHJlc3VsdC5yb3dzID8gcGFyc2VJbnQocmVzdWx0LnJvd3NbMF0uY291bnQpIDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBjb21wbGV0ZShuYW1lLCBpZCwgZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIEF0dG9ybmV5LmFzc2VydFF1ZXVlTmFtZShuYW1lKTtcbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLmFzc2VydERiKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLm1hcENvbXBsZXRpb25JZEFyZyhpZCwgJ2NvbXBsZXRlJyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuY29tcGxldGVKb2JzKHRoaXMuY29uZmlnLnNjaGVtYSwgdGFibGUsIG9wdGlvbnMuaW5jbHVkZVF1ZXVlZCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmV4ZWN1dGVTcWwoc3FsLCBbbmFtZSwgaWRzLCB0aGlzLm1hcENvbXBsZXRpb25EYXRhQXJnKGRhdGEpXSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcENvbW1hbmRSZXNwb25zZShpZHMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGFzeW5jIGZhaWwobmFtZSwgaWQsIGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IGRiID0gdGhpcy5hc3NlcnREYihvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaWRzID0gdGhpcy5tYXBDb21wbGV0aW9uSWRBcmcoaWQsICdmYWlsJyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuZmFpbEpvYnNCeUlkKHRoaXMuY29uZmlnLnNjaGVtYSwgdGFibGUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leGVjdXRlU3FsKHNxbCwgW25hbWUsIGlkcywgdGhpcy5tYXBDb21wbGV0aW9uRGF0YUFyZyhkYXRhKV0pO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBDb21tYW5kUmVzcG9uc2UoaWRzLCByZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVKb2IobmFtZSwgaWQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IGRiID0gdGhpcy5hc3NlcnREYihvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaWRzID0gdGhpcy5tYXBDb21wbGV0aW9uSWRBcmcoaWQsICdkZWxldGVKb2InKTtcbiAgICAgICAgY29uc3QgeyB0YWJsZSB9ID0gYXdhaXQgdGhpcy5nZXRRdWV1ZUNhY2hlKG5hbWUpO1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5kZWxldGVKb2JzQnlJZCh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lLCBpZHNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwQ29tbWFuZFJlc3BvbnNlKGlkcywgcmVzdWx0KTtcbiAgICB9XG4gICAgYXN5bmMgY2FuY2VsKG5hbWUsIGlkLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuYXNzZXJ0RGIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMubWFwQ29tcGxldGlvbklkQXJnKGlkLCAnY2FuY2VsJyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuY2FuY2VsSm9icyh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lLCBpZHNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwQ29tbWFuZFJlc3BvbnNlKGlkcywgcmVzdWx0KTtcbiAgICB9XG4gICAgYXN5bmMgcmVzdW1lKG5hbWUsIGlkLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuYXNzZXJ0RGIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMubWFwQ29tcGxldGlvbklkQXJnKGlkLCAncmVzdW1lJyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMucmVzdW1lSm9icyh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lLCBpZHNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwQ29tbWFuZFJlc3BvbnNlKGlkcywgcmVzdWx0KTtcbiAgICB9XG4gICAgYXN5bmMgcmVzdG9yZShuYW1lLCBpZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIEF0dG9ybmV5LmFzc2VydFF1ZXVlTmFtZShuYW1lKTtcbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLmFzc2VydERiKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLm1hcENvbXBsZXRpb25JZEFyZyhpZCwgJ3Jlc3RvcmUnKTtcbiAgICAgICAgY29uc3QgeyB0YWJsZSB9ID0gYXdhaXQgdGhpcy5nZXRRdWV1ZUNhY2hlKG5hbWUpO1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5yZXN0b3JlSm9icyh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlKTtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lLCBpZHNdKTtcbiAgICB9XG4gICAgYXN5bmMgcmV0cnkobmFtZSwgaWQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IGRiID0gb3B0aW9ucy5kYiB8fCB0aGlzLmRiO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLm1hcENvbXBsZXRpb25JZEFyZyhpZCwgJ3JldHJ5Jyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMucmV0cnlKb2JzKHRoaXMuY29uZmlnLnNjaGVtYSwgdGFibGUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leGVjdXRlU3FsKHNxbCwgW25hbWUsIGlkc10pO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBDb21tYW5kUmVzcG9uc2UoaWRzLCByZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVRdWV1ZShuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgb3B0aW9ucy5uYW1lO1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IHBvbGljeSA9IG9wdGlvbnMucG9saWN5IHx8IHBsYW5zLlFVRVVFX1BPTElDSUVTLnN0YW5kYXJkO1xuICAgICAgICBhc3NlcnQocG9saWN5IGluIHBsYW5zLlFVRVVFX1BPTElDSUVTLCBgJHtwb2xpY3l9IGlzIG5vdCBhIHZhbGlkIHF1ZXVlIHBvbGljeWApO1xuICAgICAgICBBdHRvcm5leS52YWxpZGF0ZVF1ZXVlQXJncyhvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVhZExldHRlcikge1xuICAgICAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG9wdGlvbnMuZGVhZExldHRlcik7XG4gICAgICAgICAgICBub3RTdHJpY3RFcXVhbChuYW1lLCBvcHRpb25zLmRlYWRMZXR0ZXIsICdkZWFkTGV0dGVyIGNhbm5vdCBiZSBpdHNlbGYnKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShvcHRpb25zLmRlYWRMZXR0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmNyZWF0ZVF1ZXVlKHRoaXMuY29uZmlnLnNjaGVtYSwgbmFtZSwgeyAuLi5vcHRpb25zLCBwb2xpY3kgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwpO1xuICAgIH1cbiAgICBhc3luYyBnZXRCbG9ja2VkS2V5cyhuYW1lKSB7XG4gICAgICAgIEF0dG9ybmV5LmFzc2VydFF1ZXVlTmFtZShuYW1lKTtcbiAgICAgICAgY29uc3QgeyB0YWJsZSwgcG9saWN5IH0gPSBhd2FpdCB0aGlzLmdldFF1ZXVlQ2FjaGUobmFtZSk7XG4gICAgICAgIGlmIChwb2xpY3kgIT09IHBsYW5zLlFVRVVFX1BPTElDSUVTLmtleV9zdHJpY3RfZmlmbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBnZXRCbG9ja2VkS2V5cyBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgJHtwbGFucy5RVUVVRV9QT0xJQ0lFUy5rZXlfc3RyaWN0X2ZpZm99IHF1ZXVlc2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmdldEJsb2NrZWRLZXlzKHRoaXMuY29uZmlnLnNjaGVtYSwgdGFibGUpO1xuICAgICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lXSk7XG4gICAgICAgIHJldHVybiByb3dzLm1hcChyb3cgPT4gcm93LnNpbmdsZXRvbktleSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFF1ZXVlcyhuYW1lcykge1xuICAgICAgICBuYW1lcyA9IEFycmF5LmlzQXJyYXkobmFtZXMpID8gbmFtZXMgOiB0eXBlb2YgbmFtZXMgPT09ICdzdHJpbmcnID8gW25hbWVzXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG5hbWVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgbmFtZXMpIHtcbiAgICAgICAgICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnkgPSBwbGFucy5nZXRRdWV1ZXModGhpcy5jb25maWcuc2NoZW1hLCBuYW1lcyk7XG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgdGhpcy5kYi5leGVjdXRlU3FsKHF1ZXJ5LnRleHQsIHF1ZXJ5LnZhbHVlcyk7XG4gICAgICAgIHJldHVybiByb3dzO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVRdWV1ZShuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICBhc3NlcnQoT2JqZWN0LmtleXMob3B0aW9ucykubGVuZ3RoID4gMCwgJ25vIHByb3BlcnRpZXMgZm91bmQgdG8gdXBkYXRlJyk7XG4gICAgICAgIGlmICgncG9saWN5JyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3F1ZXVlIHBvbGljeSBjYW5ub3QgYmUgY2hhbmdlZCBhZnRlciBjcmVhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgncGFydGl0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3F1ZXVlIHBhcnRpdGlvbmluZyBjYW5ub3QgYmUgY2hhbmdlZCBhZnRlciBjcmVhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIEF0dG9ybmV5LnZhbGlkYXRlUXVldWVBcmdzKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IGRlYWRMZXR0ZXIgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChkZWFkTGV0dGVyKSB7XG4gICAgICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUoZGVhZExldHRlcik7XG4gICAgICAgICAgICBub3RTdHJpY3RFcXVhbChuYW1lLCBkZWFkTGV0dGVyLCAnZGVhZExldHRlciBjYW5ub3QgYmUgaXRzZWxmJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMudXBkYXRlUXVldWUodGhpcy5jb25maWcuc2NoZW1hLCB7IGRlYWRMZXR0ZXIgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFF1ZXVlKG5hbWUpIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHBsYW5zLmdldFF1ZXVlcyh0aGlzLmNvbmZpZy5zY2hlbWEsIFtuYW1lXSk7XG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgdGhpcy5kYi5leGVjdXRlU3FsKHF1ZXJ5LnRleHQsIHF1ZXJ5LnZhbHVlcyk7XG4gICAgICAgIHJldHVybiByb3dzWzBdIHx8IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVF1ZXVlKG5hbWUpIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRRdWV1ZUNhY2hlKG5hbWUpO1xuICAgICAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuZGVsZXRlUXVldWUodGhpcy5jb25maWcuc2NoZW1hLCBuYW1lKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHsgfVxuICAgIH1cbiAgICBhc3luYyBkZWxldGVRdWV1ZWRKb2JzKG5hbWUpIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICBjb25zdCB7IHRhYmxlIH0gPSBhd2FpdCB0aGlzLmdldFF1ZXVlQ2FjaGUobmFtZSk7XG4gICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmRlbGV0ZVF1ZXVlZEpvYnModGhpcy5jb25maWcuc2NoZW1hLCB0YWJsZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lXSk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVN0b3JlZEpvYnMobmFtZSkge1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuZGVsZXRlU3RvcmVkSm9icyh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYi5leGVjdXRlU3FsKHNxbCwgW25hbWVdKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlQWxsSm9icyhuYW1lKSB7XG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMudHJ1bmNhdGVUYWJsZSh0aGlzLmNvbmZpZy5zY2hlbWEsICdqb2InKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIEF0dG9ybmV5LmFzc2VydFF1ZXVlTmFtZShuYW1lKTtcbiAgICAgICAgY29uc3QgeyB0YWJsZSwgcGFydGl0aW9uIH0gPSBhd2FpdCB0aGlzLmdldFF1ZXVlQ2FjaGUobmFtZSk7XG4gICAgICAgIGlmIChwYXJ0aXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLnRydW5jYXRlVGFibGUodGhpcy5jb25maWcuc2NoZW1hLCB0YWJsZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwoc3FsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLmRlbGV0ZUFsbEpvYnModGhpcy5jb25maWcuc2NoZW1hLCB0YWJsZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwoc3FsLCBbbmFtZV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldFF1ZXVlU3RhdHMobmFtZSkge1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gYXdhaXQgdGhpcy5nZXRRdWV1ZUNhY2hlKG5hbWUpO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHBsYW5zLmdldFF1ZXVlU3RhdHModGhpcy5jb25maWcuc2NoZW1hLCBxdWV1ZS50YWJsZSwgW25hbWVdKTtcbiAgICAgICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwocXVlcnkudGV4dCwgcXVlcnkudmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocXVldWUsIHJvd3MuYXQoMCkgfHxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZENvdW50OiAwLFxuICAgICAgICAgICAgICAgIHF1ZXVlZENvdW50OiAwLFxuICAgICAgICAgICAgICAgIGFjdGl2ZUNvdW50OiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRKb2JCeUlkKG5hbWUsIGlkLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0UXVldWVOYW1lKG5hbWUpO1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuYXNzZXJ0RGIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgdGFibGUgfSA9IGF3YWl0IHRoaXMuZ2V0UXVldWVDYWNoZShuYW1lKTtcbiAgICAgICAgY29uc3Qgc3FsID0gcGxhbnMuZ2V0Sm9iQnlJZCh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0MSA9IGF3YWl0IGRiLmV4ZWN1dGVTcWwoc3FsLCBbbmFtZSwgaWRdKTtcbiAgICAgICAgaWYgKHJlc3VsdDE/LnJvd3M/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDEucm93c1swXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZpbmRKb2JzKG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBBdHRvcm5leS5hc3NlcnRRdWV1ZU5hbWUobmFtZSk7XG4gICAgICAgIGNvbnN0IGRiID0gdGhpcy5hc3NlcnREYihvcHRpb25zKTtcbiAgICAgICAgY29uc3QgeyB0YWJsZSB9ID0gYXdhaXQgdGhpcy5nZXRRdWV1ZUNhY2hlKG5hbWUpO1xuICAgICAgICBjb25zdCB7IGlkLCBrZXksIGRhdGEsIHF1ZXVlZCA9IGZhbHNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5maW5kSm9icyh0aGlzLmNvbmZpZy5zY2hlbWEsIHRhYmxlLCB7XG4gICAgICAgICAgICBieUlkOiBpZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgYnlLZXk6IGtleSAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgYnlEYXRhOiBkYXRhICE9PSB1bmRlZmluZWQsXG4gICAgICAgICAgICBxdWV1ZWRcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IFtuYW1lXTtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChpZCk7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGtleSk7XG4gICAgICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmV4ZWN1dGVTcWwoc3FsLCB2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Py5yb3dzIHx8IFtdO1xuICAgIH1cbiAgICBhc3NlcnREYihvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmRiKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5kYjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kYi5fcGdiZGIpIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRiLm9wZW5lZCwgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gaXMgbm90IG9wZW5lZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRiO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IE1hbmFnZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/migrationStore.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/migrationStore.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAll: () => (/* binding */ getAll),\n/* harmony export */   migrate: () => (/* binding */ migrate),\n/* harmony export */   next: () => (/* binding */ next),\n/* harmony export */   rollback: () => (/* binding */ rollback)\n/* harmony export */ });\n/* harmony import */ var node_assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:assert */ \"node:assert\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js\");\n\n\n\nfunction flatten(schema, commands, version) {\n    commands.unshift(_plans_js__WEBPACK_IMPORTED_MODULE_1__.assertMigration(schema, version));\n    commands.push(_plans_js__WEBPACK_IMPORTED_MODULE_1__.setVersion(schema, version));\n    return _plans_js__WEBPACK_IMPORTED_MODULE_1__.locked(schema, commands);\n}\nfunction rollback(schema, version, migrations) {\n    migrations = migrations || getAll(schema);\n    const result = migrations.find(i => i.version === version);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(result, `Version ${version} not found.`);\n    return flatten(schema, result.uninstall || [], result.previous);\n}\nfunction next(schema, version, migrations) {\n    migrations = migrations || getAll(schema);\n    const result = migrations.find(i => i.previous === version);\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(result, `Version ${version} not found.`);\n    return flatten(schema, result.install, result.version);\n}\nfunction migrate(schema, version, migrations) {\n    migrations = migrations || getAll(schema);\n    const result = migrations\n        .filter(i => i.previous >= version)\n        .sort((a, b) => a.version - b.version)\n        .reduce((acc, migration) => {\n        acc.install = acc.install.concat(migration.install);\n        if (migration.async) {\n            const bamCommands = migration.async.map(cmd => cmd.replace(/\\$VERSION\\$/g, String(migration.version)));\n            acc.install = acc.install.concat(bamCommands);\n        }\n        acc.version = migration.version;\n        return acc;\n    }, { install: [], version });\n    node_assert__WEBPACK_IMPORTED_MODULE_0__(result.install.length > 0, `Version ${version} not found.`);\n    return flatten(schema, result.install, result.version);\n}\nfunction getAll(schema) {\n    return [\n        {\n            release: '11.1.0',\n            version: 26,\n            previous: 25,\n            install: [\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.create_queue(queue_name text, options jsonb)\n        RETURNS VOID AS\n        $$\n        DECLARE\n          tablename varchar := CASE WHEN options->>'partition' = 'true'\n                                THEN 'j' || encode(sha224(queue_name::bytea), 'hex')\n                                ELSE 'job_common'\n                                END;\n          queue_created_on timestamptz;\n        BEGIN\n\n          WITH q as (\n            INSERT INTO ${schema}.queue (\n              name,\n              policy,\n              retry_limit,\n              retry_delay,\n              retry_backoff,\n              retry_delay_max,\n              expire_seconds,\n              retention_seconds,\n              deletion_seconds,\n              warning_queued,\n              dead_letter,\n              partition,\n              table_name\n            )\n            VALUES (\n              queue_name,\n              options->>'policy',\n              COALESCE((options->>'retryLimit')::int, 2),\n              COALESCE((options->>'retryDelay')::int, 0),\n              COALESCE((options->>'retryBackoff')::bool, false),\n              (options->>'retryDelayMax')::int,\n              COALESCE((options->>'expireInSeconds')::int, 900),\n              COALESCE((options->>'retentionSeconds')::int, 1209600),\n              COALESCE((options->>'deleteAfterSeconds')::int, 604800),\n              COALESCE((options->>'warningQueueSize')::int, 0),\n              options->>'deadLetter',\n              COALESCE((options->>'partition')::bool, false),\n              tablename\n            )\n            ON CONFLICT DO NOTHING\n            RETURNING created_on\n          )\n          SELECT created_on into queue_created_on from q;\n\n          IF queue_created_on IS NULL OR options->>'partition' IS DISTINCT FROM 'true' THEN\n            RETURN;\n          END IF;\n\n          EXECUTE format('CREATE TABLE ${schema}.%I (LIKE ${schema}.job INCLUDING DEFAULTS)', tablename);\n\n          EXECUTE format('ALTER TABLE ${schema}.%1$I ADD PRIMARY KEY (name, id)', tablename);\n          EXECUTE format('ALTER TABLE ${schema}.%1$I ADD CONSTRAINT q_fkey FOREIGN KEY (name) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED', tablename);\n          EXECUTE format('ALTER TABLE ${schema}.%1$I ADD CONSTRAINT dlq_fkey FOREIGN KEY (dead_letter) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED', tablename);\n\n          EXECUTE format('CREATE INDEX %1$s_i5 ON ${schema}.%1$I (name, start_after) INCLUDE (priority, created_on, id) WHERE state < ''active''', tablename);\n          EXECUTE format('CREATE UNIQUE INDEX %1$s_i4 ON ${schema}.%1$I (name, singleton_on, COALESCE(singleton_key, '''')) WHERE state <> ''cancelled'' AND singleton_on IS NOT NULL', tablename);\n\n          IF options->>'policy' = 'short' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i1 ON ${schema}.%1$I (name, COALESCE(singleton_key, '''')) WHERE state = ''created'' AND policy = ''short''', tablename);\n          ELSIF options->>'policy' = 'singleton' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i2 ON ${schema}.%1$I (name, COALESCE(singleton_key, '''')) WHERE state = ''active'' AND policy = ''singleton''', tablename);\n          ELSIF options->>'policy' = 'stately' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i3 ON ${schema}.%1$I (name, state, COALESCE(singleton_key, '''')) WHERE state <= ''active'' AND policy = ''stately''', tablename);\n          ELSIF options->>'policy' = 'exclusive' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i6 ON ${schema}.%1$I (name, COALESCE(singleton_key, '''')) WHERE state <= ''active'' AND policy = ''exclusive''', tablename);\n          END IF;\n\n          EXECUTE format('ALTER TABLE ${schema}.%I ADD CONSTRAINT cjc CHECK (name=%L)', tablename, queue_name);\n          EXECUTE format('ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.%I FOR VALUES IN (%L)', tablename, queue_name);\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `,\n                `CREATE UNIQUE INDEX job_i6 ON ${schema}.job_common (name, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'exclusive'`\n            ],\n            uninstall: [\n                `DROP INDEX ${schema}.job_i6`\n            ]\n        },\n        {\n            release: '12.6.0',\n            version: 27,\n            previous: 26,\n            install: [\n                `ALTER TABLE ${schema}.version ADD COLUMN IF NOT EXISTS bam_on timestamp with time zone`,\n                `\n        CREATE TABLE IF NOT EXISTS ${schema}.bam (\n          id uuid PRIMARY KEY default gen_random_uuid(),\n          name text NOT NULL,\n          version int NOT NULL,\n          status text NOT NULL DEFAULT 'pending',\n          queue text,\n          table_name text NOT NULL,\n          command text NOT NULL,\n          error text,\n          created_on timestamp with time zone NOT NULL DEFAULT now(),\n          started_on timestamp with time zone,\n          completed_on timestamp with time zone\n        )\n        `,\n                `CREATE FUNCTION ${schema}.job_table_format(command text, table_name text)\n          RETURNS text AS\n          $$\n            SELECT format(\n              replace(\n                replace(command, '.job', '.%1$I'),\n                'job_i', '%1$s_i'\n              ),\n              table_name\n            );\n          $$\n          LANGUAGE sql IMMUTABLE;\n        `,\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.job_table_run_async(command_name text, version int, command text, tbl_name text DEFAULT NULL, queue_name text DEFAULT NULL)\n        RETURNS VOID AS\n        $$\n        BEGIN\n          IF queue_name IS NOT NULL THEN\n            SELECT table_name INTO tbl_name FROM ${schema}.queue WHERE name = queue_name;\n          END IF;\n\n          IF tbl_name IS NOT NULL THEN\n            INSERT INTO ${schema}.bam (name, version, status, queue, table_name, command)\n            VALUES (\n              command_name,\n              version,\n              'pending',\n              queue_name,\n              tbl_name,\n              ${schema}.job_table_format(command, tbl_name)\n            );\n            RETURN;\n          END IF;\n\n          INSERT INTO ${schema}.bam (name, version, status, queue, table_name, command)\n          SELECT\n            command_name,\n            version,\n            'pending',\n            NULL,\n            'job_common',\n            ${schema}.job_table_format(command, 'job_common')\n          UNION ALL\n          SELECT\n            command_name,\n            version,\n            'pending',\n            queue.name,\n            queue.table_name,\n            ${schema}.job_table_format(command, queue.table_name)\n          FROM ${schema}.queue\n          WHERE partition = true;\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `,\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.job_table_run(command text, tbl_name text DEFAULT NULL, queue_name text DEFAULT NULL)\n        RETURNS VOID AS\n        $$\n        DECLARE\n          tbl RECORD;\n        BEGIN\n          IF queue_name IS NOT NULL THEN\n            SELECT table_name INTO tbl_name FROM ${schema}.queue WHERE name = queue_name;\n          END IF;\n\n          IF tbl_name IS NOT NULL THEN\n            EXECUTE ${schema}.job_table_format(command, tbl_name);\n            RETURN;\n          END IF;\n\n          EXECUTE ${schema}.job_table_format(command, 'job_common');\n\n          FOR tbl IN SELECT table_name FROM ${schema}.queue WHERE partition = true\n          LOOP\n            EXECUTE ${schema}.job_table_format(command, tbl.table_name);\n          END LOOP;\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `,\n                `ALTER TABLE ${schema}.job ADD COLUMN IF NOT EXISTS group_id text`,\n                `ALTER TABLE ${schema}.job ADD COLUMN IF NOT EXISTS group_tier text`,\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.create_queue(queue_name text, options jsonb)\n        RETURNS VOID AS\n        $$\n        DECLARE\n          tablename varchar := CASE WHEN options->>'partition' = 'true'\n                                THEN 'j' || encode(sha224(queue_name::bytea), 'hex')\n                                ELSE 'job_common'\n                                END;\n          queue_created_on timestamptz;\n        BEGIN\n\n          WITH q as (\n            INSERT INTO ${schema}.queue (\n              name,\n              policy,\n              retry_limit,\n              retry_delay,\n              retry_backoff,\n              retry_delay_max,\n              expire_seconds,\n              retention_seconds,\n              deletion_seconds,\n              warning_queued,\n              dead_letter,\n              partition,\n              table_name\n            )\n            VALUES (\n              queue_name,\n              options->>'policy',\n              COALESCE((options->>'retryLimit')::int, 2),\n              COALESCE((options->>'retryDelay')::int, 0),\n              COALESCE((options->>'retryBackoff')::bool, false),\n              (options->>'retryDelayMax')::int,\n              COALESCE((options->>'expireInSeconds')::int, 900),\n              COALESCE((options->>'retentionSeconds')::int, 1209600),\n              COALESCE((options->>'deleteAfterSeconds')::int, 604800),\n              COALESCE((options->>'warningQueueSize')::int, 0),\n              options->>'deadLetter',\n              COALESCE((options->>'partition')::bool, false),\n              tablename\n            )\n            ON CONFLICT DO NOTHING\n            RETURNING created_on\n          )\n          SELECT created_on into queue_created_on from q;\n\n          IF queue_created_on IS NULL OR options->>'partition' IS DISTINCT FROM 'true' THEN\n            RETURN;\n          END IF;\n\n          EXECUTE format('CREATE TABLE ${schema}.%I (LIKE ${schema}.job INCLUDING DEFAULTS)', tablename);\n\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD PRIMARY KEY (name, id)$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT q_fkey FOREIGN KEY (name) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT dlq_fkey FOREIGN KEY (dead_letter) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED$cmd$, tablename);\n\n          EXECUTE ${schema}.job_table_format($cmd$CREATE INDEX job_i5 ON ${schema}.job (name, start_after) INCLUDE (priority, created_on, id) WHERE state < 'active'$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i4 ON ${schema}.job (name, singleton_on, COALESCE(singleton_key, '')) WHERE state <> 'cancelled' AND singleton_on IS NOT NULL$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$CREATE INDEX job_i7 ON ${schema}.job (name, group_id) WHERE state = 'active' AND group_id IS NOT NULL$cmd$, tablename);\n\n          IF options->>'policy' = 'short' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i1 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = 'created' AND policy = 'short'$cmd$, tablename);\n          ELSIF options->>'policy' = 'singleton' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i2 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = 'active' AND policy = 'singleton'$cmd$, tablename);\n          ELSIF options->>'policy' = 'stately' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i3 ON ${schema}.job (name, state, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'stately'$cmd$, tablename);\n          ELSIF options->>'policy' = 'exclusive' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i6 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'exclusive'$cmd$, tablename);\n          END IF;\n\n          EXECUTE format('ALTER TABLE ${schema}.%I ADD CONSTRAINT cjc CHECK (name=%L)', tablename, queue_name);\n          EXECUTE format('ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.%I FOR VALUES IN (%L)', tablename, queue_name);\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `,\n                `ALTER INDEX IF EXISTS ${schema}.job_i1 RENAME TO job_common_i1`,\n                `ALTER INDEX IF EXISTS ${schema}.job_i2 RENAME TO job_common_i2`,\n                `ALTER INDEX IF EXISTS ${schema}.job_i3 RENAME TO job_common_i3`,\n                `ALTER INDEX IF EXISTS ${schema}.job_i4 RENAME TO job_common_i4`,\n                `ALTER INDEX IF EXISTS ${schema}.job_i5 RENAME TO job_common_i5`,\n                `ALTER INDEX IF EXISTS ${schema}.job_i6 RENAME TO job_common_i6`,\n                `ALTER INDEX IF EXISTS ${schema}.job_i7 RENAME TO job_common_i7`\n            ],\n            async: [\n                `SELECT ${schema}.job_table_run_async(\n          'group_concurency_index',\n          $VERSION$,\n          $$\n          CREATE INDEX CONCURRENTLY job_i7 ON ${schema}.job (name, group_id) WHERE state = 'active' AND group_id IS NOT NULL\n          $$\n        )`\n            ],\n            uninstall: [\n                `ALTER INDEX ${schema}.job_common_i6 RENAME TO job_i6`,\n                `ALTER INDEX ${schema}.job_common_i5 RENAME TO job_i5`,\n                `ALTER INDEX ${schema}.job_common_i4 RENAME TO job_i4`,\n                `ALTER INDEX ${schema}.job_common_i3 RENAME TO job_i3`,\n                `ALTER INDEX ${schema}.job_common_i2 RENAME TO job_i2`,\n                `ALTER INDEX ${schema}.job_common_i1 RENAME TO job_i1`,\n                `SELECT ${schema}.job_table_run('DROP INDEX ${schema}.job_i7')`,\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.create_queue(queue_name text, options jsonb)\n        RETURNS VOID AS\n        $$\n        DECLARE\n          tablename varchar := CASE WHEN options->>'partition' = 'true'\n                                THEN 'j' || encode(sha224(queue_name::bytea), 'hex')\n                                ELSE 'job_common'\n                                END;\n          queue_created_on timestamptz;\n        BEGIN\n\n          WITH q as (\n            INSERT INTO ${schema}.queue (\n              name,\n              policy,\n              retry_limit,\n              retry_delay,\n              retry_backoff,\n              retry_delay_max,\n              expire_seconds,\n              retention_seconds,\n              deletion_seconds,\n              warning_queued,\n              dead_letter,\n              partition,\n              table_name\n            )\n            VALUES (\n              queue_name,\n              options->>'policy',\n              COALESCE((options->>'retryLimit')::int, 2),\n              COALESCE((options->>'retryDelay')::int, 0),\n              COALESCE((options->>'retryBackoff')::bool, false),\n              (options->>'retryDelayMax')::int,\n              COALESCE((options->>'expireInSeconds')::int, 900),\n              COALESCE((options->>'retentionSeconds')::int, 1209600),\n              COALESCE((options->>'deleteAfterSeconds')::int, 604800),\n              COALESCE((options->>'warningQueueSize')::int, 0),\n              options->>'deadLetter',\n              COALESCE((options->>'partition')::bool, false),\n              tablename\n            )\n            ON CONFLICT DO NOTHING\n            RETURNING created_on\n          )\n          SELECT created_on into queue_created_on from q;\n\n          IF queue_created_on IS NULL OR options->>'partition' IS DISTINCT FROM 'true' THEN\n            RETURN;\n          END IF;\n\n          EXECUTE format('CREATE TABLE ${schema}.%I (LIKE ${schema}.job INCLUDING DEFAULTS)', tablename);\n\n          EXECUTE format('ALTER TABLE ${schema}.%1$I ADD PRIMARY KEY (name, id)', tablename);\n          EXECUTE format('ALTER TABLE ${schema}.%1$I ADD CONSTRAINT q_fkey FOREIGN KEY (name) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED', tablename);\n          EXECUTE format('ALTER TABLE ${schema}.%1$I ADD CONSTRAINT dlq_fkey FOREIGN KEY (dead_letter) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED', tablename);\n\n          EXECUTE format('CREATE INDEX %1$s_i5 ON ${schema}.%1$I (name, start_after) INCLUDE (priority, created_on, id) WHERE state < ''active''', tablename);\n          EXECUTE format('CREATE UNIQUE INDEX %1$s_i4 ON ${schema}.%1$I (name, singleton_on, COALESCE(singleton_key, '''')) WHERE state <> ''cancelled'' AND singleton_on IS NOT NULL', tablename);\n\n          IF options->>'policy' = 'short' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i1 ON ${schema}.%1$I (name, COALESCE(singleton_key, '''')) WHERE state = ''created'' AND policy = ''short''', tablename);\n          ELSIF options->>'policy' = 'singleton' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i2 ON ${schema}.%1$I (name, COALESCE(singleton_key, '''')) WHERE state = ''active'' AND policy = ''singleton''', tablename);\n          ELSIF options->>'policy' = 'stately' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i3 ON ${schema}.%1$I (name, state, COALESCE(singleton_key, '''')) WHERE state <= ''active'' AND policy = ''stately''', tablename);\n          ELSIF options->>'policy' = 'exclusive' THEN\n            EXECUTE format('CREATE UNIQUE INDEX %1$s_i6 ON ${schema}.%1$I (name, COALESCE(singleton_key, '''')) WHERE state <= ''active'' AND policy = ''exclusive''', tablename);\n          END IF;\n\n          EXECUTE format('ALTER TABLE ${schema}.%I ADD CONSTRAINT cjc CHECK (name=%L)', tablename, queue_name);\n          EXECUTE format('ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.%I FOR VALUES IN (%L)', tablename, queue_name);\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `,\n                `DROP FUNCTION ${schema}.job_table_run(text, text, text)`,\n                `DROP FUNCTION ${schema}.job_table_run_async(text, int, text, text, text)`,\n                `DROP FUNCTION ${schema}.job_table_format(text, text)`,\n                `DROP TABLE ${schema}.bam`,\n                `ALTER TABLE ${schema}.version DROP COLUMN bam_on`,\n                `ALTER TABLE ${schema}.job DROP COLUMN group_tier`,\n                `ALTER TABLE ${schema}.job DROP COLUMN group_id`\n            ]\n        },\n        {\n            release: '12.10.0',\n            version: 28,\n            previous: 27,\n            install: [\n                // Create key_strict_fifo CHECK constraint on job_common (the default partition)\n                `SELECT ${schema}.job_table_run($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT job_key_strict_fifo_singleton_key_check CHECK (NOT (policy = 'key_strict_fifo' AND singleton_key IS NULL))$cmd$, 'job_common')`,\n                // Update create_queue function to include the FIFO index for partitioned tables\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.create_queue(queue_name text, options jsonb)\n        RETURNS VOID AS\n        $$\n        DECLARE\n          tablename varchar := CASE WHEN options->>'partition' = 'true'\n                                THEN 'j' || encode(sha224(queue_name::bytea), 'hex')\n                                ELSE 'job_common'\n                                END;\n          queue_created_on timestamptz;\n        BEGIN\n\n          WITH q as (\n            INSERT INTO ${schema}.queue (\n              name,\n              policy,\n              retry_limit,\n              retry_delay,\n              retry_backoff,\n              retry_delay_max,\n              expire_seconds,\n              retention_seconds,\n              deletion_seconds,\n              warning_queued,\n              dead_letter,\n              partition,\n              table_name\n            )\n            VALUES (\n              queue_name,\n              options->>'policy',\n              COALESCE((options->>'retryLimit')::int, 2),\n              COALESCE((options->>'retryDelay')::int, 0),\n              COALESCE((options->>'retryBackoff')::bool, false),\n              (options->>'retryDelayMax')::int,\n              COALESCE((options->>'expireInSeconds')::int, 900),\n              COALESCE((options->>'retentionSeconds')::int, 1209600),\n              COALESCE((options->>'deleteAfterSeconds')::int, 604800),\n              COALESCE((options->>'warningQueueSize')::int, 0),\n              options->>'deadLetter',\n              COALESCE((options->>'partition')::bool, false),\n              tablename\n            )\n            ON CONFLICT DO NOTHING\n            RETURNING created_on\n          )\n          SELECT created_on into queue_created_on from q;\n\n          IF queue_created_on IS NULL OR options->>'partition' IS DISTINCT FROM 'true' THEN\n            RETURN;\n          END IF;\n\n          EXECUTE format('CREATE TABLE ${schema}.%I (LIKE ${schema}.job INCLUDING DEFAULTS)', tablename);\n\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD PRIMARY KEY (name, id)$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT q_fkey FOREIGN KEY (name) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT dlq_fkey FOREIGN KEY (dead_letter) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED$cmd$, tablename);\n\n          EXECUTE ${schema}.job_table_format($cmd$CREATE INDEX job_i5 ON ${schema}.job (name, start_after) INCLUDE (priority, created_on, id) WHERE state < 'active'$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i4 ON ${schema}.job (name, singleton_on, COALESCE(singleton_key, '')) WHERE state <> 'cancelled' AND singleton_on IS NOT NULL$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$CREATE INDEX job_i7 ON ${schema}.job (name, group_id) WHERE state = 'active' AND group_id IS NOT NULL$cmd$, tablename);\n\n          IF options->>'policy' = 'short' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i1 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = 'created' AND policy = 'short'$cmd$, tablename);\n          ELSIF options->>'policy' = 'singleton' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i2 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = 'active' AND policy = 'singleton'$cmd$, tablename);\n          ELSIF options->>'policy' = 'stately' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i3 ON ${schema}.job (name, state, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'stately'$cmd$, tablename);\n          ELSIF options->>'policy' = 'exclusive' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i6 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'exclusive'$cmd$, tablename);\n          ELSIF options->>'policy' = 'key_strict_fifo' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i8 ON ${schema}.job (name, singleton_key) WHERE state IN ('active', 'retry', 'failed') AND policy = 'key_strict_fifo'$cmd$, tablename);\n            EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT job_key_strict_fifo_singleton_key_check CHECK (NOT (policy = 'key_strict_fifo' AND singleton_key IS NULL))$cmd$, tablename);\n          END IF;\n\n          EXECUTE format('ALTER TABLE ${schema}.%I ADD CONSTRAINT cjc CHECK (name=%L)', tablename, queue_name);\n          EXECUTE format('ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.%I FOR VALUES IN (%L)', tablename, queue_name);\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `\n            ],\n            async: [\n                `SELECT ${schema}.job_table_run_async(\n          'key_strict_fifo_index',\n          $VERSION$,\n          $$\n          CREATE UNIQUE INDEX CONCURRENTLY job_i8 ON ${schema}.job (name, singleton_key) WHERE state IN ('active', 'retry', 'failed') AND policy = 'key_strict_fifo'\n          $$\n        , 'job_common')`\n            ],\n            uninstall: [\n                `SELECT ${schema}.job_table_run('DROP INDEX IF EXISTS ${schema}.job_i8')`,\n                `SELECT ${schema}.job_table_run('ALTER TABLE ${schema}.job DROP CONSTRAINT IF EXISTS job_key_strict_fifo_singleton_key_check')`,\n                // Restore previous version of create_queue function (without key_strict_fifo support)\n                `\n        CREATE OR REPLACE FUNCTION ${schema}.create_queue(queue_name text, options jsonb)\n        RETURNS VOID AS\n        $$\n        DECLARE\n          tablename varchar := CASE WHEN options->>'partition' = 'true'\n                                THEN 'j' || encode(sha224(queue_name::bytea), 'hex')\n                                ELSE 'job_common'\n                                END;\n          queue_created_on timestamptz;\n        BEGIN\n\n          WITH q as (\n            INSERT INTO ${schema}.queue (\n              name,\n              policy,\n              retry_limit,\n              retry_delay,\n              retry_backoff,\n              retry_delay_max,\n              expire_seconds,\n              retention_seconds,\n              deletion_seconds,\n              warning_queued,\n              dead_letter,\n              partition,\n              table_name\n            )\n            VALUES (\n              queue_name,\n              options->>'policy',\n              COALESCE((options->>'retryLimit')::int, 2),\n              COALESCE((options->>'retryDelay')::int, 0),\n              COALESCE((options->>'retryBackoff')::bool, false),\n              (options->>'retryDelayMax')::int,\n              COALESCE((options->>'expireInSeconds')::int, 900),\n              COALESCE((options->>'retentionSeconds')::int, 1209600),\n              COALESCE((options->>'deleteAfterSeconds')::int, 604800),\n              COALESCE((options->>'warningQueueSize')::int, 0),\n              options->>'deadLetter',\n              COALESCE((options->>'partition')::bool, false),\n              tablename\n            )\n            ON CONFLICT DO NOTHING\n            RETURNING created_on\n          )\n          SELECT created_on into queue_created_on from q;\n\n          IF queue_created_on IS NULL OR options->>'partition' IS DISTINCT FROM 'true' THEN\n            RETURN;\n          END IF;\n\n          EXECUTE format('CREATE TABLE ${schema}.%I (LIKE ${schema}.job INCLUDING DEFAULTS)', tablename);\n\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD PRIMARY KEY (name, id)$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT q_fkey FOREIGN KEY (name) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$ALTER TABLE ${schema}.job ADD CONSTRAINT dlq_fkey FOREIGN KEY (dead_letter) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED$cmd$, tablename);\n\n          EXECUTE ${schema}.job_table_format($cmd$CREATE INDEX job_i5 ON ${schema}.job (name, start_after) INCLUDE (priority, created_on, id) WHERE state < 'active'$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i4 ON ${schema}.job (name, singleton_on, COALESCE(singleton_key, '')) WHERE state <> 'cancelled' AND singleton_on IS NOT NULL$cmd$, tablename);\n          EXECUTE ${schema}.job_table_format($cmd$CREATE INDEX job_i7 ON ${schema}.job (name, group_id) WHERE state = 'active' AND group_id IS NOT NULL$cmd$, tablename);\n\n          IF options->>'policy' = 'short' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i1 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = 'created' AND policy = 'short'$cmd$, tablename);\n          ELSIF options->>'policy' = 'singleton' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i2 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = 'active' AND policy = 'singleton'$cmd$, tablename);\n          ELSIF options->>'policy' = 'stately' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i3 ON ${schema}.job (name, state, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'stately'$cmd$, tablename);\n          ELSIF options->>'policy' = 'exclusive' THEN\n            EXECUTE ${schema}.job_table_format($cmd$CREATE UNIQUE INDEX job_i6 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state <= 'active' AND policy = 'exclusive'$cmd$, tablename);\n          END IF;\n\n          EXECUTE format('ALTER TABLE ${schema}.%I ADD CONSTRAINT cjc CHECK (name=%L)', tablename, queue_name);\n          EXECUTE format('ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.%I FOR VALUES IN (%L)', tablename, queue_name);\n        END;\n        $$\n        LANGUAGE plpgsql;\n        `\n            ]\n        },\n        {\n            release: '12.11.0',\n            version: 29,\n            previous: 28,\n            install: [\n                `CREATE TABLE ${schema}.warning (\n          id uuid PRIMARY KEY default gen_random_uuid(),\n          type text NOT NULL,\n          message text NOT NULL,\n          data jsonb,\n          created_on timestamp with time zone NOT NULL DEFAULT now()\n        )`,\n                `CREATE INDEX warning_i1 ON ${schema}.warning (created_on DESC)`\n            ],\n            uninstall: [\n                `DROP INDEX ${schema}.warning_i1`,\n                `DROP TABLE ${schema}.warning`\n            ]\n        }\n    ];\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvbWlncmF0aW9uU3RvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpQztBQUNHO0FBQ0E7QUFDcEM7QUFDQSxxQkFBcUIsc0RBQXFCO0FBQzFDLGtCQUFrQixpREFBZ0I7QUFDbEMsV0FBVyw2Q0FBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0NBQU0sb0JBQW9CLFNBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0NBQU0sb0JBQW9CLFNBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLHNCQUFzQjtBQUMvQixJQUFJLHdDQUFNLHVDQUF1QyxTQUFTO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLE9BQU87QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLE9BQU87QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsT0FBTyxZQUFZLE9BQU87O0FBRW5FLHdDQUF3QyxPQUFPO0FBQy9DLHdDQUF3QyxPQUFPLDREQUE0RCxPQUFPO0FBQ2xILHdDQUF3QyxPQUFPLHFFQUFxRSxPQUFPOztBQUUzSCxvREFBb0QsT0FBTztBQUMzRCwyREFBMkQsT0FB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QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLE9BQU87QUFDckQ7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQzRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVlcC1hcmNoaXRlY3R1cmUvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvbWlncmF0aW9uU3RvcmUuanM/ZWRhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0IGZyb20gJ25vZGU6YXNzZXJ0JztcbmltcG9ydCAqIGFzIHBsYW5zIGZyb20gXCIuL3BsYW5zLmpzXCI7XG5pbXBvcnQgKiBhcyB0eXBlcyBmcm9tIFwiLi90eXBlcy5qc1wiO1xuZnVuY3Rpb24gZmxhdHRlbihzY2hlbWEsIGNvbW1hbmRzLCB2ZXJzaW9uKSB7XG4gICAgY29tbWFuZHMudW5zaGlmdChwbGFucy5hc3NlcnRNaWdyYXRpb24oc2NoZW1hLCB2ZXJzaW9uKSk7XG4gICAgY29tbWFuZHMucHVzaChwbGFucy5zZXRWZXJzaW9uKHNjaGVtYSwgdmVyc2lvbikpO1xuICAgIHJldHVybiBwbGFucy5sb2NrZWQoc2NoZW1hLCBjb21tYW5kcyk7XG59XG5mdW5jdGlvbiByb2xsYmFjayhzY2hlbWEsIHZlcnNpb24sIG1pZ3JhdGlvbnMpIHtcbiAgICBtaWdyYXRpb25zID0gbWlncmF0aW9ucyB8fCBnZXRBbGwoc2NoZW1hKTtcbiAgICBjb25zdCByZXN1bHQgPSBtaWdyYXRpb25zLmZpbmQoaSA9PiBpLnZlcnNpb24gPT09IHZlcnNpb24pO1xuICAgIGFzc2VydChyZXN1bHQsIGBWZXJzaW9uICR7dmVyc2lvbn0gbm90IGZvdW5kLmApO1xuICAgIHJldHVybiBmbGF0dGVuKHNjaGVtYSwgcmVzdWx0LnVuaW5zdGFsbCB8fCBbXSwgcmVzdWx0LnByZXZpb3VzKTtcbn1cbmZ1bmN0aW9uIG5leHQoc2NoZW1hLCB2ZXJzaW9uLCBtaWdyYXRpb25zKSB7XG4gICAgbWlncmF0aW9ucyA9IG1pZ3JhdGlvbnMgfHwgZ2V0QWxsKHNjaGVtYSk7XG4gICAgY29uc3QgcmVzdWx0ID0gbWlncmF0aW9ucy5maW5kKGkgPT4gaS5wcmV2aW91cyA9PT0gdmVyc2lvbik7XG4gICAgYXNzZXJ0KHJlc3VsdCwgYFZlcnNpb24gJHt2ZXJzaW9ufSBub3QgZm91bmQuYCk7XG4gICAgcmV0dXJuIGZsYXR0ZW4oc2NoZW1hLCByZXN1bHQuaW5zdGFsbCwgcmVzdWx0LnZlcnNpb24pO1xufVxuZnVuY3Rpb24gbWlncmF0ZShzY2hlbWEsIHZlcnNpb24sIG1pZ3JhdGlvbnMpIHtcbiAgICBtaWdyYXRpb25zID0gbWlncmF0aW9ucyB8fCBnZXRBbGwoc2NoZW1hKTtcbiAgICBjb25zdCByZXN1bHQgPSBtaWdyYXRpb25zXG4gICAgICAgIC5maWx0ZXIoaSA9PiBpLnByZXZpb3VzID49IHZlcnNpb24pXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnZlcnNpb24gLSBiLnZlcnNpb24pXG4gICAgICAgIC5yZWR1Y2UoKGFjYywgbWlncmF0aW9uKSA9PiB7XG4gICAgICAgIGFjYy5pbnN0YWxsID0gYWNjLmluc3RhbGwuY29uY2F0KG1pZ3JhdGlvbi5pbnN0YWxsKTtcbiAgICAgICAgaWYgKG1pZ3JhdGlvbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgYmFtQ29tbWFuZHMgPSBtaWdyYXRpb24uYXN5bmMubWFwKGNtZCA9PiBjbWQucmVwbGFjZSgvXFwkVkVSU0lPTlxcJC9nLCBTdHJpbmcobWlncmF0aW9uLnZlcnNpb24pKSk7XG4gICAgICAgICAgICBhY2MuaW5zdGFsbCA9IGFjYy5pbnN0YWxsLmNvbmNhdChiYW1Db21tYW5kcyk7XG4gICAgICAgIH1cbiAgICAgICAgYWNjLnZlcnNpb24gPSBtaWdyYXRpb24udmVyc2lvbjtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7IGluc3RhbGw6IFtdLCB2ZXJzaW9uIH0pO1xuICAgIGFzc2VydChyZXN1bHQuaW5zdGFsbC5sZW5ndGggPiAwLCBgVmVyc2lvbiAke3ZlcnNpb259IG5vdCBmb3VuZC5gKTtcbiAgICByZXR1cm4gZmxhdHRlbihzY2hlbWEsIHJlc3VsdC5pbnN0YWxsLCByZXN1bHQudmVyc2lvbik7XG59XG5mdW5jdGlvbiBnZXRBbGwoc2NoZW1hKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgICAgcmVsZWFzZTogJzExLjEuMCcsXG4gICAgICAgICAgICB2ZXJzaW9uOiAyNixcbiAgICAgICAgICAgIHByZXZpb3VzOiAyNSxcbiAgICAgICAgICAgIGluc3RhbGw6IFtcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgIENSRUFURSBPUiBSRVBMQUNFIEZVTkNUSU9OICR7c2NoZW1hfS5jcmVhdGVfcXVldWUocXVldWVfbmFtZSB0ZXh0LCBvcHRpb25zIGpzb25iKVxuICAgICAgICBSRVRVUk5TIFZPSUQgQVNcbiAgICAgICAgJCRcbiAgICAgICAgREVDTEFSRVxuICAgICAgICAgIHRhYmxlbmFtZSB2YXJjaGFyIDo9IENBU0UgV0hFTiBvcHRpb25zLT4+J3BhcnRpdGlvbicgPSAndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVEhFTiAnaicgfHwgZW5jb2RlKHNoYTIyNChxdWV1ZV9uYW1lOjpieXRlYSksICdoZXgnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTFNFICdqb2JfY29tbW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTkQ7XG4gICAgICAgICAgcXVldWVfY3JlYXRlZF9vbiB0aW1lc3RhbXB0ejtcbiAgICAgICAgQkVHSU5cblxuICAgICAgICAgIFdJVEggcSBhcyAoXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0ucXVldWUgKFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBwb2xpY3ksXG4gICAgICAgICAgICAgIHJldHJ5X2xpbWl0LFxuICAgICAgICAgICAgICByZXRyeV9kZWxheSxcbiAgICAgICAgICAgICAgcmV0cnlfYmFja29mZixcbiAgICAgICAgICAgICAgcmV0cnlfZGVsYXlfbWF4LFxuICAgICAgICAgICAgICBleHBpcmVfc2Vjb25kcyxcbiAgICAgICAgICAgICAgcmV0ZW50aW9uX3NlY29uZHMsXG4gICAgICAgICAgICAgIGRlbGV0aW9uX3NlY29uZHMsXG4gICAgICAgICAgICAgIHdhcm5pbmdfcXVldWVkLFxuICAgICAgICAgICAgICBkZWFkX2xldHRlcixcbiAgICAgICAgICAgICAgcGFydGl0aW9uLFxuICAgICAgICAgICAgICB0YWJsZV9uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBWQUxVRVMgKFxuICAgICAgICAgICAgICBxdWV1ZV9uYW1lLFxuICAgICAgICAgICAgICBvcHRpb25zLT4+J3BvbGljeScsXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldHJ5TGltaXQnKTo6aW50LCAyKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0cnlEZWxheScpOjppbnQsIDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRyeUJhY2tvZmYnKTo6Ym9vbCwgZmFsc2UpLFxuICAgICAgICAgICAgICAob3B0aW9ucy0+PidyZXRyeURlbGF5TWF4Jyk6OmludCxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nZXhwaXJlSW5TZWNvbmRzJyk6OmludCwgOTAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0ZW50aW9uU2Vjb25kcycpOjppbnQsIDEyMDk2MDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidkZWxldGVBZnRlclNlY29uZHMnKTo6aW50LCA2MDQ4MDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+Pid3YXJuaW5nUXVldWVTaXplJyk6OmludCwgMCksXG4gICAgICAgICAgICAgIG9wdGlvbnMtPj4nZGVhZExldHRlcicsXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3BhcnRpdGlvbicpOjpib29sLCBmYWxzZSksXG4gICAgICAgICAgICAgIHRhYmxlbmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgT04gQ09ORkxJQ1QgRE8gTk9USElOR1xuICAgICAgICAgICAgUkVUVVJOSU5HIGNyZWF0ZWRfb25cbiAgICAgICAgICApXG4gICAgICAgICAgU0VMRUNUIGNyZWF0ZWRfb24gaW50byBxdWV1ZV9jcmVhdGVkX29uIGZyb20gcTtcblxuICAgICAgICAgIElGIHF1ZXVlX2NyZWF0ZWRfb24gSVMgTlVMTCBPUiBvcHRpb25zLT4+J3BhcnRpdGlvbicgSVMgRElTVElOQ1QgRlJPTSAndHJ1ZScgVEhFTlxuICAgICAgICAgICAgUkVUVVJOO1xuICAgICAgICAgIEVORCBJRjtcblxuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVEFCTEUgJHtzY2hlbWF9LiVJIChMSUtFICR7c2NoZW1hfS5qb2IgSU5DTFVESU5HIERFRkFVTFRTKScsIHRhYmxlbmFtZSk7XG5cbiAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQUxURVIgVEFCTEUgJHtzY2hlbWF9LiUxJEkgQUREIFBSSU1BUlkgS0VZIChuYW1lLCBpZCknLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uJTEkSSBBREQgQ09OU1RSQUlOVCBxX2ZrZXkgRk9SRUlHTiBLRVkgKG5hbWUpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRUQnLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uJTEkSSBBREQgQ09OU1RSQUlOVCBkbHFfZmtleSBGT1JFSUdOIEtFWSAoZGVhZF9sZXR0ZXIpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRUQnLCB0YWJsZW5hbWUpO1xuXG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0NSRUFURSBJTkRFWCAlMSRzX2k1IE9OICR7c2NoZW1hfS4lMSRJIChuYW1lLCBzdGFydF9hZnRlcikgSU5DTFVERSAocHJpb3JpdHksIGNyZWF0ZWRfb24sIGlkKSBXSEVSRSBzdGF0ZSA8ICcnYWN0aXZlJycnLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVU5JUVVFIElOREVYICUxJHNfaTQgT04gJHtzY2hlbWF9LiUxJEkgKG5hbWUsIHNpbmdsZXRvbl9vbiwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycnJykpIFdIRVJFIHN0YXRlIDw+ICcnY2FuY2VsbGVkJycgQU5EIHNpbmdsZXRvbl9vbiBJUyBOT1QgTlVMTCcsIHRhYmxlbmFtZSk7XG5cbiAgICAgICAgICBJRiBvcHRpb25zLT4+J3BvbGljeScgPSAnc2hvcnQnIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVU5JUVVFIElOREVYICUxJHNfaTEgT04gJHtzY2hlbWF9LiUxJEkgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnJycpKSBXSEVSRSBzdGF0ZSA9ICcnY3JlYXRlZCcnIEFORCBwb2xpY3kgPSAnJ3Nob3J0JycnLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzaW5nbGV0b24nIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVU5JUVVFIElOREVYICUxJHNfaTIgT04gJHtzY2hlbWF9LiUxJEkgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnJycpKSBXSEVSRSBzdGF0ZSA9ICcnYWN0aXZlJycgQU5EIHBvbGljeSA9ICcnc2luZ2xldG9uJycnLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzdGF0ZWx5JyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQ1JFQVRFIFVOSVFVRSBJTkRFWCAlMSRzX2kzIE9OICR7c2NoZW1hfS4lMSRJIChuYW1lLCBzdGF0ZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycnJykpIFdIRVJFIHN0YXRlIDw9ICcnYWN0aXZlJycgQU5EIHBvbGljeSA9ICcnc3RhdGVseScnJywgdGFibGVuYW1lKTtcbiAgICAgICAgICBFTFNJRiBvcHRpb25zLT4+J3BvbGljeScgPSAnZXhjbHVzaXZlJyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQ1JFQVRFIFVOSVFVRSBJTkRFWCAlMSRzX2k2IE9OICR7c2NoZW1hfS4lMSRJIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJycnKSkgV0hFUkUgc3RhdGUgPD0gJydhY3RpdmUnJyBBTkQgcG9saWN5ID0gJydleGNsdXNpdmUnJycsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRU5EIElGO1xuXG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS4lSSBBREQgQ09OU1RSQUlOVCBjamMgQ0hFQ0sgKG5hbWU9JUwpJywgdGFibGVuYW1lLCBxdWV1ZV9uYW1lKTtcbiAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBVFRBQ0ggUEFSVElUSU9OICR7c2NoZW1hfS4lSSBGT1IgVkFMVUVTIElOICglTCknLCB0YWJsZW5hbWUsIHF1ZXVlX25hbWUpO1xuICAgICAgICBFTkQ7XG4gICAgICAgICQkXG4gICAgICAgIExBTkdVQUdFIHBscGdzcWw7XG4gICAgICAgIGAsXG4gICAgICAgICAgICAgICAgYENSRUFURSBVTklRVUUgSU5ERVggam9iX2k2IE9OICR7c2NoZW1hfS5qb2JfY29tbW9uIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlIDw9ICdhY3RpdmUnIEFORCBwb2xpY3kgPSAnZXhjbHVzaXZlJ2BcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB1bmluc3RhbGw6IFtcbiAgICAgICAgICAgICAgICBgRFJPUCBJTkRFWCAke3NjaGVtYX0uam9iX2k2YFxuICAgICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICByZWxlYXNlOiAnMTIuNi4wJyxcbiAgICAgICAgICAgIHZlcnNpb246IDI3LFxuICAgICAgICAgICAgcHJldmlvdXM6IDI2LFxuICAgICAgICAgICAgaW5zdGFsbDogW1xuICAgICAgICAgICAgICAgIGBBTFRFUiBUQUJMRSAke3NjaGVtYX0udmVyc2lvbiBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgYmFtX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZWAsXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyAke3NjaGVtYX0uYmFtIChcbiAgICAgICAgICBpZCB1dWlkIFBSSU1BUlkgS0VZIGRlZmF1bHQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICAgICAgbmFtZSB0ZXh0IE5PVCBOVUxMLFxuICAgICAgICAgIHZlcnNpb24gaW50IE5PVCBOVUxMLFxuICAgICAgICAgIHN0YXR1cyB0ZXh0IE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgICAgICAgIHF1ZXVlIHRleHQsXG4gICAgICAgICAgdGFibGVfbmFtZSB0ZXh0IE5PVCBOVUxMLFxuICAgICAgICAgIGNvbW1hbmQgdGV4dCBOT1QgTlVMTCxcbiAgICAgICAgICBlcnJvciB0ZXh0LFxuICAgICAgICAgIGNyZWF0ZWRfb24gdGltZXN0YW1wIHdpdGggdGltZSB6b25lIE5PVCBOVUxMIERFRkFVTFQgbm93KCksXG4gICAgICAgICAgc3RhcnRlZF9vbiB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUsXG4gICAgICAgICAgY29tcGxldGVkX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZVxuICAgICAgICApXG4gICAgICAgIGAsXG4gICAgICAgICAgICAgICAgYENSRUFURSBGVU5DVElPTiAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kIHRleHQsIHRhYmxlX25hbWUgdGV4dClcbiAgICAgICAgICBSRVRVUk5TIHRleHQgQVNcbiAgICAgICAgICAkJFxuICAgICAgICAgICAgU0VMRUNUIGZvcm1hdChcbiAgICAgICAgICAgICAgcmVwbGFjZShcbiAgICAgICAgICAgICAgICByZXBsYWNlKGNvbW1hbmQsICcuam9iJywgJy4lMSRJJyksXG4gICAgICAgICAgICAgICAgJ2pvYl9pJywgJyUxJHNfaSdcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgdGFibGVfbmFtZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAkJFxuICAgICAgICAgIExBTkdVQUdFIHNxbCBJTU1VVEFCTEU7XG4gICAgICAgIGAsXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICBDUkVBVEUgT1IgUkVQTEFDRSBGVU5DVElPTiAke3NjaGVtYX0uam9iX3RhYmxlX3J1bl9hc3luYyhjb21tYW5kX25hbWUgdGV4dCwgdmVyc2lvbiBpbnQsIGNvbW1hbmQgdGV4dCwgdGJsX25hbWUgdGV4dCBERUZBVUxUIE5VTEwsIHF1ZXVlX25hbWUgdGV4dCBERUZBVUxUIE5VTEwpXG4gICAgICAgIFJFVFVSTlMgVk9JRCBBU1xuICAgICAgICAkJFxuICAgICAgICBCRUdJTlxuICAgICAgICAgIElGIHF1ZXVlX25hbWUgSVMgTk9UIE5VTEwgVEhFTlxuICAgICAgICAgICAgU0VMRUNUIHRhYmxlX25hbWUgSU5UTyB0YmxfbmFtZSBGUk9NICR7c2NoZW1hfS5xdWV1ZSBXSEVSRSBuYW1lID0gcXVldWVfbmFtZTtcbiAgICAgICAgICBFTkQgSUY7XG5cbiAgICAgICAgICBJRiB0YmxfbmFtZSBJUyBOT1QgTlVMTCBUSEVOXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0uYmFtIChuYW1lLCB2ZXJzaW9uLCBzdGF0dXMsIHF1ZXVlLCB0YWJsZV9uYW1lLCBjb21tYW5kKVxuICAgICAgICAgICAgVkFMVUVTIChcbiAgICAgICAgICAgICAgY29tbWFuZF9uYW1lLFxuICAgICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgICAncGVuZGluZycsXG4gICAgICAgICAgICAgIHF1ZXVlX25hbWUsXG4gICAgICAgICAgICAgIHRibF9uYW1lLFxuICAgICAgICAgICAgICAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCB0YmxfbmFtZSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBSRVRVUk47XG4gICAgICAgICAgRU5EIElGO1xuXG4gICAgICAgICAgSU5TRVJUIElOVE8gJHtzY2hlbWF9LmJhbSAobmFtZSwgdmVyc2lvbiwgc3RhdHVzLCBxdWV1ZSwgdGFibGVfbmFtZSwgY29tbWFuZClcbiAgICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIGNvbW1hbmRfbmFtZSxcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICAncGVuZGluZycsXG4gICAgICAgICAgICBOVUxMLFxuICAgICAgICAgICAgJ2pvYl9jb21tb24nLFxuICAgICAgICAgICAgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoY29tbWFuZCwgJ2pvYl9jb21tb24nKVxuICAgICAgICAgIFVOSU9OIEFMTFxuICAgICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgY29tbWFuZF9uYW1lLFxuICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgICdwZW5kaW5nJyxcbiAgICAgICAgICAgIHF1ZXVlLm5hbWUsXG4gICAgICAgICAgICBxdWV1ZS50YWJsZV9uYW1lLFxuICAgICAgICAgICAgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoY29tbWFuZCwgcXVldWUudGFibGVfbmFtZSlcbiAgICAgICAgICBGUk9NICR7c2NoZW1hfS5xdWV1ZVxuICAgICAgICAgIFdIRVJFIHBhcnRpdGlvbiA9IHRydWU7XG4gICAgICAgIEVORDtcbiAgICAgICAgJCRcbiAgICAgICAgTEFOR1VBR0UgcGxwZ3NxbDtcbiAgICAgICAgYCxcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgIENSRUFURSBPUiBSRVBMQUNFIEZVTkNUSU9OICR7c2NoZW1hfS5qb2JfdGFibGVfcnVuKGNvbW1hbmQgdGV4dCwgdGJsX25hbWUgdGV4dCBERUZBVUxUIE5VTEwsIHF1ZXVlX25hbWUgdGV4dCBERUZBVUxUIE5VTEwpXG4gICAgICAgIFJFVFVSTlMgVk9JRCBBU1xuICAgICAgICAkJFxuICAgICAgICBERUNMQVJFXG4gICAgICAgICAgdGJsIFJFQ09SRDtcbiAgICAgICAgQkVHSU5cbiAgICAgICAgICBJRiBxdWV1ZV9uYW1lIElTIE5PVCBOVUxMIFRIRU5cbiAgICAgICAgICAgIFNFTEVDVCB0YWJsZV9uYW1lIElOVE8gdGJsX25hbWUgRlJPTSAke3NjaGVtYX0ucXVldWUgV0hFUkUgbmFtZSA9IHF1ZXVlX25hbWU7XG4gICAgICAgICAgRU5EIElGO1xuXG4gICAgICAgICAgSUYgdGJsX25hbWUgSVMgTk9UIE5VTEwgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCB0YmxfbmFtZSk7XG4gICAgICAgICAgICBSRVRVUk47XG4gICAgICAgICAgRU5EIElGO1xuXG4gICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCAnam9iX2NvbW1vbicpO1xuXG4gICAgICAgICAgRk9SIHRibCBJTiBTRUxFQ1QgdGFibGVfbmFtZSBGUk9NICR7c2NoZW1hfS5xdWV1ZSBXSEVSRSBwYXJ0aXRpb24gPSB0cnVlXG4gICAgICAgICAgTE9PUFxuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCB0YmwudGFibGVfbmFtZSk7XG4gICAgICAgICAgRU5EIExPT1A7XG4gICAgICAgIEVORDtcbiAgICAgICAgJCRcbiAgICAgICAgTEFOR1VBR0UgcGxwZ3NxbDtcbiAgICAgICAgYCxcbiAgICAgICAgICAgICAgICBgQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgZ3JvdXBfaWQgdGV4dGAsXG4gICAgICAgICAgICAgICAgYEFMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQUREIENPTFVNTiBJRiBOT1QgRVhJU1RTIGdyb3VwX3RpZXIgdGV4dGAsXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICBDUkVBVEUgT1IgUkVQTEFDRSBGVU5DVElPTiAke3NjaGVtYX0uY3JlYXRlX3F1ZXVlKHF1ZXVlX25hbWUgdGV4dCwgb3B0aW9ucyBqc29uYilcbiAgICAgICAgUkVUVVJOUyBWT0lEIEFTXG4gICAgICAgICQkXG4gICAgICAgIERFQ0xBUkVcbiAgICAgICAgICB0YWJsZW5hbWUgdmFyY2hhciA6PSBDQVNFIFdIRU4gb3B0aW9ucy0+PidwYXJ0aXRpb24nID0gJ3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRIRU4gJ2onIHx8IGVuY29kZShzaGEyMjQocXVldWVfbmFtZTo6Ynl0ZWEpLCAnaGV4JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRUxTRSAnam9iX2NvbW1vbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRU5EO1xuICAgICAgICAgIHF1ZXVlX2NyZWF0ZWRfb24gdGltZXN0YW1wdHo7XG4gICAgICAgIEJFR0lOXG5cbiAgICAgICAgICBXSVRIIHEgYXMgKFxuICAgICAgICAgICAgSU5TRVJUIElOVE8gJHtzY2hlbWF9LnF1ZXVlIChcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgcG9saWN5LFxuICAgICAgICAgICAgICByZXRyeV9saW1pdCxcbiAgICAgICAgICAgICAgcmV0cnlfZGVsYXksXG4gICAgICAgICAgICAgIHJldHJ5X2JhY2tvZmYsXG4gICAgICAgICAgICAgIHJldHJ5X2RlbGF5X21heCxcbiAgICAgICAgICAgICAgZXhwaXJlX3NlY29uZHMsXG4gICAgICAgICAgICAgIHJldGVudGlvbl9zZWNvbmRzLFxuICAgICAgICAgICAgICBkZWxldGlvbl9zZWNvbmRzLFxuICAgICAgICAgICAgICB3YXJuaW5nX3F1ZXVlZCxcbiAgICAgICAgICAgICAgZGVhZF9sZXR0ZXIsXG4gICAgICAgICAgICAgIHBhcnRpdGlvbixcbiAgICAgICAgICAgICAgdGFibGVfbmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgVkFMVUVTIChcbiAgICAgICAgICAgICAgcXVldWVfbmFtZSxcbiAgICAgICAgICAgICAgb3B0aW9ucy0+Pidwb2xpY3knLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRyeUxpbWl0Jyk6OmludCwgMiksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldHJ5RGVsYXknKTo6aW50LCAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0cnlCYWNrb2ZmJyk6OmJvb2wsIGZhbHNlKSxcbiAgICAgICAgICAgICAgKG9wdGlvbnMtPj4ncmV0cnlEZWxheU1heCcpOjppbnQsXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J2V4cGlyZUluU2Vjb25kcycpOjppbnQsIDkwMCksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldGVudGlvblNlY29uZHMnKTo6aW50LCAxMjA5NjAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nZGVsZXRlQWZ0ZXJTZWNvbmRzJyk6OmludCwgNjA0ODAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nd2FybmluZ1F1ZXVlU2l6ZScpOjppbnQsIDApLFxuICAgICAgICAgICAgICBvcHRpb25zLT4+J2RlYWRMZXR0ZXInLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidwYXJ0aXRpb24nKTo6Ym9vbCwgZmFsc2UpLFxuICAgICAgICAgICAgICB0YWJsZW5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIE9OIENPTkZMSUNUIERPIE5PVEhJTkdcbiAgICAgICAgICAgIFJFVFVSTklORyBjcmVhdGVkX29uXG4gICAgICAgICAgKVxuICAgICAgICAgIFNFTEVDVCBjcmVhdGVkX29uIGludG8gcXVldWVfY3JlYXRlZF9vbiBmcm9tIHE7XG5cbiAgICAgICAgICBJRiBxdWV1ZV9jcmVhdGVkX29uIElTIE5VTEwgT1Igb3B0aW9ucy0+PidwYXJ0aXRpb24nIElTIERJU1RJTkNUIEZST00gJ3RydWUnIFRIRU5cbiAgICAgICAgICAgIFJFVFVSTjtcbiAgICAgICAgICBFTkQgSUY7XG5cbiAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQ1JFQVRFIFRBQkxFICR7c2NoZW1hfS4lSSAoTElLRSAke3NjaGVtYX0uam9iIElOQ0xVRElORyBERUZBVUxUUyknLCB0YWJsZW5hbWUpO1xuXG4gICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJEFMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQUREIFBSSU1BUlkgS0VZIChuYW1lLCBpZCkkY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgQ09OU1RSQUlOVCBxX2ZrZXkgRk9SRUlHTiBLRVkgKG5hbWUpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRUQkY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgQ09OU1RSQUlOVCBkbHFfZmtleSBGT1JFSUdOIEtFWSAoZGVhZF9sZXR0ZXIpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRUQkY21kJCwgdGFibGVuYW1lKTtcblxuICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgSU5ERVggam9iX2k1IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIHN0YXJ0X2FmdGVyKSBJTkNMVURFIChwcmlvcml0eSwgY3JlYXRlZF9vbiwgaWQpIFdIRVJFIHN0YXRlIDwgJ2FjdGl2ZSckY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTQgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc2luZ2xldG9uX29uLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlIDw+ICdjYW5jZWxsZWQnIEFORCBzaW5nbGV0b25fb24gSVMgTk9UIE5VTEwkY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIElOREVYIGpvYl9pNyBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBncm91cF9pZCkgV0hFUkUgc3RhdGUgPSAnYWN0aXZlJyBBTkQgZ3JvdXBfaWQgSVMgTk9UIE5VTEwkY21kJCwgdGFibGVuYW1lKTtcblxuICAgICAgICAgIElGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzaG9ydCcgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJENSRUFURSBVTklRVUUgSU5ERVggam9iX2kxIE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPSAnY3JlYXRlZCcgQU5EIHBvbGljeSA9ICdzaG9ydCckY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFTFNJRiBvcHRpb25zLT4+J3BvbGljeScgPSAnc2luZ2xldG9uJyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTIgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycpKSBXSEVSRSBzdGF0ZSA9ICdhY3RpdmUnIEFORCBwb2xpY3kgPSAnc2luZ2xldG9uJyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzdGF0ZWx5JyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTMgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc3RhdGUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD0gJ2FjdGl2ZScgQU5EIHBvbGljeSA9ICdzdGF0ZWx5JyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdleGNsdXNpdmUnIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pNiBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlIDw9ICdhY3RpdmUnIEFORCBwb2xpY3kgPSAnZXhjbHVzaXZlJyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVORCBJRjtcblxuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uJUkgQUREIENPTlNUUkFJTlQgY2pjIENIRUNLIChuYW1lPSVMKScsIHRhYmxlbmFtZSwgcXVldWVfbmFtZSk7XG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQVRUQUNIIFBBUlRJVElPTiAke3NjaGVtYX0uJUkgRk9SIFZBTFVFUyBJTiAoJUwpJywgdGFibGVuYW1lLCBxdWV1ZV9uYW1lKTtcbiAgICAgICAgRU5EO1xuICAgICAgICAkJFxuICAgICAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICAgICAgICBgLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBJTkRFWCBJRiBFWElTVFMgJHtzY2hlbWF9LmpvYl9pMSBSRU5BTUUgVE8gam9iX2NvbW1vbl9pMWAsXG4gICAgICAgICAgICAgICAgYEFMVEVSIElOREVYIElGIEVYSVNUUyAke3NjaGVtYX0uam9iX2kyIFJFTkFNRSBUTyBqb2JfY29tbW9uX2kyYCxcbiAgICAgICAgICAgICAgICBgQUxURVIgSU5ERVggSUYgRVhJU1RTICR7c2NoZW1hfS5qb2JfaTMgUkVOQU1FIFRPIGpvYl9jb21tb25faTNgLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBJTkRFWCBJRiBFWElTVFMgJHtzY2hlbWF9LmpvYl9pNCBSRU5BTUUgVE8gam9iX2NvbW1vbl9pNGAsXG4gICAgICAgICAgICAgICAgYEFMVEVSIElOREVYIElGIEVYSVNUUyAke3NjaGVtYX0uam9iX2k1IFJFTkFNRSBUTyBqb2JfY29tbW9uX2k1YCxcbiAgICAgICAgICAgICAgICBgQUxURVIgSU5ERVggSUYgRVhJU1RTICR7c2NoZW1hfS5qb2JfaTYgUkVOQU1FIFRPIGpvYl9jb21tb25faTZgLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBJTkRFWCBJRiBFWElTVFMgJHtzY2hlbWF9LmpvYl9pNyBSRU5BTUUgVE8gam9iX2NvbW1vbl9pN2BcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhc3luYzogW1xuICAgICAgICAgICAgICAgIGBTRUxFQ1QgJHtzY2hlbWF9LmpvYl90YWJsZV9ydW5fYXN5bmMoXG4gICAgICAgICAgJ2dyb3VwX2NvbmN1cmVuY3lfaW5kZXgnLFxuICAgICAgICAgICRWRVJTSU9OJCxcbiAgICAgICAgICAkJFxuICAgICAgICAgIENSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgam9iX2k3IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIGdyb3VwX2lkKSBXSEVSRSBzdGF0ZSA9ICdhY3RpdmUnIEFORCBncm91cF9pZCBJUyBOT1QgTlVMTFxuICAgICAgICAgICQkXG4gICAgICAgIClgXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdW5pbnN0YWxsOiBbXG4gICAgICAgICAgICAgICAgYEFMVEVSIElOREVYICR7c2NoZW1hfS5qb2JfY29tbW9uX2k2IFJFTkFNRSBUTyBqb2JfaTZgLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBJTkRFWCAke3NjaGVtYX0uam9iX2NvbW1vbl9pNSBSRU5BTUUgVE8gam9iX2k1YCxcbiAgICAgICAgICAgICAgICBgQUxURVIgSU5ERVggJHtzY2hlbWF9LmpvYl9jb21tb25faTQgUkVOQU1FIFRPIGpvYl9pNGAsXG4gICAgICAgICAgICAgICAgYEFMVEVSIElOREVYICR7c2NoZW1hfS5qb2JfY29tbW9uX2kzIFJFTkFNRSBUTyBqb2JfaTNgLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBJTkRFWCAke3NjaGVtYX0uam9iX2NvbW1vbl9pMiBSRU5BTUUgVE8gam9iX2kyYCxcbiAgICAgICAgICAgICAgICBgQUxURVIgSU5ERVggJHtzY2hlbWF9LmpvYl9jb21tb25faTEgUkVOQU1FIFRPIGpvYl9pMWAsXG4gICAgICAgICAgICAgICAgYFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bignRFJPUCBJTkRFWCAke3NjaGVtYX0uam9iX2k3JylgLFxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgQ1JFQVRFIE9SIFJFUExBQ0UgRlVOQ1RJT04gJHtzY2hlbWF9LmNyZWF0ZV9xdWV1ZShxdWV1ZV9uYW1lIHRleHQsIG9wdGlvbnMganNvbmIpXG4gICAgICAgIFJFVFVSTlMgVk9JRCBBU1xuICAgICAgICAkJFxuICAgICAgICBERUNMQVJFXG4gICAgICAgICAgdGFibGVuYW1lIHZhcmNoYXIgOj0gQ0FTRSBXSEVOIG9wdGlvbnMtPj4ncGFydGl0aW9uJyA9ICd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSEVOICdqJyB8fCBlbmNvZGUoc2hhMjI0KHF1ZXVlX25hbWU6OmJ5dGVhKSwgJ2hleCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVMU0UgJ2pvYl9jb21tb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVORDtcbiAgICAgICAgICBxdWV1ZV9jcmVhdGVkX29uIHRpbWVzdGFtcHR6O1xuICAgICAgICBCRUdJTlxuXG4gICAgICAgICAgV0lUSCBxIGFzIChcbiAgICAgICAgICAgIElOU0VSVCBJTlRPICR7c2NoZW1hfS5xdWV1ZSAoXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIHBvbGljeSxcbiAgICAgICAgICAgICAgcmV0cnlfbGltaXQsXG4gICAgICAgICAgICAgIHJldHJ5X2RlbGF5LFxuICAgICAgICAgICAgICByZXRyeV9iYWNrb2ZmLFxuICAgICAgICAgICAgICByZXRyeV9kZWxheV9tYXgsXG4gICAgICAgICAgICAgIGV4cGlyZV9zZWNvbmRzLFxuICAgICAgICAgICAgICByZXRlbnRpb25fc2Vjb25kcyxcbiAgICAgICAgICAgICAgZGVsZXRpb25fc2Vjb25kcyxcbiAgICAgICAgICAgICAgd2FybmluZ19xdWV1ZWQsXG4gICAgICAgICAgICAgIGRlYWRfbGV0dGVyLFxuICAgICAgICAgICAgICBwYXJ0aXRpb24sXG4gICAgICAgICAgICAgIHRhYmxlX25hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFZBTFVFUyAoXG4gICAgICAgICAgICAgIHF1ZXVlX25hbWUsXG4gICAgICAgICAgICAgIG9wdGlvbnMtPj4ncG9saWN5JyxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0cnlMaW1pdCcpOjppbnQsIDIpLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRyeURlbGF5Jyk6OmludCwgMCksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldHJ5QmFja29mZicpOjpib29sLCBmYWxzZSksXG4gICAgICAgICAgICAgIChvcHRpb25zLT4+J3JldHJ5RGVsYXlNYXgnKTo6aW50LFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidleHBpcmVJblNlY29uZHMnKTo6aW50LCA5MDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRlbnRpb25TZWNvbmRzJyk6OmludCwgMTIwOTYwMCksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J2RlbGV0ZUFmdGVyU2Vjb25kcycpOjppbnQsIDYwNDgwMCksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3dhcm5pbmdRdWV1ZVNpemUnKTo6aW50LCAwKSxcbiAgICAgICAgICAgICAgb3B0aW9ucy0+PidkZWFkTGV0dGVyJyxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncGFydGl0aW9uJyk6OmJvb2wsIGZhbHNlKSxcbiAgICAgICAgICAgICAgdGFibGVuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBPTiBDT05GTElDVCBETyBOT1RISU5HXG4gICAgICAgICAgICBSRVRVUk5JTkcgY3JlYXRlZF9vblxuICAgICAgICAgIClcbiAgICAgICAgICBTRUxFQ1QgY3JlYXRlZF9vbiBpbnRvIHF1ZXVlX2NyZWF0ZWRfb24gZnJvbSBxO1xuXG4gICAgICAgICAgSUYgcXVldWVfY3JlYXRlZF9vbiBJUyBOVUxMIE9SIG9wdGlvbnMtPj4ncGFydGl0aW9uJyBJUyBESVNUSU5DVCBGUk9NICd0cnVlJyBUSEVOXG4gICAgICAgICAgICBSRVRVUk47XG4gICAgICAgICAgRU5EIElGO1xuXG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0NSRUFURSBUQUJMRSAke3NjaGVtYX0uJUkgKExJS0UgJHtzY2hlbWF9LmpvYiBJTkNMVURJTkcgREVGQVVMVFMpJywgdGFibGVuYW1lKTtcblxuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uJTEkSSBBREQgUFJJTUFSWSBLRVkgKG5hbWUsIGlkKScsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS4lMSRJIEFERCBDT05TVFJBSU5UIHFfZmtleSBGT1JFSUdOIEtFWSAobmFtZSkgUkVGRVJFTkNFUyAke3NjaGVtYX0ucXVldWUgKG5hbWUpIE9OIERFTEVURSBSRVNUUklDVCBERUZFUlJBQkxFIElOSVRJQUxMWSBERUZFUlJFRCcsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS4lMSRJIEFERCBDT05TVFJBSU5UIGRscV9ma2V5IEZPUkVJR04gS0VZIChkZWFkX2xldHRlcikgUkVGRVJFTkNFUyAke3NjaGVtYX0ucXVldWUgKG5hbWUpIE9OIERFTEVURSBSRVNUUklDVCBERUZFUlJBQkxFIElOSVRJQUxMWSBERUZFUlJFRCcsIHRhYmxlbmFtZSk7XG5cbiAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQ1JFQVRFIElOREVYICUxJHNfaTUgT04gJHtzY2hlbWF9LiUxJEkgKG5hbWUsIHN0YXJ0X2FmdGVyKSBJTkNMVURFIChwcmlvcml0eSwgY3JlYXRlZF9vbiwgaWQpIFdIRVJFIHN0YXRlIDwgJydhY3RpdmUnJycsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0NSRUFURSBVTklRVUUgSU5ERVggJTEkc19pNCBPTiAke3NjaGVtYX0uJTEkSSAobmFtZSwgc2luZ2xldG9uX29uLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJycnKSkgV0hFUkUgc3RhdGUgPD4gJydjYW5jZWxsZWQnJyBBTkQgc2luZ2xldG9uX29uIElTIE5PVCBOVUxMJywgdGFibGVuYW1lKTtcblxuICAgICAgICAgIElGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzaG9ydCcgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0NSRUFURSBVTklRVUUgSU5ERVggJTEkc19pMSBPTiAke3NjaGVtYX0uJTEkSSAobmFtZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycnJykpIFdIRVJFIHN0YXRlID0gJydjcmVhdGVkJycgQU5EIHBvbGljeSA9ICcnc2hvcnQnJycsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ3NpbmdsZXRvbicgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0NSRUFURSBVTklRVUUgSU5ERVggJTEkc19pMiBPTiAke3NjaGVtYX0uJTEkSSAobmFtZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycnJykpIFdIRVJFIHN0YXRlID0gJydhY3RpdmUnJyBBTkQgcG9saWN5ID0gJydzaW5nbGV0b24nJycsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ3N0YXRlbHknIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVU5JUVVFIElOREVYICUxJHNfaTMgT04gJHtzY2hlbWF9LiUxJEkgKG5hbWUsIHN0YXRlLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJycnKSkgV0hFUkUgc3RhdGUgPD0gJydhY3RpdmUnJyBBTkQgcG9saWN5ID0gJydzdGF0ZWx5JycnLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdleGNsdXNpdmUnIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVU5JUVVFIElOREVYICUxJHNfaTYgT04gJHtzY2hlbWF9LiUxJEkgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnJycpKSBXSEVSRSBzdGF0ZSA8PSAnJ2FjdGl2ZScnIEFORCBwb2xpY3kgPSAnJ2V4Y2x1c2l2ZScnJywgdGFibGVuYW1lKTtcbiAgICAgICAgICBFTkQgSUY7XG5cbiAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQUxURVIgVEFCTEUgJHtzY2hlbWF9LiVJIEFERCBDT05TVFJBSU5UIGNqYyBDSEVDSyAobmFtZT0lTCknLCB0YWJsZW5hbWUsIHF1ZXVlX25hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIEFUVEFDSCBQQVJUSVRJT04gJHtzY2hlbWF9LiVJIEZPUiBWQUxVRVMgSU4gKCVMKScsIHRhYmxlbmFtZSwgcXVldWVfbmFtZSk7XG4gICAgICAgIEVORDtcbiAgICAgICAgJCRcbiAgICAgICAgTEFOR1VBR0UgcGxwZ3NxbDtcbiAgICAgICAgYCxcbiAgICAgICAgICAgICAgICBgRFJPUCBGVU5DVElPTiAke3NjaGVtYX0uam9iX3RhYmxlX3J1bih0ZXh0LCB0ZXh0LCB0ZXh0KWAsXG4gICAgICAgICAgICAgICAgYERST1AgRlVOQ1RJT04gJHtzY2hlbWF9LmpvYl90YWJsZV9ydW5fYXN5bmModGV4dCwgaW50LCB0ZXh0LCB0ZXh0LCB0ZXh0KWAsXG4gICAgICAgICAgICAgICAgYERST1AgRlVOQ1RJT04gJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQodGV4dCwgdGV4dClgLFxuICAgICAgICAgICAgICAgIGBEUk9QIFRBQkxFICR7c2NoZW1hfS5iYW1gLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBUQUJMRSAke3NjaGVtYX0udmVyc2lvbiBEUk9QIENPTFVNTiBiYW1fb25gLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIERST1AgQ09MVU1OIGdyb3VwX3RpZXJgLFxuICAgICAgICAgICAgICAgIGBBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIERST1AgQ09MVU1OIGdyb3VwX2lkYFxuICAgICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICByZWxlYXNlOiAnMTIuMTAuMCcsXG4gICAgICAgICAgICB2ZXJzaW9uOiAyOCxcbiAgICAgICAgICAgIHByZXZpb3VzOiAyNyxcbiAgICAgICAgICAgIGluc3RhbGw6IFtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUga2V5X3N0cmljdF9maWZvIENIRUNLIGNvbnN0cmFpbnQgb24gam9iX2NvbW1vbiAodGhlIGRlZmF1bHQgcGFydGl0aW9uKVxuICAgICAgICAgICAgICAgIGBTRUxFQ1QgJHtzY2hlbWF9LmpvYl90YWJsZV9ydW4oJGNtZCRBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIEFERCBDT05TVFJBSU5UIGpvYl9rZXlfc3RyaWN0X2ZpZm9fc2luZ2xldG9uX2tleV9jaGVjayBDSEVDSyAoTk9UIChwb2xpY3kgPSAna2V5X3N0cmljdF9maWZvJyBBTkQgc2luZ2xldG9uX2tleSBJUyBOVUxMKSkkY21kJCwgJ2pvYl9jb21tb24nKWAsXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNyZWF0ZV9xdWV1ZSBmdW5jdGlvbiB0byBpbmNsdWRlIHRoZSBGSUZPIGluZGV4IGZvciBwYXJ0aXRpb25lZCB0YWJsZXNcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgIENSRUFURSBPUiBSRVBMQUNFIEZVTkNUSU9OICR7c2NoZW1hfS5jcmVhdGVfcXVldWUocXVldWVfbmFtZSB0ZXh0LCBvcHRpb25zIGpzb25iKVxuICAgICAgICBSRVRVUk5TIFZPSUQgQVNcbiAgICAgICAgJCRcbiAgICAgICAgREVDTEFSRVxuICAgICAgICAgIHRhYmxlbmFtZSB2YXJjaGFyIDo9IENBU0UgV0hFTiBvcHRpb25zLT4+J3BhcnRpdGlvbicgPSAndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVEhFTiAnaicgfHwgZW5jb2RlKHNoYTIyNChxdWV1ZV9uYW1lOjpieXRlYSksICdoZXgnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTFNFICdqb2JfY29tbW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTkQ7XG4gICAgICAgICAgcXVldWVfY3JlYXRlZF9vbiB0aW1lc3RhbXB0ejtcbiAgICAgICAgQkVHSU5cblxuICAgICAgICAgIFdJVEggcSBhcyAoXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0ucXVldWUgKFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBwb2xpY3ksXG4gICAgICAgICAgICAgIHJldHJ5X2xpbWl0LFxuICAgICAgICAgICAgICByZXRyeV9kZWxheSxcbiAgICAgICAgICAgICAgcmV0cnlfYmFja29mZixcbiAgICAgICAgICAgICAgcmV0cnlfZGVsYXlfbWF4LFxuICAgICAgICAgICAgICBleHBpcmVfc2Vjb25kcyxcbiAgICAgICAgICAgICAgcmV0ZW50aW9uX3NlY29uZHMsXG4gICAgICAgICAgICAgIGRlbGV0aW9uX3NlY29uZHMsXG4gICAgICAgICAgICAgIHdhcm5pbmdfcXVldWVkLFxuICAgICAgICAgICAgICBkZWFkX2xldHRlcixcbiAgICAgICAgICAgICAgcGFydGl0aW9uLFxuICAgICAgICAgICAgICB0YWJsZV9uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBWQUxVRVMgKFxuICAgICAgICAgICAgICBxdWV1ZV9uYW1lLFxuICAgICAgICAgICAgICBvcHRpb25zLT4+J3BvbGljeScsXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldHJ5TGltaXQnKTo6aW50LCAyKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0cnlEZWxheScpOjppbnQsIDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRyeUJhY2tvZmYnKTo6Ym9vbCwgZmFsc2UpLFxuICAgICAgICAgICAgICAob3B0aW9ucy0+PidyZXRyeURlbGF5TWF4Jyk6OmludCxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nZXhwaXJlSW5TZWNvbmRzJyk6OmludCwgOTAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0ZW50aW9uU2Vjb25kcycpOjppbnQsIDEyMDk2MDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidkZWxldGVBZnRlclNlY29uZHMnKTo6aW50LCA2MDQ4MDApLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+Pid3YXJuaW5nUXVldWVTaXplJyk6OmludCwgMCksXG4gICAgICAgICAgICAgIG9wdGlvbnMtPj4nZGVhZExldHRlcicsXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3BhcnRpdGlvbicpOjpib29sLCBmYWxzZSksXG4gICAgICAgICAgICAgIHRhYmxlbmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgT04gQ09ORkxJQ1QgRE8gTk9USElOR1xuICAgICAgICAgICAgUkVUVVJOSU5HIGNyZWF0ZWRfb25cbiAgICAgICAgICApXG4gICAgICAgICAgU0VMRUNUIGNyZWF0ZWRfb24gaW50byBxdWV1ZV9jcmVhdGVkX29uIGZyb20gcTtcblxuICAgICAgICAgIElGIHF1ZXVlX2NyZWF0ZWRfb24gSVMgTlVMTCBPUiBvcHRpb25zLT4+J3BhcnRpdGlvbicgSVMgRElTVElOQ1QgRlJPTSAndHJ1ZScgVEhFTlxuICAgICAgICAgICAgUkVUVVJOO1xuICAgICAgICAgIEVORCBJRjtcblxuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVEFCTEUgJHtzY2hlbWF9LiVJIChMSUtFICR7c2NoZW1hfS5qb2IgSU5DTFVESU5HIERFRkFVTFRTKScsIHRhYmxlbmFtZSk7XG5cbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgUFJJTUFSWSBLRVkgKG5hbWUsIGlkKSRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIEFERCBDT05TVFJBSU5UIHFfZmtleSBGT1JFSUdOIEtFWSAobmFtZSkgUkVGRVJFTkNFUyAke3NjaGVtYX0ucXVldWUgKG5hbWUpIE9OIERFTEVURSBSRVNUUklDVCBERUZFUlJBQkxFIElOSVRJQUxMWSBERUZFUlJFRCRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIEFERCBDT05TVFJBSU5UIGRscV9ma2V5IEZPUkVJR04gS0VZIChkZWFkX2xldHRlcikgUkVGRVJFTkNFUyAke3NjaGVtYX0ucXVldWUgKG5hbWUpIE9OIERFTEVURSBSRVNUUklDVCBERUZFUlJBQkxFIElOSVRJQUxMWSBERUZFUlJFRCRjbWQkLCB0YWJsZW5hbWUpO1xuXG4gICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJENSRUFURSBJTkRFWCBqb2JfaTUgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc3RhcnRfYWZ0ZXIpIElOQ0xVREUgKHByaW9yaXR5LCBjcmVhdGVkX29uLCBpZCkgV0hFUkUgc3RhdGUgPCAnYWN0aXZlJyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pNCBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBzaW5nbGV0b25fb24sIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD4gJ2NhbmNlbGxlZCcgQU5EIHNpbmdsZXRvbl9vbiBJUyBOT1QgTlVMTCRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgSU5ERVggam9iX2k3IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIGdyb3VwX2lkKSBXSEVSRSBzdGF0ZSA9ICdhY3RpdmUnIEFORCBncm91cF9pZCBJUyBOT1QgTlVMTCRjbWQkLCB0YWJsZW5hbWUpO1xuXG4gICAgICAgICAgSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ3Nob3J0JyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTEgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycpKSBXSEVSRSBzdGF0ZSA9ICdjcmVhdGVkJyBBTkQgcG9saWN5ID0gJ3Nob3J0JyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzaW5nbGV0b24nIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pMiBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlID0gJ2FjdGl2ZScgQU5EIHBvbGljeSA9ICdzaW5nbGV0b24nJGNtZCQsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ3N0YXRlbHknIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pMyBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBzdGF0ZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycpKSBXSEVSRSBzdGF0ZSA8PSAnYWN0aXZlJyBBTkQgcG9saWN5ID0gJ3N0YXRlbHknJGNtZCQsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ2V4Y2x1c2l2ZScgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJENSRUFURSBVTklRVUUgSU5ERVggam9iX2k2IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD0gJ2FjdGl2ZScgQU5EIHBvbGljeSA9ICdleGNsdXNpdmUnJGNtZCQsIHRhYmxlbmFtZSk7XG4gICAgICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ2tleV9zdHJpY3RfZmlmbycgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJENSRUFURSBVTklRVUUgSU5ERVggam9iX2k4IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIHNpbmdsZXRvbl9rZXkpIFdIRVJFIHN0YXRlIElOICgnYWN0aXZlJywgJ3JldHJ5JywgJ2ZhaWxlZCcpIEFORCBwb2xpY3kgPSAna2V5X3N0cmljdF9maWZvJyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJEFMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQUREIENPTlNUUkFJTlQgam9iX2tleV9zdHJpY3RfZmlmb19zaW5nbGV0b25fa2V5X2NoZWNrIENIRUNLIChOT1QgKHBvbGljeSA9ICdrZXlfc3RyaWN0X2ZpZm8nIEFORCBzaW5nbGV0b25fa2V5IElTIE5VTEwpKSRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVORCBJRjtcblxuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uJUkgQUREIENPTlNUUkFJTlQgY2pjIENIRUNLIChuYW1lPSVMKScsIHRhYmxlbmFtZSwgcXVldWVfbmFtZSk7XG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQVRUQUNIIFBBUlRJVElPTiAke3NjaGVtYX0uJUkgRk9SIFZBTFVFUyBJTiAoJUwpJywgdGFibGVuYW1lLCBxdWV1ZV9uYW1lKTtcbiAgICAgICAgRU5EO1xuICAgICAgICAkJFxuICAgICAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICAgICAgICBgXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXN5bmM6IFtcbiAgICAgICAgICAgICAgICBgU0VMRUNUICR7c2NoZW1hfS5qb2JfdGFibGVfcnVuX2FzeW5jKFxuICAgICAgICAgICdrZXlfc3RyaWN0X2ZpZm9faW5kZXgnLFxuICAgICAgICAgICRWRVJTSU9OJCxcbiAgICAgICAgICAkJFxuICAgICAgICAgIENSRUFURSBVTklRVUUgSU5ERVggQ09OQ1VSUkVOVExZIGpvYl9pOCBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBzaW5nbGV0b25fa2V5KSBXSEVSRSBzdGF0ZSBJTiAoJ2FjdGl2ZScsICdyZXRyeScsICdmYWlsZWQnKSBBTkQgcG9saWN5ID0gJ2tleV9zdHJpY3RfZmlmbydcbiAgICAgICAgICAkJFxuICAgICAgICAsICdqb2JfY29tbW9uJylgXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdW5pbnN0YWxsOiBbXG4gICAgICAgICAgICAgICAgYFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bignRFJPUCBJTkRFWCBJRiBFWElTVFMgJHtzY2hlbWF9LmpvYl9pOCcpYCxcbiAgICAgICAgICAgICAgICBgU0VMRUNUICR7c2NoZW1hfS5qb2JfdGFibGVfcnVuKCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgam9iX2tleV9zdHJpY3RfZmlmb19zaW5nbGV0b25fa2V5X2NoZWNrJylgLFxuICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgcHJldmlvdXMgdmVyc2lvbiBvZiBjcmVhdGVfcXVldWUgZnVuY3Rpb24gKHdpdGhvdXQga2V5X3N0cmljdF9maWZvIHN1cHBvcnQpXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICBDUkVBVEUgT1IgUkVQTEFDRSBGVU5DVElPTiAke3NjaGVtYX0uY3JlYXRlX3F1ZXVlKHF1ZXVlX25hbWUgdGV4dCwgb3B0aW9ucyBqc29uYilcbiAgICAgICAgUkVUVVJOUyBWT0lEIEFTXG4gICAgICAgICQkXG4gICAgICAgIERFQ0xBUkVcbiAgICAgICAgICB0YWJsZW5hbWUgdmFyY2hhciA6PSBDQVNFIFdIRU4gb3B0aW9ucy0+PidwYXJ0aXRpb24nID0gJ3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRIRU4gJ2onIHx8IGVuY29kZShzaGEyMjQocXVldWVfbmFtZTo6Ynl0ZWEpLCAnaGV4JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRUxTRSAnam9iX2NvbW1vbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRU5EO1xuICAgICAgICAgIHF1ZXVlX2NyZWF0ZWRfb24gdGltZXN0YW1wdHo7XG4gICAgICAgIEJFR0lOXG5cbiAgICAgICAgICBXSVRIIHEgYXMgKFxuICAgICAgICAgICAgSU5TRVJUIElOVE8gJHtzY2hlbWF9LnF1ZXVlIChcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgcG9saWN5LFxuICAgICAgICAgICAgICByZXRyeV9saW1pdCxcbiAgICAgICAgICAgICAgcmV0cnlfZGVsYXksXG4gICAgICAgICAgICAgIHJldHJ5X2JhY2tvZmYsXG4gICAgICAgICAgICAgIHJldHJ5X2RlbGF5X21heCxcbiAgICAgICAgICAgICAgZXhwaXJlX3NlY29uZHMsXG4gICAgICAgICAgICAgIHJldGVudGlvbl9zZWNvbmRzLFxuICAgICAgICAgICAgICBkZWxldGlvbl9zZWNvbmRzLFxuICAgICAgICAgICAgICB3YXJuaW5nX3F1ZXVlZCxcbiAgICAgICAgICAgICAgZGVhZF9sZXR0ZXIsXG4gICAgICAgICAgICAgIHBhcnRpdGlvbixcbiAgICAgICAgICAgICAgdGFibGVfbmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgVkFMVUVTIChcbiAgICAgICAgICAgICAgcXVldWVfbmFtZSxcbiAgICAgICAgICAgICAgb3B0aW9ucy0+Pidwb2xpY3knLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRyeUxpbWl0Jyk6OmludCwgMiksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldHJ5RGVsYXknKTo6aW50LCAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0cnlCYWNrb2ZmJyk6OmJvb2wsIGZhbHNlKSxcbiAgICAgICAgICAgICAgKG9wdGlvbnMtPj4ncmV0cnlEZWxheU1heCcpOjppbnQsXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J2V4cGlyZUluU2Vjb25kcycpOjppbnQsIDkwMCksXG4gICAgICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldGVudGlvblNlY29uZHMnKTo6aW50LCAxMjA5NjAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nZGVsZXRlQWZ0ZXJTZWNvbmRzJyk6OmludCwgNjA0ODAwKSxcbiAgICAgICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nd2FybmluZ1F1ZXVlU2l6ZScpOjppbnQsIDApLFxuICAgICAgICAgICAgICBvcHRpb25zLT4+J2RlYWRMZXR0ZXInLFxuICAgICAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidwYXJ0aXRpb24nKTo6Ym9vbCwgZmFsc2UpLFxuICAgICAgICAgICAgICB0YWJsZW5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIE9OIENPTkZMSUNUIERPIE5PVEhJTkdcbiAgICAgICAgICAgIFJFVFVSTklORyBjcmVhdGVkX29uXG4gICAgICAgICAgKVxuICAgICAgICAgIFNFTEVDVCBjcmVhdGVkX29uIGludG8gcXVldWVfY3JlYXRlZF9vbiBmcm9tIHE7XG5cbiAgICAgICAgICBJRiBxdWV1ZV9jcmVhdGVkX29uIElTIE5VTEwgT1Igb3B0aW9ucy0+PidwYXJ0aXRpb24nIElTIERJU1RJTkNUIEZST00gJ3RydWUnIFRIRU5cbiAgICAgICAgICAgIFJFVFVSTjtcbiAgICAgICAgICBFTkQgSUY7XG5cbiAgICAgICAgICBFWEVDVVRFIGZvcm1hdCgnQ1JFQVRFIFRBQkxFICR7c2NoZW1hfS4lSSAoTElLRSAke3NjaGVtYX0uam9iIElOQ0xVRElORyBERUZBVUxUUyknLCB0YWJsZW5hbWUpO1xuXG4gICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJEFMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQUREIFBSSU1BUlkgS0VZIChuYW1lLCBpZCkkY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgQ09OU1RSQUlOVCBxX2ZrZXkgRk9SRUlHTiBLRVkgKG5hbWUpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRUQkY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgQ09OU1RSQUlOVCBkbHFfZmtleSBGT1JFSUdOIEtFWSAoZGVhZF9sZXR0ZXIpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRUQkY21kJCwgdGFibGVuYW1lKTtcblxuICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgSU5ERVggam9iX2k1IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIHN0YXJ0X2FmdGVyKSBJTkNMVURFIChwcmlvcml0eSwgY3JlYXRlZF9vbiwgaWQpIFdIRVJFIHN0YXRlIDwgJ2FjdGl2ZSckY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTQgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc2luZ2xldG9uX29uLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlIDw+ICdjYW5jZWxsZWQnIEFORCBzaW5nbGV0b25fb24gSVMgTk9UIE5VTEwkY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIElOREVYIGpvYl9pNyBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBncm91cF9pZCkgV0hFUkUgc3RhdGUgPSAnYWN0aXZlJyBBTkQgZ3JvdXBfaWQgSVMgTk9UIE5VTEwkY21kJCwgdGFibGVuYW1lKTtcblxuICAgICAgICAgIElGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzaG9ydCcgVEhFTlxuICAgICAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJENSRUFURSBVTklRVUUgSU5ERVggam9iX2kxIE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPSAnY3JlYXRlZCcgQU5EIHBvbGljeSA9ICdzaG9ydCckY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgICBFTFNJRiBvcHRpb25zLT4+J3BvbGljeScgPSAnc2luZ2xldG9uJyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTIgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgQ09BTEVTQ0Uoc2luZ2xldG9uX2tleSwgJycpKSBXSEVSRSBzdGF0ZSA9ICdhY3RpdmUnIEFORCBwb2xpY3kgPSAnc2luZ2xldG9uJyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzdGF0ZWx5JyBUSEVOXG4gICAgICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTMgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc3RhdGUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD0gJ2FjdGl2ZScgQU5EIHBvbGljeSA9ICdzdGF0ZWx5JyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdleGNsdXNpdmUnIFRIRU5cbiAgICAgICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCRDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pNiBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlIDw9ICdhY3RpdmUnIEFORCBwb2xpY3kgPSAnZXhjbHVzaXZlJyRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgICAgIEVORCBJRjtcblxuICAgICAgICAgIEVYRUNVVEUgZm9ybWF0KCdBTFRFUiBUQUJMRSAke3NjaGVtYX0uJUkgQUREIENPTlNUUkFJTlQgY2pjIENIRUNLIChuYW1lPSVMKScsIHRhYmxlbmFtZSwgcXVldWVfbmFtZSk7XG4gICAgICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQVRUQUNIIFBBUlRJVElPTiAke3NjaGVtYX0uJUkgRk9SIFZBTFVFUyBJTiAoJUwpJywgdGFibGVuYW1lLCBxdWV1ZV9uYW1lKTtcbiAgICAgICAgRU5EO1xuICAgICAgICAkJFxuICAgICAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICAgICAgICBgXG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlbGVhc2U6ICcxMi4xMS4wJyxcbiAgICAgICAgICAgIHZlcnNpb246IDI5LFxuICAgICAgICAgICAgcHJldmlvdXM6IDI4LFxuICAgICAgICAgICAgaW5zdGFsbDogW1xuICAgICAgICAgICAgICAgIGBDUkVBVEUgVEFCTEUgJHtzY2hlbWF9Lndhcm5pbmcgKFxuICAgICAgICAgIGlkIHV1aWQgUFJJTUFSWSBLRVkgZGVmYXVsdCBnZW5fcmFuZG9tX3V1aWQoKSxcbiAgICAgICAgICB0eXBlIHRleHQgTk9UIE5VTEwsXG4gICAgICAgICAgbWVzc2FnZSB0ZXh0IE5PVCBOVUxMLFxuICAgICAgICAgIGRhdGEganNvbmIsXG4gICAgICAgICAgY3JlYXRlZF9vbiB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgTk9UIE5VTEwgREVGQVVMVCBub3coKVxuICAgICAgICApYCxcbiAgICAgICAgICAgICAgICBgQ1JFQVRFIElOREVYIHdhcm5pbmdfaTEgT04gJHtzY2hlbWF9Lndhcm5pbmcgKGNyZWF0ZWRfb24gREVTQylgXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdW5pbnN0YWxsOiBbXG4gICAgICAgICAgICAgICAgYERST1AgSU5ERVggJHtzY2hlbWF9Lndhcm5pbmdfaTFgLFxuICAgICAgICAgICAgICAgIGBEUk9QIFRBQkxFICR7c2NoZW1hfS53YXJuaW5nYFxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgXTtcbn1cbmV4cG9ydCB7IHJvbGxiYWNrLCBuZXh0LCBtaWdyYXRlLCBnZXRBbGwsIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/migrationStore.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CREATE_RACE_MESSAGE: () => (/* binding */ CREATE_RACE_MESSAGE),\n/* harmony export */   DEFAULT_SCHEMA: () => (/* binding */ DEFAULT_SCHEMA),\n/* harmony export */   JOB_STATES: () => (/* binding */ JOB_STATES),\n/* harmony export */   MIGRATE_RACE_MESSAGE: () => (/* binding */ MIGRATE_RACE_MESSAGE),\n/* harmony export */   QUEUE_POLICIES: () => (/* binding */ QUEUE_POLICIES),\n/* harmony export */   assertMigration: () => (/* binding */ assertMigration),\n/* harmony export */   cacheQueueStats: () => (/* binding */ cacheQueueStats),\n/* harmony export */   cancelJobs: () => (/* binding */ cancelJobs),\n/* harmony export */   completeJobs: () => (/* binding */ completeJobs),\n/* harmony export */   create: () => (/* binding */ create),\n/* harmony export */   createIndexWarning: () => (/* binding */ createIndexWarning),\n/* harmony export */   createQueue: () => (/* binding */ createQueue),\n/* harmony export */   createTableWarning: () => (/* binding */ createTableWarning),\n/* harmony export */   deleteAllJobs: () => (/* binding */ deleteAllJobs),\n/* harmony export */   deleteJobsById: () => (/* binding */ deleteJobsById),\n/* harmony export */   deleteOldWarnings: () => (/* binding */ deleteOldWarnings),\n/* harmony export */   deleteQueue: () => (/* binding */ deleteQueue),\n/* harmony export */   deleteQueuedJobs: () => (/* binding */ deleteQueuedJobs),\n/* harmony export */   deleteStoredJobs: () => (/* binding */ deleteStoredJobs),\n/* harmony export */   deletion: () => (/* binding */ deletion),\n/* harmony export */   failJobsById: () => (/* binding */ failJobsById),\n/* harmony export */   failJobsByTimeout: () => (/* binding */ failJobsByTimeout),\n/* harmony export */   fetchNextJob: () => (/* binding */ fetchNextJob),\n/* harmony export */   findJobs: () => (/* binding */ findJobs),\n/* harmony export */   getBamEntries: () => (/* binding */ getBamEntries),\n/* harmony export */   getBamStatus: () => (/* binding */ getBamStatus),\n/* harmony export */   getBlockedKeys: () => (/* binding */ getBlockedKeys),\n/* harmony export */   getJobById: () => (/* binding */ getJobById),\n/* harmony export */   getNextBamCommand: () => (/* binding */ getNextBamCommand),\n/* harmony export */   getQueueStats: () => (/* binding */ getQueueStats),\n/* harmony export */   getQueues: () => (/* binding */ getQueues),\n/* harmony export */   getQueuesForEvent: () => (/* binding */ getQueuesForEvent),\n/* harmony export */   getSchedules: () => (/* binding */ getSchedules),\n/* harmony export */   getSchedulesByQueue: () => (/* binding */ getSchedulesByQueue),\n/* harmony export */   getTime: () => (/* binding */ getTime),\n/* harmony export */   getVersion: () => (/* binding */ getVersion),\n/* harmony export */   getWarnings: () => (/* binding */ getWarnings),\n/* harmony export */   getWarningsCount: () => (/* binding */ getWarningsCount),\n/* harmony export */   insertJobs: () => (/* binding */ insertJobs),\n/* harmony export */   insertVersion: () => (/* binding */ insertVersion),\n/* harmony export */   insertWarning: () => (/* binding */ insertWarning),\n/* harmony export */   locked: () => (/* binding */ locked),\n/* harmony export */   restoreJobs: () => (/* binding */ restoreJobs),\n/* harmony export */   resumeJobs: () => (/* binding */ resumeJobs),\n/* harmony export */   retryJobs: () => (/* binding */ retryJobs),\n/* harmony export */   schedule: () => (/* binding */ schedule),\n/* harmony export */   serializeArrayParam: () => (/* binding */ serializeArrayParam),\n/* harmony export */   setBamCompleted: () => (/* binding */ setBamCompleted),\n/* harmony export */   setBamFailed: () => (/* binding */ setBamFailed),\n/* harmony export */   setVersion: () => (/* binding */ setVersion),\n/* harmony export */   subscribe: () => (/* binding */ subscribe),\n/* harmony export */   truncateTable: () => (/* binding */ truncateTable),\n/* harmony export */   trySetBamTime: () => (/* binding */ trySetBamTime),\n/* harmony export */   trySetCronTime: () => (/* binding */ trySetCronTime),\n/* harmony export */   trySetQueueDeletionTime: () => (/* binding */ trySetQueueDeletionTime),\n/* harmony export */   trySetQueueMonitorTime: () => (/* binding */ trySetQueueMonitorTime),\n/* harmony export */   unschedule: () => (/* binding */ unschedule),\n/* harmony export */   unsubscribe: () => (/* binding */ unsubscribe),\n/* harmony export */   updateQueue: () => (/* binding */ updateQueue),\n/* harmony export */   versionTableExists: () => (/* binding */ versionTableExists)\n/* harmony export */ });\nconst DEFAULT_SCHEMA = 'pgboss';\nconst MIGRATE_RACE_MESSAGE = 'division by zero';\nconst CREATE_RACE_MESSAGE = 'already exists';\nconst SINGLE_QUOTE_REGEX = /'/g;\nconst FIFTEEN_MINUTES = 60 * 15;\nconst FORTEEN_DAYS = 60 * 60 * 24 * 14;\nconst SEVEN_DAYS = 60 * 60 * 24 * 7;\nconst JOB_STATES = Object.freeze({\n    created: 'created',\n    retry: 'retry',\n    active: 'active',\n    completed: 'completed',\n    cancelled: 'cancelled',\n    failed: 'failed'\n});\nconst QUEUE_POLICIES = Object.freeze({\n    standard: 'standard',\n    short: 'short',\n    singleton: 'singleton',\n    stately: 'stately',\n    exclusive: 'exclusive',\n    key_strict_fifo: 'key_strict_fifo'\n});\nconst QUEUE_DEFAULTS = {\n    expire_seconds: FIFTEEN_MINUTES,\n    retention_seconds: FORTEEN_DAYS,\n    deletion_seconds: SEVEN_DAYS,\n    retry_limit: 2,\n    retry_delay: 0,\n    warning_queued: 0,\n    retry_backoff: false,\n    partition: false\n};\nconst COMMON_JOB_TABLE = 'job_common';\nfunction create(schema, version, options) {\n    const commands = [\n        options?.createSchema ? createSchema(schema) : '',\n        createEnumJobState(schema),\n        createTableVersion(schema),\n        createTableQueue(schema),\n        createTableSchedule(schema),\n        createTableSubscription(schema),\n        createTableBam(schema),\n        jobTableFormatFunction(schema),\n        jobTableRunFunction(schema),\n        jobTableRunAsyncFunction(schema),\n        createTableJob(schema),\n        createPrimaryKeyJob(schema),\n        createTableJobCommon(schema),\n        createTableWarning(schema),\n        createIndexWarning(schema),\n        createQueueFunction(schema),\n        deleteQueueFunction(schema),\n        insertVersion(schema, version)\n    ];\n    return locked(schema, commands);\n}\nfunction createSchema(schema) {\n    return `CREATE SCHEMA IF NOT EXISTS ${schema}`;\n}\nfunction createEnumJobState(schema) {\n    // ENUM definition order is important\n    // base type is numeric and first values are less than last values\n    return `\n    CREATE TYPE ${schema}.job_state AS ENUM (\n      '${JOB_STATES.created}',\n      '${JOB_STATES.retry}',\n      '${JOB_STATES.active}',\n      '${JOB_STATES.completed}',\n      '${JOB_STATES.cancelled}',\n      '${JOB_STATES.failed}'\n    )\n  `;\n}\nfunction createTableVersion(schema) {\n    return `\n    CREATE TABLE ${schema}.version (\n      version int primary key,\n      cron_on timestamp with time zone,\n      bam_on timestamp with time zone\n    )\n  `;\n}\nfunction createTableQueue(schema) {\n    return `\n    CREATE TABLE ${schema}.queue (\n      name text NOT NULL,\n      policy text NOT NULL,\n      retry_limit int NOT NULL,\n      retry_delay int NOT NULL,\n      retry_backoff bool NOT NULL,\n      retry_delay_max int,\n      expire_seconds int NOT NULL,\n      retention_seconds int NOT NULL,\n      deletion_seconds int NOT NULL,\n      dead_letter text REFERENCES ${schema}.queue (name) CHECK (dead_letter IS DISTINCT FROM name),\n      partition bool NOT NULL,\n      table_name text NOT NULL,\n      deferred_count int NOT NULL default 0,\n      queued_count int NOT NULL default 0,\n      warning_queued int NOT NULL default 0,\n      active_count int NOT NULL default 0,\n      total_count int NOT NULL default 0,\n      singletons_active text[],\n      monitor_on timestamp with time zone,\n      maintain_on timestamp with time zone,\n      created_on timestamp with time zone not null default now(),\n      updated_on timestamp with time zone not null default now(),\n      PRIMARY KEY (name)\n    )\n  `;\n}\nfunction createTableSchedule(schema) {\n    return `\n    CREATE TABLE ${schema}.schedule (\n      name text REFERENCES ${schema}.queue ON DELETE CASCADE,\n      key text not null DEFAULT '',\n      cron text not null,\n      timezone text,\n      data jsonb,\n      options jsonb,\n      created_on timestamp with time zone not null default now(),\n      updated_on timestamp with time zone not null default now(),\n      PRIMARY KEY (name, key)\n    )\n  `;\n}\nfunction createTableSubscription(schema) {\n    return `\n    CREATE TABLE ${schema}.subscription (\n      event text not null,\n      name text not null REFERENCES ${schema}.queue ON DELETE CASCADE,\n      created_on timestamp with time zone not null default now(),\n      updated_on timestamp with time zone not null default now(),\n      PRIMARY KEY(event, name)\n    )\n  `;\n}\nfunction createTableBam(schema) {\n    return `\n    CREATE TABLE ${schema}.bam (\n      id uuid PRIMARY KEY default gen_random_uuid(),\n      name text NOT NULL,\n      version int NOT NULL,\n      status text NOT NULL DEFAULT 'pending',\n      queue text,\n      table_name text NOT NULL,\n      command text NOT NULL,\n      error text,\n      created_on timestamp with time zone NOT NULL DEFAULT now(),\n      started_on timestamp with time zone,\n      completed_on timestamp with time zone\n    )\n  `;\n}\nfunction createTableWarning(schema) {\n    return `\n    CREATE TABLE ${schema}.warning (\n      id uuid PRIMARY KEY default gen_random_uuid(),\n      type text NOT NULL,\n      message text NOT NULL,\n      data jsonb,\n      created_on timestamp with time zone NOT NULL DEFAULT now()\n    )\n  `;\n}\nfunction createIndexWarning(schema) {\n    return `CREATE INDEX warning_i1 ON ${schema}.warning (created_on DESC)`;\n}\nfunction jobTableFormatFunction(schema) {\n    return `\n    CREATE FUNCTION ${schema}.job_table_format(command text, table_name text)\n    RETURNS text AS\n    $$\n      SELECT format(\n        replace(\n          replace(command, '.job', '.%1$I'),\n          'job_i', '%1$s_i'\n        ),\n        table_name\n      );\n    $$\n    LANGUAGE sql IMMUTABLE;\n  `;\n}\nfunction jobTableRunFunction(schema) {\n    return `\n    CREATE FUNCTION ${schema}.job_table_run(command text, tbl_name text DEFAULT NULL, queue_name text DEFAULT NULL)\n    RETURNS VOID AS\n    $$\n    DECLARE\n      tbl RECORD;\n    BEGIN\n      IF queue_name IS NOT NULL THEN\n        SELECT table_name INTO tbl_name FROM ${schema}.queue WHERE name = queue_name;\n      END IF;\n\n      IF tbl_name IS NOT NULL THEN\n        EXECUTE ${schema}.job_table_format(command, tbl_name);\n        RETURN;\n      END IF;\n\n      EXECUTE ${schema}.job_table_format(command, '${COMMON_JOB_TABLE}');\n\n      FOR tbl IN SELECT table_name FROM ${schema}.queue WHERE partition = true\n      LOOP\n        EXECUTE ${schema}.job_table_format(command, tbl.table_name);\n      END LOOP;\n    END;\n    $$\n    LANGUAGE plpgsql;\n  `;\n}\nfunction jobTableRunAsyncFunction(schema) {\n    return `\n    CREATE FUNCTION ${schema}.job_table_run_async(command_name text, version int, command text, tbl_name text DEFAULT NULL, queue_name text DEFAULT NULL)\n    RETURNS VOID AS\n    $$\n    BEGIN\n      IF queue_name IS NOT NULL THEN\n        SELECT table_name INTO tbl_name FROM ${schema}.queue WHERE name = queue_name;\n      END IF;\n\n      IF tbl_name IS NOT NULL THEN\n        INSERT INTO ${schema}.bam (name, version, status, queue, table_name, command)\n        VALUES (\n          command_name,\n          version,\n          'pending',\n          queue_name,\n          tbl_name,\n          ${schema}.job_table_format(command, tbl_name)\n        );\n        RETURN;\n      END IF;\n\n      INSERT INTO ${schema}.bam (name, version, status, queue, table_name, command)\n      SELECT\n        command_name,\n        version,\n        'pending',\n        NULL,\n        '${COMMON_JOB_TABLE}',\n        ${schema}.job_table_format(command, '${COMMON_JOB_TABLE}')\n      UNION ALL\n      SELECT\n        command_name,\n        version,\n        'pending',\n        queue.name,\n        queue.table_name,\n        ${schema}.job_table_format(command, queue.table_name)\n      FROM ${schema}.queue\n      WHERE partition = true;\n    END;\n    $$\n    LANGUAGE plpgsql;\n  `;\n}\nfunction createTableJob(schema) {\n    return `\n    CREATE TABLE ${schema}.job (\n      id uuid not null default gen_random_uuid(),\n      name text not null,\n      priority integer not null default(0),\n      data jsonb,\n      state ${schema}.job_state not null default '${JOB_STATES.created}',\n      retry_limit integer not null default ${QUEUE_DEFAULTS.retry_limit},\n      retry_count integer not null default 0,\n      retry_delay integer not null default ${QUEUE_DEFAULTS.retry_delay},\n      retry_backoff boolean not null default ${QUEUE_DEFAULTS.retry_backoff},\n      retry_delay_max integer,\n      expire_seconds int not null default ${QUEUE_DEFAULTS.expire_seconds},\n      deletion_seconds int not null default ${QUEUE_DEFAULTS.deletion_seconds},\n      singleton_key text,\n      singleton_on timestamp without time zone,\n      group_id text,\n      group_tier text,\n      start_after timestamp with time zone not null default now(),\n      created_on timestamp with time zone not null default now(),\n      started_on timestamp with time zone,\n      completed_on timestamp with time zone,\n      keep_until timestamp with time zone NOT NULL default now() + interval '${QUEUE_DEFAULTS.retention_seconds}',\n      output jsonb,\n      dead_letter text,\n      policy text\n    ) PARTITION BY LIST (name)\n  `;\n}\nconst JOB_COLUMNS_MIN = 'id, name, data, expire_seconds as \"expireInSeconds\", group_id as \"groupId\", group_tier as \"groupTier\"';\nconst JOB_COLUMNS_ALL = `${JOB_COLUMNS_MIN},\n  policy,\n  state,\n  priority,\n  retry_limit as \"retryLimit\",\n  retry_count as \"retryCount\",\n  retry_delay as \"retryDelay\",\n  retry_backoff as \"retryBackoff\",\n  retry_delay_max as \"retryDelayMax\",\n  start_after as \"startAfter\",\n  started_on as \"startedOn\",\n  singleton_key as \"singletonKey\",\n  singleton_on as \"singletonOn\",\n  deletion_seconds as \"deleteAfterSeconds\",\n  created_on as \"createdOn\",\n  completed_on as \"completedOn\",\n  keep_until as \"keepUntil\",\n  dead_letter as \"deadLetter\",\n  output\n`;\nfunction createTableJobCommon(schema) {\n    return `\n    CREATE TABLE ${schema}.${COMMON_JOB_TABLE} (LIKE ${schema}.job INCLUDING GENERATED INCLUDING DEFAULTS);\n\n    SELECT ${schema}.job_table_run($cmd$${createPrimaryKeyJob(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createQueueForeignKeyJob(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createQueueForeignKeyJobDeadLetter(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobPolicyShort(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobPolicySingleton(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobPolicyStately(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobPolicyExclusive(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobPolicyKeyStrictFifo(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createCheckConstraintKeyStrictFifo(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobThrottle(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobFetch(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n    SELECT ${schema}.job_table_run($cmd$${createIndexJobGroupConcurrency(schema)}$cmd$, '${COMMON_JOB_TABLE}');\n\n    ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.${COMMON_JOB_TABLE} DEFAULT;\n  `;\n}\nfunction createQueueFunction(schema) {\n    return `\n    CREATE FUNCTION ${schema}.create_queue(queue_name text, options jsonb)\n    RETURNS VOID AS\n    $$\n    DECLARE\n      tablename varchar := CASE WHEN options->>'partition' = 'true'\n                            THEN 'j' || encode(sha224(queue_name::bytea), 'hex')\n                            ELSE '${COMMON_JOB_TABLE}'\n                            END;\n      queue_created_on timestamptz;\n    BEGIN\n\n      WITH q as (\n        INSERT INTO ${schema}.queue (\n          name,\n          policy,\n          retry_limit,\n          retry_delay,\n          retry_backoff,\n          retry_delay_max,\n          expire_seconds,\n          retention_seconds,\n          deletion_seconds,\n          warning_queued,\n          dead_letter,\n          partition,\n          table_name\n        )\n        VALUES (\n          queue_name,\n          options->>'policy',\n          COALESCE((options->>'retryLimit')::int, ${QUEUE_DEFAULTS.retry_limit}),\n          COALESCE((options->>'retryDelay')::int, ${QUEUE_DEFAULTS.retry_delay}),\n          COALESCE((options->>'retryBackoff')::bool, ${QUEUE_DEFAULTS.retry_backoff}),\n          (options->>'retryDelayMax')::int,\n          COALESCE((options->>'expireInSeconds')::int, ${QUEUE_DEFAULTS.expire_seconds}),\n          COALESCE((options->>'retentionSeconds')::int, ${QUEUE_DEFAULTS.retention_seconds}),\n          COALESCE((options->>'deleteAfterSeconds')::int, ${QUEUE_DEFAULTS.deletion_seconds}),\n          COALESCE((options->>'warningQueueSize')::int, ${QUEUE_DEFAULTS.warning_queued}),\n          options->>'deadLetter',\n          COALESCE((options->>'partition')::bool, ${QUEUE_DEFAULTS.partition}),\n          tablename\n        )\n        ON CONFLICT DO NOTHING\n        RETURNING created_on\n      )\n      SELECT created_on into queue_created_on from q;\n\n      IF queue_created_on IS NULL OR options->>'partition' IS DISTINCT FROM 'true' THEN\n        RETURN;\n      END IF;\n\n      EXECUTE format('CREATE TABLE ${schema}.%I (LIKE ${schema}.job INCLUDING DEFAULTS)', tablename);\n\n      EXECUTE ${schema}.job_table_format($cmd$${createPrimaryKeyJob(schema)}$cmd$, tablename);\n      EXECUTE ${schema}.job_table_format($cmd$${createQueueForeignKeyJob(schema)}$cmd$, tablename);\n      EXECUTE ${schema}.job_table_format($cmd$${createQueueForeignKeyJobDeadLetter(schema)}$cmd$, tablename);\n\n      EXECUTE ${schema}.job_table_format($cmd$${createIndexJobFetch(schema)}$cmd$, tablename);\n      EXECUTE ${schema}.job_table_format($cmd$${createIndexJobThrottle(schema)}$cmd$, tablename);\n      EXECUTE ${schema}.job_table_format($cmd$${createIndexJobGroupConcurrency(schema)}$cmd$, tablename);\n\n      IF options->>'policy' = 'short' THEN\n        EXECUTE ${schema}.job_table_format($cmd$${createIndexJobPolicyShort(schema)}$cmd$, tablename);\n      ELSIF options->>'policy' = 'singleton' THEN\n        EXECUTE ${schema}.job_table_format($cmd$${createIndexJobPolicySingleton(schema)}$cmd$, tablename);\n      ELSIF options->>'policy' = 'stately' THEN\n        EXECUTE ${schema}.job_table_format($cmd$${createIndexJobPolicyStately(schema)}$cmd$, tablename);\n      ELSIF options->>'policy' = 'exclusive' THEN\n        EXECUTE ${schema}.job_table_format($cmd$${createIndexJobPolicyExclusive(schema)}$cmd$, tablename);\n      ELSIF options->>'policy' = '${QUEUE_POLICIES.key_strict_fifo}' THEN\n        EXECUTE ${schema}.job_table_format($cmd$${createIndexJobPolicyKeyStrictFifo(schema)}$cmd$, tablename);\n        EXECUTE ${schema}.job_table_format($cmd$${createCheckConstraintKeyStrictFifo(schema)}$cmd$, tablename);\n      END IF;\n\n      EXECUTE format('ALTER TABLE ${schema}.%I ADD CONSTRAINT cjc CHECK (name=%L)', tablename, queue_name);\n      EXECUTE format('ALTER TABLE ${schema}.job ATTACH PARTITION ${schema}.%I FOR VALUES IN (%L)', tablename, queue_name);\n    END;\n    $$\n    LANGUAGE plpgsql;\n  `;\n}\nfunction deleteQueueFunction(schema) {\n    return `\n    CREATE FUNCTION ${schema}.delete_queue(queue_name text)\n    RETURNS VOID AS\n    $$\n    DECLARE\n      v_table varchar;\n      v_partition bool;\n    BEGIN\n      SELECT table_name, partition\n      FROM ${schema}.queue\n      WHERE name = queue_name\n      INTO v_table, v_partition;\n\n      IF v_partition THEN\n        EXECUTE format('DROP TABLE IF EXISTS ${schema}.%I', v_table);\n      ELSE\n        EXECUTE format('DELETE FROM ${schema}.%I WHERE name = %L', v_table, queue_name);\n      END IF;\n\n      DELETE FROM ${schema}.queue WHERE name = queue_name;\n    END;\n    $$\n    LANGUAGE plpgsql;\n  `;\n}\nfunction createQueue(schema, name, options) {\n    const sql = `SELECT ${schema}.create_queue('${name}', '${JSON.stringify(options)}'::jsonb)`;\n    return locked(schema, sql, 'create-queue');\n}\nfunction deleteQueue(schema, name) {\n    const sql = `SELECT ${schema}.delete_queue('${name}')`;\n    return locked(schema, sql, 'delete-queue');\n}\nfunction createPrimaryKeyJob(schema) {\n    return `ALTER TABLE ${schema}.job ADD PRIMARY KEY (name, id)`;\n}\nfunction createQueueForeignKeyJob(schema) {\n    return `ALTER TABLE ${schema}.job ADD CONSTRAINT q_fkey FOREIGN KEY (name) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED`;\n}\nfunction createQueueForeignKeyJobDeadLetter(schema) {\n    return `ALTER TABLE ${schema}.job ADD CONSTRAINT dlq_fkey FOREIGN KEY (dead_letter) REFERENCES ${schema}.queue (name) ON DELETE RESTRICT DEFERRABLE INITIALLY DEFERRED`;\n}\nfunction createIndexJobPolicyShort(schema) {\n    return `CREATE UNIQUE INDEX job_i1 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = '${JOB_STATES.created}' AND policy = '${QUEUE_POLICIES.short}'`;\n}\nfunction createIndexJobPolicySingleton(schema) {\n    return `CREATE UNIQUE INDEX job_i2 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state = '${JOB_STATES.active}' AND policy = '${QUEUE_POLICIES.singleton}'`;\n}\nfunction createIndexJobPolicyStately(schema) {\n    return `CREATE UNIQUE INDEX job_i3 ON ${schema}.job (name, state, COALESCE(singleton_key, '')) WHERE state <= '${JOB_STATES.active}' AND policy = '${QUEUE_POLICIES.stately}'`;\n}\nfunction createIndexJobThrottle(schema) {\n    return `CREATE UNIQUE INDEX job_i4 ON ${schema}.job (name, singleton_on, COALESCE(singleton_key, '')) WHERE state <> '${JOB_STATES.cancelled}' AND singleton_on IS NOT NULL`;\n}\nfunction createIndexJobFetch(schema) {\n    return `CREATE INDEX job_i5 ON ${schema}.job (name, start_after) INCLUDE (priority, created_on, id) WHERE state < '${JOB_STATES.active}'`;\n}\nfunction createIndexJobPolicyExclusive(schema) {\n    return `CREATE UNIQUE INDEX job_i6 ON ${schema}.job (name, COALESCE(singleton_key, '')) WHERE state <= '${JOB_STATES.active}' AND policy = '${QUEUE_POLICIES.exclusive}'`;\n}\nfunction createIndexJobPolicyKeyStrictFifo(schema) {\n    return `CREATE UNIQUE INDEX job_i8 ON ${schema}.job (name, singleton_key) WHERE state IN ('${JOB_STATES.active}', '${JOB_STATES.retry}', '${JOB_STATES.failed}') AND policy = '${QUEUE_POLICIES.key_strict_fifo}'`;\n}\nfunction createCheckConstraintKeyStrictFifo(schema) {\n    return `ALTER TABLE ${schema}.job ADD CONSTRAINT job_key_strict_fifo_singleton_key_check CHECK (NOT (policy = '${QUEUE_POLICIES.key_strict_fifo}' AND singleton_key IS NULL))`;\n}\nfunction createIndexJobGroupConcurrency(schema) {\n    return `CREATE INDEX job_i7 ON ${schema}.job (name, group_id) WHERE state = '${JOB_STATES.active}' AND group_id IS NOT NULL`;\n}\nfunction trySetQueueMonitorTime(schema, queues, seconds) {\n    return trySetQueueTimestamp(schema, queues, 'monitor_on', seconds);\n}\nfunction trySetQueueDeletionTime(schema, queues, seconds) {\n    return trySetQueueTimestamp(schema, queues, 'maintain_on', seconds);\n}\nfunction trySetCronTime(schema, seconds) {\n    return trySetTimestamp(schema, 'cron_on', seconds);\n}\nfunction trySetBamTime(schema, seconds) {\n    return trySetTimestamp(schema, 'bam_on', seconds);\n}\nfunction trySetTimestamp(schema, column, seconds) {\n    return `\n    UPDATE ${schema}.version\n    SET ${column} = now()\n    WHERE EXTRACT( EPOCH FROM (now() - COALESCE(${column}, now() - interval '1 week') ) ) > ${seconds}\n    RETURNING true\n  `;\n}\nfunction trySetQueueTimestamp(schema, queues, column, seconds) {\n    return {\n        text: `\n    UPDATE ${schema}.queue\n    SET ${column} = now()\n    WHERE name = ANY($1::text[])\n      AND EXTRACT( EPOCH FROM (now() - COALESCE(${column}, now() - interval '1 week') ) ) > ${seconds}\n    RETURNING name\n  `,\n        values: [queues]\n    };\n}\nfunction updateQueue(schema, { deadLetter } = {}) {\n    return `\n    WITH options as (SELECT $2::jsonb as data)\n    UPDATE ${schema}.queue SET\n      retry_limit = COALESCE((o.data->>'retryLimit')::int, retry_limit),\n      retry_delay = COALESCE((o.data->>'retryDelay')::int, retry_delay),\n      retry_backoff = COALESCE((o.data->>'retryBackoff')::bool, retry_backoff),\n      retry_delay_max = CASE WHEN o.data ? 'retryDelayMax'\n        THEN (o.data->>'retryDelayMax')::int\n        ELSE retry_delay_max END,\n      expire_seconds = COALESCE((o.data->>'expireInSeconds')::int, expire_seconds),\n      retention_seconds = COALESCE((o.data->>'retentionSeconds')::int, retention_seconds),\n      deletion_seconds = COALESCE((o.data->>'deleteAfterSeconds')::int, deletion_seconds),\n      warning_queued = COALESCE((o.data->>'warningQueueSize')::int, warning_queued),\n      ${deadLetter === undefined\n        ? ''\n        : `dead_letter = CASE WHEN '${deadLetter}' IS DISTINCT FROM dead_letter THEN '${deadLetter}' ELSE dead_letter END,`}\n      updated_on = now()\n    FROM options o\n    WHERE name = $1\n  `;\n}\nfunction getQueues(schema, names) {\n    const hasNames = names && names.length > 0;\n    return {\n        text: `\n    SELECT\n      q.name,\n      q.policy,\n      q.retry_limit as \"retryLimit\",\n      q.retry_delay as \"retryDelay\",\n      q.retry_backoff as \"retryBackoff\",\n      q.retry_delay_max as \"retryDelayMax\",\n      q.expire_seconds as \"expireInSeconds\",\n      q.retention_seconds as \"retentionSeconds\",\n      q.deletion_seconds as \"deleteAfterSeconds\",\n      q.partition,\n      q.dead_letter as \"deadLetter\",\n      q.deferred_count as \"deferredCount\",\n      q.warning_queued as \"warningQueueSize\",\n      q.queued_count as \"queuedCount\",\n      q.active_count as \"activeCount\",\n      q.total_count as \"totalCount\",\n      q.singletons_active as \"singletonsActive\",\n      q.table_name as \"table\",\n      q.created_on as \"createdOn\",\n      q.updated_on as \"updatedOn\"\n    FROM ${schema}.queue q\n    ${hasNames ? 'WHERE q.name = ANY($1::text[])' : ''}\n   `,\n        values: hasNames ? [names] : []\n    };\n}\nfunction deleteJobsById(schema, table) {\n    return `\n    WITH results as (\n      DELETE FROM ${schema}.${table}\n      WHERE name = $1\n        AND id IN (SELECT UNNEST($2::uuid[]))        \n      RETURNING 1\n    )\n    SELECT COUNT(*) from results\n  `;\n}\nfunction deleteQueuedJobs(schema, table) {\n    return `DELETE from ${schema}.${table} WHERE name = $1 and state < '${JOB_STATES.active}'`;\n}\nfunction deleteStoredJobs(schema, table) {\n    return `DELETE from ${schema}.${table} WHERE name = $1 and state > '${JOB_STATES.active}'`;\n}\nfunction truncateTable(schema, table) {\n    return `TRUNCATE ${schema}.${table}`;\n}\nfunction deleteAllJobs(schema, table) {\n    return `DELETE from ${schema}.${table} WHERE name = $1`;\n}\nfunction getSchedules(schema) {\n    return `SELECT * FROM ${schema}.schedule ORDER BY name, key`;\n}\nfunction getSchedulesByQueue(schema) {\n    return `SELECT * FROM ${schema}.schedule WHERE name = $1 AND COALESCE(key, '') = $2`;\n}\nfunction schedule(schema) {\n    return `\n    INSERT INTO ${schema}.schedule (name, key, cron, timezone, data, options)\n    VALUES ($1, $2, $3, $4, $5, $6)\n    ON CONFLICT (name, key) DO UPDATE SET\n      cron = EXCLUDED.cron,\n      timezone = EXCLUDED.timezone,\n      data = EXCLUDED.data,\n      options = EXCLUDED.options,\n      updated_on = now()\n  `;\n}\nfunction unschedule(schema) {\n    return `\n    DELETE FROM ${schema}.schedule\n    WHERE name = $1\n      AND COALESCE(key, '') = $2\n  `;\n}\nfunction subscribe(schema) {\n    return `\n    INSERT INTO ${schema}.subscription (event, name)\n    VALUES ($1, $2)\n    ON CONFLICT (event, name) DO UPDATE SET\n      event = EXCLUDED.event,\n      name = EXCLUDED.name,\n      updated_on = now()\n  `;\n}\nfunction unsubscribe(schema) {\n    return `\n    DELETE FROM ${schema}.subscription\n    WHERE event = $1 and name = $2\n  `;\n}\nfunction getQueuesForEvent(schema) {\n    return `\n    SELECT name FROM ${schema}.subscription\n    WHERE event = $1\n  `;\n}\nfunction getTime() {\n    return \"SELECT round(date_part('epoch', now()) * 1000) as time\";\n}\nfunction insertWarning(schema) {\n    return `\n    INSERT INTO ${schema}.warning (type, message, data)\n    VALUES ($1, $2, $3)\n  `;\n}\nfunction getWarnings(schema) {\n    return `\n    SELECT\n      id,\n      type,\n      message,\n      data,\n      created_on as \"createdOn\"\n    FROM ${schema}.warning\n    WHERE ($1::text IS NULL OR type = $1)\n    ORDER BY created_on DESC\n    LIMIT $2 OFFSET $3\n  `;\n}\nfunction getWarningsCount(schema) {\n    return `\n    SELECT COUNT(*)::int as count\n    FROM ${schema}.warning\n    WHERE ($1::text IS NULL OR type = $1)\n  `;\n}\nfunction deleteOldWarnings(schema, days) {\n    return `\n    DELETE FROM ${schema}.warning\n    WHERE created_on < now() - interval '${days} days'\n  `;\n}\nfunction getVersion(schema) {\n    return `SELECT version from ${schema}.version`;\n}\nfunction setVersion(schema, version) {\n    return `UPDATE ${schema}.version SET version = '${version}'`;\n}\nfunction versionTableExists(schema) {\n    return `SELECT to_regclass('${schema}.version') as name`;\n}\nfunction insertVersion(schema, version) {\n    return `INSERT INTO ${schema}.version(version) VALUES ('${version}')`;\n}\nfunction buildFetchParams(options) {\n    const { ignoreSingletons, ignoreGroups, groupConcurrency } = options;\n    const hasIgnoreSingletons = ignoreSingletons != null && ignoreSingletons.length > 0;\n    const hasIgnoreGroups = ignoreGroups != null && ignoreGroups.length > 0;\n    const hasGroupConcurrency = groupConcurrency != null;\n    const groupConcurrencyConfig = hasGroupConcurrency\n        ? (typeof groupConcurrency === 'number' ? { default: groupConcurrency } : groupConcurrency)\n        : null;\n    const hasTiers = groupConcurrencyConfig?.tiers && Object.keys(groupConcurrencyConfig.tiers).length > 0;\n    const values = [];\n    let paramIndex = 0;\n    let ignoreSingletonsParam = '';\n    let ignoreGroupsParam = '';\n    let defaultGroupLimitParam = '';\n    let tiersParam = '';\n    if (hasIgnoreSingletons) {\n        paramIndex++;\n        ignoreSingletonsParam = `$${paramIndex}::text[]`;\n        values.push(ignoreSingletons);\n    }\n    if (hasIgnoreGroups) {\n        paramIndex++;\n        ignoreGroupsParam = `$${paramIndex}::text[]`;\n        values.push(ignoreGroups);\n    }\n    if (hasGroupConcurrency && groupConcurrencyConfig) {\n        paramIndex++;\n        defaultGroupLimitParam = `$${paramIndex}::int`;\n        values.push(groupConcurrencyConfig.default);\n        if (hasTiers) {\n            paramIndex++;\n            tiersParam = `$${paramIndex}::jsonb`;\n            values.push(JSON.stringify(groupConcurrencyConfig.tiers));\n        }\n    }\n    return { values, ignoreSingletonsParam, ignoreGroupsParam, defaultGroupLimitParam, tiersParam };\n}\nfunction fetchNextJob(options) {\n    const { schema, table, name, policy, limit, includeMetadata, priority = true, orderByCreatedOn = true, ignoreStartAfter = false, groupConcurrency } = options;\n    const singletonFetch = limit > 1 && (policy === QUEUE_POLICIES.singleton || policy === QUEUE_POLICIES.stately);\n    const hasIgnoreSingletons = options.ignoreSingletons != null && options.ignoreSingletons.length > 0;\n    const hasIgnoreGroups = options.ignoreGroups != null && options.ignoreGroups.length > 0;\n    const hasGroupConcurrency = groupConcurrency != null;\n    const hasTiers = hasGroupConcurrency &&\n        typeof groupConcurrency === 'object' &&\n        groupConcurrency.tiers &&\n        Object.keys(groupConcurrency.tiers).length > 0;\n    const params = buildFetchParams(options);\n    const whereConditions = [\n        `name = '${name}'`,\n        `state < '${JOB_STATES.active}'`,\n        !ignoreStartAfter ? 'start_after < now()' : '',\n        hasIgnoreSingletons ? `singleton_key <> ALL(${params.ignoreSingletonsParam})` : '',\n        hasIgnoreGroups ? `(group_id IS NULL OR group_id <> ALL(${params.ignoreGroupsParam}))` : ''\n    ].filter(Boolean).join(' AND ');\n    const selectCols = [\n        'id',\n        singletonFetch ? 'singleton_key' : '',\n        hasGroupConcurrency ? 'group_id, group_tier' : ''\n    ].filter(Boolean).join(', ');\n    const activeGroupCountsCte = hasGroupConcurrency\n        ? `active_group_counts AS (\n        SELECT group_id, COUNT(*)::int as active_cnt\n        FROM ${schema}.${table}\n        WHERE name = '${name}' AND state = '${JOB_STATES.active}' AND group_id IS NOT NULL\n        GROUP BY group_id\n      ), `\n        : '';\n    const nextCte = `\n      next AS (\n        SELECT ${selectCols}\n        FROM ${schema}.${table}\n        WHERE ${whereConditions}\n        ORDER BY ${priority ? 'priority desc, ' : ''}${orderByCreatedOn ? 'created_on, ' : ''}id\n        LIMIT ${limit}\n        FOR UPDATE SKIP LOCKED\n      )`;\n    const singletonCte = singletonFetch\n        ? `, singleton_ranking AS (\n        SELECT id, ${hasGroupConcurrency ? 'group_id, group_tier, ' : ''}\n          row_number() OVER (PARTITION BY singleton_key) as singleton_rn\n        FROM next\n      )`\n        : '';\n    const groupConcurrencyCtes = hasGroupConcurrency\n        ? `,\n      group_ranking AS (\n        SELECT t.id\n          , t.group_id\n          , t.group_tier\n          ${singletonFetch ? ', singleton_rn' : ''}\n          , ROW_NUMBER() OVER (PARTITION BY t.group_id ORDER BY t.id) as group_rn\n          , COALESCE(agc.active_cnt, 0) as active_cnt\n        FROM ${singletonFetch ? 'singleton_ranking' : 'next'} t\n        LEFT JOIN active_group_counts agc ON t.group_id = agc.group_id\n        ${singletonFetch ? 'WHERE singleton_rn = 1' : ''}\n      ),\n      group_filtered AS (\n        SELECT id FROM group_ranking\n        WHERE group_id IS NULL\n          OR (active_cnt + group_rn) <= ${hasTiers\n            ? `COALESCE((${params.tiersParam} ->> group_tier)::int, ${params.defaultGroupLimitParam})`\n            : params.defaultGroupLimitParam}\n      )`\n        : '';\n    const finalCte = (hasGroupConcurrency)\n        ? 'group_filtered'\n        : (singletonFetch)\n            ? 'singleton_ranking'\n            : 'next';\n    return {\n        text: `\n      WITH\n      ${activeGroupCountsCte}\n      ${nextCte}\n      ${singletonCte}\n      ${groupConcurrencyCtes}\n      UPDATE ${schema}.${table} j SET\n        state = '${JOB_STATES.active}',\n        started_on = now(),\n        retry_count = CASE WHEN started_on IS NOT NULL THEN retry_count + 1 ELSE retry_count END\n      FROM ${finalCte}\n      WHERE name = '${name}' AND j.id = ${finalCte}.id\n      ${singletonFetch && !hasGroupConcurrency ? 'AND singleton_rn = 1' : ''}\n      RETURNING j.${includeMetadata ? JOB_COLUMNS_ALL : JOB_COLUMNS_MIN}\n    `,\n        values: params.values\n    };\n}\nfunction completeJobs(schema, table, includeQueued) {\n    const stateFilter = includeQueued\n        ? `state < '${JOB_STATES.completed}'`\n        : `state = '${JOB_STATES.active}'`;\n    return `\n    WITH results AS (\n      UPDATE ${schema}.${table}\n      SET completed_on = now(),\n        state = '${JOB_STATES.completed}',\n        output = $3::jsonb\n      WHERE name = $1\n        AND id IN (SELECT UNNEST($2::uuid[]))\n        AND ${stateFilter}\n      RETURNING *\n    )\n    SELECT COUNT(*) FROM results\n  `;\n}\nfunction cancelJobs(schema, table) {\n    return `\n    WITH results as (\n      UPDATE ${schema}.${table}\n      SET completed_on = now(),\n        state = '${JOB_STATES.cancelled}'\n      WHERE name = $1\n        AND id IN (SELECT UNNEST($2::uuid[]))\n        AND state < '${JOB_STATES.completed}'\n      RETURNING 1\n    )\n    SELECT COUNT(*) from results\n  `;\n}\nfunction resumeJobs(schema, table) {\n    return `\n    WITH results as (\n      UPDATE ${schema}.${table}\n      SET completed_on = NULL,\n        state = '${JOB_STATES.created}'\n      WHERE name = $1\n        AND id IN (SELECT UNNEST($2::uuid[]))\n        AND state = '${JOB_STATES.cancelled}'\n      RETURNING 1\n    )\n    SELECT COUNT(*) from results\n  `;\n}\nfunction restoreJobs(schema, table) {\n    return `\n    UPDATE ${schema}.${table}\n    SET state = '${JOB_STATES.created}'\n    WHERE name = $1\n      AND id IN (SELECT UNNEST($2::uuid[]))\n  `;\n}\nfunction insertJobs(schema, { table, name, returnId = true }) {\n    const sql = `\n    INSERT INTO ${schema}.${table} (\n      id,\n      name,\n      data,\n      priority,\n      start_after,\n      singleton_key,\n      singleton_on,\n      group_id,\n      group_tier,\n      expire_seconds,\n      deletion_seconds,\n      keep_until,\n      retry_limit,\n      retry_delay,\n      retry_backoff,\n      retry_delay_max,\n      policy,\n      dead_letter\n    )\n    SELECT\n      COALESCE(id, gen_random_uuid()) as id,\n      '${name}' as name,\n      data,\n      COALESCE(priority, 0) as priority,\n      j.start_after,\n      \"singletonKey\",\n      CASE\n        WHEN \"singletonSeconds\" IS NOT NULL THEN 'epoch'::timestamp + '1s'::interval * (\"singletonSeconds\" * floor(( date_part('epoch', now()) + COALESCE(\"singletonOffset\",0)) / \"singletonSeconds\" ))\n        ELSE NULL\n        END as singleton_on,\n      \"groupId\" as group_id,\n      \"groupTier\" as group_tier,\n      COALESCE(\"expireInSeconds\", q.expire_seconds) as expire_seconds,\n      COALESCE(\"deleteAfterSeconds\", q.deletion_seconds) as deletion_seconds,\n      j.start_after + (COALESCE(\"retentionSeconds\", q.retention_seconds) * interval '1s') as keep_until,\n      COALESCE(\"retryLimit\", q.retry_limit) as retry_limit,\n      COALESCE(\"retryDelay\", q.retry_delay) as retry_delay,\n      COALESCE(\"retryBackoff\", q.retry_backoff, false) as retry_backoff,\n      COALESCE(\"retryDelayMax\", q.retry_delay_max) as retry_delay_max,\n      q.policy,\n      COALESCE(\"deadLetter\", q.dead_letter) as dead_letter\n    FROM (\n      SELECT *,\n        CASE\n          WHEN right(\"startAfter\", 1) = 'Z' THEN CAST(\"startAfter\" as timestamp with time zone)\n          ELSE now() + CAST(COALESCE(\"startAfter\",'0') as interval)\n          END as start_after\n      FROM json_to_recordset($1::json) as x (\n        id uuid,\n        priority integer,\n        data jsonb,\n        \"startAfter\" text,\n        \"retryLimit\" integer,\n        \"retryDelay\" integer,\n        \"retryDelayMax\" integer,\n        \"retryBackoff\" boolean,\n        \"singletonKey\" text,\n        \"singletonSeconds\" integer,\n        \"singletonOffset\" integer,\n        \"groupId\" text,\n        \"groupTier\" text,\n        \"expireInSeconds\" integer,\n        \"deleteAfterSeconds\" integer,\n        \"retentionSeconds\" integer,\n        \"deadLetter\" text\n      )\n    ) j\n    JOIN ${schema}.queue q ON q.name = '${name}'\n    ON CONFLICT DO NOTHING\n    ${returnId ? 'RETURNING id' : ''}\n  `;\n    return sql;\n}\nfunction failJobsById(schema, table) {\n    const where = `name = $1 AND id IN (SELECT UNNEST($2::uuid[])) AND state < '${JOB_STATES.completed}'`;\n    const output = '$3::jsonb';\n    return failJobs(schema, table, where, output);\n}\nfunction failJobsByTimeout(schema, table, queues) {\n    const where = `state = '${JOB_STATES.active}'\n            AND (started_on + expire_seconds * interval '1s') < now()\n            AND name = ANY(${serializeArrayParam(queues)})`;\n    const output = '\\'{ \"value\": { \"message\": \"job timed out\" } }\\'::jsonb';\n    return locked(schema, failJobs(schema, table, where, output), table + 'failJobsByTimeout');\n}\nfunction failJobs(schema, table, where, output) {\n    return `\n    WITH deleted_jobs AS (\n      DELETE FROM ${schema}.${table}\n      WHERE ${where}\n      RETURNING *\n    ),\n    retried_jobs AS (\n      INSERT INTO ${schema}.${table} (\n        id,\n        name,\n        priority,\n        data,\n        state,\n        retry_limit,\n        retry_count,\n        retry_delay,\n        retry_backoff,\n        retry_delay_max,\n        start_after,\n        started_on,\n        singleton_key,\n        singleton_on,\n        group_id,\n        group_tier,\n        expire_seconds,\n        deletion_seconds,\n        created_on,\n        completed_on,\n        keep_until,\n        policy,\n        output,\n        dead_letter\n      )\n      SELECT\n        id,\n        name,\n        priority,\n        data,\n        CASE\n          WHEN retry_count < retry_limit THEN '${JOB_STATES.retry}'::${schema}.job_state\n          ELSE '${JOB_STATES.failed}'::${schema}.job_state\n          END as state,\n        retry_limit,\n        retry_count,\n        retry_delay,\n        retry_backoff,\n        retry_delay_max,\n        CASE WHEN retry_count = retry_limit THEN start_after\n             WHEN NOT retry_backoff THEN now() + retry_delay * interval '1'\n             ELSE now() + LEAST(\n               retry_delay_max,\n               retry_delay * (\n                2 ^ LEAST(16, retry_count + 1) / 2 +\n                2 ^ LEAST(16, retry_count + 1) / 2 * random()\n               )\n             ) * interval '1s'\n        END as start_after,\n        started_on,\n        singleton_key,\n        singleton_on,\n        group_id,\n        group_tier,\n        expire_seconds,\n        deletion_seconds,\n        created_on,\n        CASE WHEN retry_count < retry_limit THEN NULL ELSE now() END as completed_on,\n        keep_until,\n        policy,\n        ${output},\n        dead_letter\n      FROM deleted_jobs\n      ON CONFLICT DO NOTHING\n      RETURNING *\n    ),\n    failed_jobs as (\n      INSERT INTO ${schema}.${table} (\n        id,\n        name,\n        priority,\n        data,\n        state,\n        retry_limit,\n        retry_count,\n        retry_delay,\n        retry_backoff,\n        retry_delay_max,\n        start_after,\n        started_on,\n        singleton_key,\n        singleton_on,\n        group_id,\n        group_tier,\n        expire_seconds,\n        deletion_seconds,\n        created_on,\n        completed_on,\n        keep_until,\n        policy,\n        output,\n        dead_letter\n      )\n      SELECT\n        id,\n        name,\n        priority,\n        data,\n        '${JOB_STATES.failed}'::${schema}.job_state as state,\n        retry_limit,\n        retry_count,\n        retry_delay,\n        retry_backoff,\n        retry_delay_max,\n        start_after,\n        started_on,\n        singleton_key,\n        singleton_on,\n        group_id,\n        group_tier,\n        expire_seconds,\n        deletion_seconds,\n        created_on,\n        now() as completed_on,\n        keep_until,\n        policy,\n        ${output},\n        dead_letter\n      FROM deleted_jobs\n      WHERE id NOT IN (SELECT id from retried_jobs)\n      RETURNING *\n    ),\n    results as (\n      SELECT * FROM retried_jobs\n      UNION ALL\n      SELECT * FROM failed_jobs\n    ),\n    dlq_jobs as (\n      INSERT INTO ${schema}.job (name, data, output, retry_limit, retry_backoff, retry_delay, keep_until, deletion_seconds)\n      SELECT\n        r.dead_letter,\n        data,\n        output,\n        q.retry_limit,\n        q.retry_backoff,\n        q.retry_delay,\n        now() + q.retention_seconds * interval '1s',\n        q.deletion_seconds\n      FROM results r\n        JOIN ${schema}.queue q ON q.name = r.dead_letter\n      WHERE state = '${JOB_STATES.failed}'\n    )\n    SELECT COUNT(*) FROM results\n  `;\n}\nfunction deletion(schema, table, queues) {\n    const sql = `\n    DELETE FROM ${schema}.${table}\n    WHERE name = ANY(${serializeArrayParam(queues)})\n      AND\n      (\n        (deletion_seconds > 0 AND completed_on + deletion_seconds * interval '1s' < now())\n        OR\n        (state < '${JOB_STATES.active}' AND keep_until < now())\n      )\n  `;\n    return locked(schema, sql, table + 'deletion');\n}\nfunction retryJobs(schema, table) {\n    return `\n    WITH results as (\n      UPDATE ${schema}.job\n      SET state = '${JOB_STATES.retry}',\n        retry_limit = retry_limit + 1\n      WHERE name = $1\n        AND id IN (SELECT UNNEST($2::uuid[]))\n        AND state = '${JOB_STATES.failed}'\n      RETURNING 1\n    )\n    SELECT COUNT(*) from results\n  `;\n}\nfunction getQueueStats(schema, table, queues) {\n    return {\n        text: `\n    SELECT\n        name,\n        (count(*) FILTER (WHERE start_after > now()))::int as \"deferredCount\",\n        (count(*) FILTER (WHERE state < '${JOB_STATES.active}'))::int as \"queuedCount\",\n        (count(*) FILTER (WHERE state = '${JOB_STATES.active}'))::int as \"activeCount\",\n        count(*)::int as \"totalCount\",\n        array_agg(singleton_key) FILTER (WHERE policy IN ('${QUEUE_POLICIES.singleton}','${QUEUE_POLICIES.stately}') AND state = '${JOB_STATES.active}') as \"singletonsActive\"\n      FROM ${schema}.${table}\n      WHERE name = ANY($1::text[])\n      GROUP BY 1\n  `,\n        values: [queues]\n    };\n}\nfunction cacheQueueStats(schema, table, queues) {\n    const statsQuery = getQueueStats(schema, table, queues);\n    // Serialize the $1 parameter for use in locked() multi-statement query\n    const statsText = statsQuery.text.replace('$1::text[]', serializeArrayParam(queues));\n    const sql = `\n    WITH stats AS (${statsText})\n    UPDATE ${schema}.queue SET\n      deferred_count = COALESCE(stats.\"deferredCount\", 0),\n      queued_count = COALESCE(stats.\"queuedCount\", 0),\n      active_count = COALESCE(stats.\"activeCount\", 0),\n      total_count = COALESCE(stats.\"totalCount\", 0),\n      singletons_active = stats.\"singletonsActive\"\n    FROM (\n      SELECT q.name\n      FROM unnest(${serializeArrayParam(queues)}) AS q(name)\n    ) q\n    LEFT JOIN stats ON stats.name = q.name\n    WHERE queue.name = q.name\n    RETURNING\n      queue.name,\n      queue.queued_count as \"queuedCount\",\n      queue.warning_queued as \"warningQueueSize\"\n  `;\n    return locked(schema, sql, 'queue-stats');\n}\n// Serialize a string array for embedding directly in SQL as PostgreSQL array literal\nfunction serializeArrayParam(values) {\n    const escaped = values.map(v => `'${v.replace(SINGLE_QUOTE_REGEX, \"''\")}'`);\n    return `ARRAY[${escaped.join(',')}]::text[]`;\n}\nfunction locked(schema, query, key) {\n    const sql = Array.isArray(query) ? query.join(';\\n') : query;\n    return `\n    BEGIN;\n    SET LOCAL lock_timeout = 30000;\n    SET LOCAL idle_in_transaction_session_timeout = 30000;\n    ${advisoryLock(schema, key)};\n    ${sql};\n    COMMIT;\n  `;\n}\nfunction advisoryLock(schema, key) {\n    return `SELECT pg_advisory_xact_lock(\n      ('x' || encode(sha224((current_database() || '.pgboss.${schema}${key || ''}')::bytea), 'hex'))::bit(64)::bigint\n  )`;\n}\nfunction assertMigration(schema, version) {\n    // raises 'division by zero' if already on desired schema version\n    return `SELECT version::int/(version::int-${version}) from ${schema}.version`;\n}\nfunction findJobs(schema, table, options) {\n    const { queued, byKey, byData, byId } = options;\n    let paramIndex = 1;\n    const whereConditions = [];\n    if (byId) {\n        ++paramIndex;\n        whereConditions.push(`AND id = $${paramIndex}`);\n    }\n    if (byKey) {\n        ++paramIndex;\n        whereConditions.push(`AND singleton_key = $${paramIndex}`);\n    }\n    if (byData) {\n        ++paramIndex;\n        whereConditions.push(`AND data @> $${paramIndex}`);\n    }\n    if (queued) {\n        whereConditions.push(`AND state < '${JOB_STATES.active}'`);\n    }\n    return `\n    SELECT ${JOB_COLUMNS_ALL}\n    FROM ${schema}.${table}\n    WHERE name = $1\n      ${whereConditions.join('\\n      ')}\n    `;\n}\nfunction getJobById(schema, table) {\n    return `\n    SELECT ${JOB_COLUMNS_ALL}\n    FROM ${schema}.${table}\n    WHERE name = $1\n      AND id = $2\n    `;\n}\nfunction getBlockedKeys(schema, table) {\n    return `\n    SELECT DISTINCT singleton_key as \"singletonKey\"\n    FROM ${schema}.${table}\n    WHERE name = $1\n      AND state = '${JOB_STATES.failed}'\n      AND policy = '${QUEUE_POLICIES.key_strict_fifo}'\n    `;\n}\nfunction getNextBamCommand(schema) {\n    return `\n    UPDATE ${schema}.bam\n    SET status = 'in_progress', started_on = now()\n    WHERE id = (\n      SELECT id FROM ${schema}.bam\n      WHERE status IN ('pending', 'failed')\n        AND NOT EXISTS (SELECT 1 FROM ${schema}.bam WHERE status = 'in_progress')\n      ORDER BY created_on\n      LIMIT 1\n    )\n    RETURNING id, name, version, status, queue, table_name as \"table\", command, error,\n              created_on as \"createdOn\", started_on as \"startedOn\", completed_on as \"completedOn\"\n  `;\n}\nfunction setBamCompleted(schema, id) {\n    return `\n    UPDATE ${schema}.bam\n    SET status = 'completed', completed_on = now()\n    WHERE id = '${id}'\n  `;\n}\nfunction setBamFailed(schema, id, error) {\n    const escapedError = error.replace(/'/g, \"''\");\n    return `\n    UPDATE ${schema}.bam\n    SET status = 'failed', error = '${escapedError}', completed_on = now()\n    WHERE id = '${id}'\n  `;\n}\nfunction getBamStatus(schema) {\n    return `\n    SELECT status, count(*)::int as count, max(created_on) as \"lastCreatedOn\"\n    FROM ${schema}.bam\n    GROUP BY status\n  `;\n}\nfunction getBamEntries(schema) {\n    return `\n    SELECT id, name, version, status, queue, table_name as \"table\", command, error,\n           created_on as \"createdOn\", started_on as \"startedOn\", completed_on as \"completedOn\"\n    FROM ${schema}.bam\n    ORDER BY version, created_on\n  `;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvcGxhbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLE9BQU87QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCLFNBQVMsbUJBQW1CO0FBQzVCLFNBQVMsaUJBQWlCO0FBQzFCLFNBQVMsa0JBQWtCO0FBQzNCLFNBQVMscUJBQXFCO0FBQzlCLFNBQVMscUJBQXFCO0FBQzlCLFNBQVMsa0JBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLE9BQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNxNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWVwLWFyY2hpdGVjdHVyZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9wZy1ib3NzQDEyLjExLjEvbm9kZV9tb2R1bGVzL3BnLWJvc3MvZGlzdC9wbGFucy5qcz9hMzE4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERFRkFVTFRfU0NIRU1BID0gJ3BnYm9zcyc7XG5jb25zdCBNSUdSQVRFX1JBQ0VfTUVTU0FHRSA9ICdkaXZpc2lvbiBieSB6ZXJvJztcbmNvbnN0IENSRUFURV9SQUNFX01FU1NBR0UgPSAnYWxyZWFkeSBleGlzdHMnO1xuY29uc3QgU0lOR0xFX1FVT1RFX1JFR0VYID0gLycvZztcbmNvbnN0IEZJRlRFRU5fTUlOVVRFUyA9IDYwICogMTU7XG5jb25zdCBGT1JURUVOX0RBWVMgPSA2MCAqIDYwICogMjQgKiAxNDtcbmNvbnN0IFNFVkVOX0RBWVMgPSA2MCAqIDYwICogMjQgKiA3O1xuY29uc3QgSk9CX1NUQVRFUyA9IE9iamVjdC5mcmVlemUoe1xuICAgIGNyZWF0ZWQ6ICdjcmVhdGVkJyxcbiAgICByZXRyeTogJ3JldHJ5JyxcbiAgICBhY3RpdmU6ICdhY3RpdmUnLFxuICAgIGNvbXBsZXRlZDogJ2NvbXBsZXRlZCcsXG4gICAgY2FuY2VsbGVkOiAnY2FuY2VsbGVkJyxcbiAgICBmYWlsZWQ6ICdmYWlsZWQnXG59KTtcbmNvbnN0IFFVRVVFX1BPTElDSUVTID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhbmRhcmQ6ICdzdGFuZGFyZCcsXG4gICAgc2hvcnQ6ICdzaG9ydCcsXG4gICAgc2luZ2xldG9uOiAnc2luZ2xldG9uJyxcbiAgICBzdGF0ZWx5OiAnc3RhdGVseScsXG4gICAgZXhjbHVzaXZlOiAnZXhjbHVzaXZlJyxcbiAgICBrZXlfc3RyaWN0X2ZpZm86ICdrZXlfc3RyaWN0X2ZpZm8nXG59KTtcbmNvbnN0IFFVRVVFX0RFRkFVTFRTID0ge1xuICAgIGV4cGlyZV9zZWNvbmRzOiBGSUZURUVOX01JTlVURVMsXG4gICAgcmV0ZW50aW9uX3NlY29uZHM6IEZPUlRFRU5fREFZUyxcbiAgICBkZWxldGlvbl9zZWNvbmRzOiBTRVZFTl9EQVlTLFxuICAgIHJldHJ5X2xpbWl0OiAyLFxuICAgIHJldHJ5X2RlbGF5OiAwLFxuICAgIHdhcm5pbmdfcXVldWVkOiAwLFxuICAgIHJldHJ5X2JhY2tvZmY6IGZhbHNlLFxuICAgIHBhcnRpdGlvbjogZmFsc2Vcbn07XG5jb25zdCBDT01NT05fSk9CX1RBQkxFID0gJ2pvYl9jb21tb24nO1xuZnVuY3Rpb24gY3JlYXRlKHNjaGVtYSwgdmVyc2lvbiwgb3B0aW9ucykge1xuICAgIGNvbnN0IGNvbW1hbmRzID0gW1xuICAgICAgICBvcHRpb25zPy5jcmVhdGVTY2hlbWEgPyBjcmVhdGVTY2hlbWEoc2NoZW1hKSA6ICcnLFxuICAgICAgICBjcmVhdGVFbnVtSm9iU3RhdGUoc2NoZW1hKSxcbiAgICAgICAgY3JlYXRlVGFibGVWZXJzaW9uKHNjaGVtYSksXG4gICAgICAgIGNyZWF0ZVRhYmxlUXVldWUoc2NoZW1hKSxcbiAgICAgICAgY3JlYXRlVGFibGVTY2hlZHVsZShzY2hlbWEpLFxuICAgICAgICBjcmVhdGVUYWJsZVN1YnNjcmlwdGlvbihzY2hlbWEpLFxuICAgICAgICBjcmVhdGVUYWJsZUJhbShzY2hlbWEpLFxuICAgICAgICBqb2JUYWJsZUZvcm1hdEZ1bmN0aW9uKHNjaGVtYSksXG4gICAgICAgIGpvYlRhYmxlUnVuRnVuY3Rpb24oc2NoZW1hKSxcbiAgICAgICAgam9iVGFibGVSdW5Bc3luY0Z1bmN0aW9uKHNjaGVtYSksXG4gICAgICAgIGNyZWF0ZVRhYmxlSm9iKHNjaGVtYSksXG4gICAgICAgIGNyZWF0ZVByaW1hcnlLZXlKb2Ioc2NoZW1hKSxcbiAgICAgICAgY3JlYXRlVGFibGVKb2JDb21tb24oc2NoZW1hKSxcbiAgICAgICAgY3JlYXRlVGFibGVXYXJuaW5nKHNjaGVtYSksXG4gICAgICAgIGNyZWF0ZUluZGV4V2FybmluZyhzY2hlbWEpLFxuICAgICAgICBjcmVhdGVRdWV1ZUZ1bmN0aW9uKHNjaGVtYSksXG4gICAgICAgIGRlbGV0ZVF1ZXVlRnVuY3Rpb24oc2NoZW1hKSxcbiAgICAgICAgaW5zZXJ0VmVyc2lvbihzY2hlbWEsIHZlcnNpb24pXG4gICAgXTtcbiAgICByZXR1cm4gbG9ja2VkKHNjaGVtYSwgY29tbWFuZHMpO1xufVxuZnVuY3Rpb24gY3JlYXRlU2NoZW1hKHNjaGVtYSkge1xuICAgIHJldHVybiBgQ1JFQVRFIFNDSEVNQSBJRiBOT1QgRVhJU1RTICR7c2NoZW1hfWA7XG59XG5mdW5jdGlvbiBjcmVhdGVFbnVtSm9iU3RhdGUoc2NoZW1hKSB7XG4gICAgLy8gRU5VTSBkZWZpbml0aW9uIG9yZGVyIGlzIGltcG9ydGFudFxuICAgIC8vIGJhc2UgdHlwZSBpcyBudW1lcmljIGFuZCBmaXJzdCB2YWx1ZXMgYXJlIGxlc3MgdGhhbiBsYXN0IHZhbHVlc1xuICAgIHJldHVybiBgXG4gICAgQ1JFQVRFIFRZUEUgJHtzY2hlbWF9LmpvYl9zdGF0ZSBBUyBFTlVNIChcbiAgICAgICcke0pPQl9TVEFURVMuY3JlYXRlZH0nLFxuICAgICAgJyR7Sk9CX1NUQVRFUy5yZXRyeX0nLFxuICAgICAgJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JyxcbiAgICAgICcke0pPQl9TVEFURVMuY29tcGxldGVkfScsXG4gICAgICAnJHtKT0JfU1RBVEVTLmNhbmNlbGxlZH0nLFxuICAgICAgJyR7Sk9CX1NUQVRFUy5mYWlsZWR9J1xuICAgIClcbiAgYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlVmVyc2lvbihzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIENSRUFURSBUQUJMRSAke3NjaGVtYX0udmVyc2lvbiAoXG4gICAgICB2ZXJzaW9uIGludCBwcmltYXJ5IGtleSxcbiAgICAgIGNyb25fb24gdGltZXN0YW1wIHdpdGggdGltZSB6b25lLFxuICAgICAgYmFtX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZVxuICAgIClcbiAgYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlUXVldWUoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBDUkVBVEUgVEFCTEUgJHtzY2hlbWF9LnF1ZXVlIChcbiAgICAgIG5hbWUgdGV4dCBOT1QgTlVMTCxcbiAgICAgIHBvbGljeSB0ZXh0IE5PVCBOVUxMLFxuICAgICAgcmV0cnlfbGltaXQgaW50IE5PVCBOVUxMLFxuICAgICAgcmV0cnlfZGVsYXkgaW50IE5PVCBOVUxMLFxuICAgICAgcmV0cnlfYmFja29mZiBib29sIE5PVCBOVUxMLFxuICAgICAgcmV0cnlfZGVsYXlfbWF4IGludCxcbiAgICAgIGV4cGlyZV9zZWNvbmRzIGludCBOT1QgTlVMTCxcbiAgICAgIHJldGVudGlvbl9zZWNvbmRzIGludCBOT1QgTlVMTCxcbiAgICAgIGRlbGV0aW9uX3NlY29uZHMgaW50IE5PVCBOVUxMLFxuICAgICAgZGVhZF9sZXR0ZXIgdGV4dCBSRUZFUkVOQ0VTICR7c2NoZW1hfS5xdWV1ZSAobmFtZSkgQ0hFQ0sgKGRlYWRfbGV0dGVyIElTIERJU1RJTkNUIEZST00gbmFtZSksXG4gICAgICBwYXJ0aXRpb24gYm9vbCBOT1QgTlVMTCxcbiAgICAgIHRhYmxlX25hbWUgdGV4dCBOT1QgTlVMTCxcbiAgICAgIGRlZmVycmVkX2NvdW50IGludCBOT1QgTlVMTCBkZWZhdWx0IDAsXG4gICAgICBxdWV1ZWRfY291bnQgaW50IE5PVCBOVUxMIGRlZmF1bHQgMCxcbiAgICAgIHdhcm5pbmdfcXVldWVkIGludCBOT1QgTlVMTCBkZWZhdWx0IDAsXG4gICAgICBhY3RpdmVfY291bnQgaW50IE5PVCBOVUxMIGRlZmF1bHQgMCxcbiAgICAgIHRvdGFsX2NvdW50IGludCBOT1QgTlVMTCBkZWZhdWx0IDAsXG4gICAgICBzaW5nbGV0b25zX2FjdGl2ZSB0ZXh0W10sXG4gICAgICBtb25pdG9yX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSxcbiAgICAgIG1haW50YWluX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSxcbiAgICAgIGNyZWF0ZWRfb24gdGltZXN0YW1wIHdpdGggdGltZSB6b25lIG5vdCBudWxsIGRlZmF1bHQgbm93KCksXG4gICAgICB1cGRhdGVkX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBub3QgbnVsbCBkZWZhdWx0IG5vdygpLFxuICAgICAgUFJJTUFSWSBLRVkgKG5hbWUpXG4gICAgKVxuICBgO1xufVxuZnVuY3Rpb24gY3JlYXRlVGFibGVTY2hlZHVsZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIENSRUFURSBUQUJMRSAke3NjaGVtYX0uc2NoZWR1bGUgKFxuICAgICAgbmFtZSB0ZXh0IFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIE9OIERFTEVURSBDQVNDQURFLFxuICAgICAga2V5IHRleHQgbm90IG51bGwgREVGQVVMVCAnJyxcbiAgICAgIGNyb24gdGV4dCBub3QgbnVsbCxcbiAgICAgIHRpbWV6b25lIHRleHQsXG4gICAgICBkYXRhIGpzb25iLFxuICAgICAgb3B0aW9ucyBqc29uYixcbiAgICAgIGNyZWF0ZWRfb24gdGltZXN0YW1wIHdpdGggdGltZSB6b25lIG5vdCBudWxsIGRlZmF1bHQgbm93KCksXG4gICAgICB1cGRhdGVkX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBub3QgbnVsbCBkZWZhdWx0IG5vdygpLFxuICAgICAgUFJJTUFSWSBLRVkgKG5hbWUsIGtleSlcbiAgICApXG4gIGA7XG59XG5mdW5jdGlvbiBjcmVhdGVUYWJsZVN1YnNjcmlwdGlvbihzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIENSRUFURSBUQUJMRSAke3NjaGVtYX0uc3Vic2NyaXB0aW9uIChcbiAgICAgIGV2ZW50IHRleHQgbm90IG51bGwsXG4gICAgICBuYW1lIHRleHQgbm90IG51bGwgUkVGRVJFTkNFUyAke3NjaGVtYX0ucXVldWUgT04gREVMRVRFIENBU0NBREUsXG4gICAgICBjcmVhdGVkX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBub3QgbnVsbCBkZWZhdWx0IG5vdygpLFxuICAgICAgdXBkYXRlZF9vbiB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgbm90IG51bGwgZGVmYXVsdCBub3coKSxcbiAgICAgIFBSSU1BUlkgS0VZKGV2ZW50LCBuYW1lKVxuICAgIClcbiAgYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlQmFtKHNjaGVtYSkge1xuICAgIHJldHVybiBgXG4gICAgQ1JFQVRFIFRBQkxFICR7c2NoZW1hfS5iYW0gKFxuICAgICAgaWQgdXVpZCBQUklNQVJZIEtFWSBkZWZhdWx0IGdlbl9yYW5kb21fdXVpZCgpLFxuICAgICAgbmFtZSB0ZXh0IE5PVCBOVUxMLFxuICAgICAgdmVyc2lvbiBpbnQgTk9UIE5VTEwsXG4gICAgICBzdGF0dXMgdGV4dCBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICAgIHF1ZXVlIHRleHQsXG4gICAgICB0YWJsZV9uYW1lIHRleHQgTk9UIE5VTEwsXG4gICAgICBjb21tYW5kIHRleHQgTk9UIE5VTEwsXG4gICAgICBlcnJvciB0ZXh0LFxuICAgICAgY3JlYXRlZF9vbiB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgTk9UIE5VTEwgREVGQVVMVCBub3coKSxcbiAgICAgIHN0YXJ0ZWRfb24gdGltZXN0YW1wIHdpdGggdGltZSB6b25lLFxuICAgICAgY29tcGxldGVkX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZVxuICAgIClcbiAgYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlV2FybmluZyhzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIENSRUFURSBUQUJMRSAke3NjaGVtYX0ud2FybmluZyAoXG4gICAgICBpZCB1dWlkIFBSSU1BUlkgS0VZIGRlZmF1bHQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICB0eXBlIHRleHQgTk9UIE5VTEwsXG4gICAgICBtZXNzYWdlIHRleHQgTk9UIE5VTEwsXG4gICAgICBkYXRhIGpzb25iLFxuICAgICAgY3JlYXRlZF9vbiB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgTk9UIE5VTEwgREVGQVVMVCBub3coKVxuICAgIClcbiAgYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluZGV4V2FybmluZyhzY2hlbWEpIHtcbiAgICByZXR1cm4gYENSRUFURSBJTkRFWCB3YXJuaW5nX2kxIE9OICR7c2NoZW1hfS53YXJuaW5nIChjcmVhdGVkX29uIERFU0MpYDtcbn1cbmZ1bmN0aW9uIGpvYlRhYmxlRm9ybWF0RnVuY3Rpb24oc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBDUkVBVEUgRlVOQ1RJT04gJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoY29tbWFuZCB0ZXh0LCB0YWJsZV9uYW1lIHRleHQpXG4gICAgUkVUVVJOUyB0ZXh0IEFTXG4gICAgJCRcbiAgICAgIFNFTEVDVCBmb3JtYXQoXG4gICAgICAgIHJlcGxhY2UoXG4gICAgICAgICAgcmVwbGFjZShjb21tYW5kLCAnLmpvYicsICcuJTEkSScpLFxuICAgICAgICAgICdqb2JfaScsICclMSRzX2knXG4gICAgICAgICksXG4gICAgICAgIHRhYmxlX25hbWVcbiAgICAgICk7XG4gICAgJCRcbiAgICBMQU5HVUFHRSBzcWwgSU1NVVRBQkxFO1xuICBgO1xufVxuZnVuY3Rpb24gam9iVGFibGVSdW5GdW5jdGlvbihzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIENSRUFURSBGVU5DVElPTiAke3NjaGVtYX0uam9iX3RhYmxlX3J1bihjb21tYW5kIHRleHQsIHRibF9uYW1lIHRleHQgREVGQVVMVCBOVUxMLCBxdWV1ZV9uYW1lIHRleHQgREVGQVVMVCBOVUxMKVxuICAgIFJFVFVSTlMgVk9JRCBBU1xuICAgICQkXG4gICAgREVDTEFSRVxuICAgICAgdGJsIFJFQ09SRDtcbiAgICBCRUdJTlxuICAgICAgSUYgcXVldWVfbmFtZSBJUyBOT1QgTlVMTCBUSEVOXG4gICAgICAgIFNFTEVDVCB0YWJsZV9uYW1lIElOVE8gdGJsX25hbWUgRlJPTSAke3NjaGVtYX0ucXVldWUgV0hFUkUgbmFtZSA9IHF1ZXVlX25hbWU7XG4gICAgICBFTkQgSUY7XG5cbiAgICAgIElGIHRibF9uYW1lIElTIE5PVCBOVUxMIFRIRU5cbiAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCB0YmxfbmFtZSk7XG4gICAgICAgIFJFVFVSTjtcbiAgICAgIEVORCBJRjtcblxuICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuXG4gICAgICBGT1IgdGJsIElOIFNFTEVDVCB0YWJsZV9uYW1lIEZST00gJHtzY2hlbWF9LnF1ZXVlIFdIRVJFIHBhcnRpdGlvbiA9IHRydWVcbiAgICAgIExPT1BcbiAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdChjb21tYW5kLCB0YmwudGFibGVfbmFtZSk7XG4gICAgICBFTkQgTE9PUDtcbiAgICBFTkQ7XG4gICAgJCRcbiAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICBgO1xufVxuZnVuY3Rpb24gam9iVGFibGVSdW5Bc3luY0Z1bmN0aW9uKHNjaGVtYSkge1xuICAgIHJldHVybiBgXG4gICAgQ1JFQVRFIEZVTkNUSU9OICR7c2NoZW1hfS5qb2JfdGFibGVfcnVuX2FzeW5jKGNvbW1hbmRfbmFtZSB0ZXh0LCB2ZXJzaW9uIGludCwgY29tbWFuZCB0ZXh0LCB0YmxfbmFtZSB0ZXh0IERFRkFVTFQgTlVMTCwgcXVldWVfbmFtZSB0ZXh0IERFRkFVTFQgTlVMTClcbiAgICBSRVRVUk5TIFZPSUQgQVNcbiAgICAkJFxuICAgIEJFR0lOXG4gICAgICBJRiBxdWV1ZV9uYW1lIElTIE5PVCBOVUxMIFRIRU5cbiAgICAgICAgU0VMRUNUIHRhYmxlX25hbWUgSU5UTyB0YmxfbmFtZSBGUk9NICR7c2NoZW1hfS5xdWV1ZSBXSEVSRSBuYW1lID0gcXVldWVfbmFtZTtcbiAgICAgIEVORCBJRjtcblxuICAgICAgSUYgdGJsX25hbWUgSVMgTk9UIE5VTEwgVEhFTlxuICAgICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0uYmFtIChuYW1lLCB2ZXJzaW9uLCBzdGF0dXMsIHF1ZXVlLCB0YWJsZV9uYW1lLCBjb21tYW5kKVxuICAgICAgICBWQUxVRVMgKFxuICAgICAgICAgIGNvbW1hbmRfbmFtZSxcbiAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICdwZW5kaW5nJyxcbiAgICAgICAgICBxdWV1ZV9uYW1lLFxuICAgICAgICAgIHRibF9uYW1lLFxuICAgICAgICAgICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KGNvbW1hbmQsIHRibF9uYW1lKVxuICAgICAgICApO1xuICAgICAgICBSRVRVUk47XG4gICAgICBFTkQgSUY7XG5cbiAgICAgIElOU0VSVCBJTlRPICR7c2NoZW1hfS5iYW0gKG5hbWUsIHZlcnNpb24sIHN0YXR1cywgcXVldWUsIHRhYmxlX25hbWUsIGNvbW1hbmQpXG4gICAgICBTRUxFQ1RcbiAgICAgICAgY29tbWFuZF9uYW1lLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAncGVuZGluZycsXG4gICAgICAgIE5VTEwsXG4gICAgICAgICcke0NPTU1PTl9KT0JfVEFCTEV9JyxcbiAgICAgICAgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoY29tbWFuZCwgJyR7Q09NTU9OX0pPQl9UQUJMRX0nKVxuICAgICAgVU5JT04gQUxMXG4gICAgICBTRUxFQ1RcbiAgICAgICAgY29tbWFuZF9uYW1lLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAncGVuZGluZycsXG4gICAgICAgIHF1ZXVlLm5hbWUsXG4gICAgICAgIHF1ZXVlLnRhYmxlX25hbWUsXG4gICAgICAgICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KGNvbW1hbmQsIHF1ZXVlLnRhYmxlX25hbWUpXG4gICAgICBGUk9NICR7c2NoZW1hfS5xdWV1ZVxuICAgICAgV0hFUkUgcGFydGl0aW9uID0gdHJ1ZTtcbiAgICBFTkQ7XG4gICAgJCRcbiAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICBgO1xufVxuZnVuY3Rpb24gY3JlYXRlVGFibGVKb2Ioc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBDUkVBVEUgVEFCTEUgJHtzY2hlbWF9LmpvYiAoXG4gICAgICBpZCB1dWlkIG5vdCBudWxsIGRlZmF1bHQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICBuYW1lIHRleHQgbm90IG51bGwsXG4gICAgICBwcmlvcml0eSBpbnRlZ2VyIG5vdCBudWxsIGRlZmF1bHQoMCksXG4gICAgICBkYXRhIGpzb25iLFxuICAgICAgc3RhdGUgJHtzY2hlbWF9LmpvYl9zdGF0ZSBub3QgbnVsbCBkZWZhdWx0ICcke0pPQl9TVEFURVMuY3JlYXRlZH0nLFxuICAgICAgcmV0cnlfbGltaXQgaW50ZWdlciBub3QgbnVsbCBkZWZhdWx0ICR7UVVFVUVfREVGQVVMVFMucmV0cnlfbGltaXR9LFxuICAgICAgcmV0cnlfY291bnQgaW50ZWdlciBub3QgbnVsbCBkZWZhdWx0IDAsXG4gICAgICByZXRyeV9kZWxheSBpbnRlZ2VyIG5vdCBudWxsIGRlZmF1bHQgJHtRVUVVRV9ERUZBVUxUUy5yZXRyeV9kZWxheX0sXG4gICAgICByZXRyeV9iYWNrb2ZmIGJvb2xlYW4gbm90IG51bGwgZGVmYXVsdCAke1FVRVVFX0RFRkFVTFRTLnJldHJ5X2JhY2tvZmZ9LFxuICAgICAgcmV0cnlfZGVsYXlfbWF4IGludGVnZXIsXG4gICAgICBleHBpcmVfc2Vjb25kcyBpbnQgbm90IG51bGwgZGVmYXVsdCAke1FVRVVFX0RFRkFVTFRTLmV4cGlyZV9zZWNvbmRzfSxcbiAgICAgIGRlbGV0aW9uX3NlY29uZHMgaW50IG5vdCBudWxsIGRlZmF1bHQgJHtRVUVVRV9ERUZBVUxUUy5kZWxldGlvbl9zZWNvbmRzfSxcbiAgICAgIHNpbmdsZXRvbl9rZXkgdGV4dCxcbiAgICAgIHNpbmdsZXRvbl9vbiB0aW1lc3RhbXAgd2l0aG91dCB0aW1lIHpvbmUsXG4gICAgICBncm91cF9pZCB0ZXh0LFxuICAgICAgZ3JvdXBfdGllciB0ZXh0LFxuICAgICAgc3RhcnRfYWZ0ZXIgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIG5vdCBudWxsIGRlZmF1bHQgbm93KCksXG4gICAgICBjcmVhdGVkX29uIHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBub3QgbnVsbCBkZWZhdWx0IG5vdygpLFxuICAgICAgc3RhcnRlZF9vbiB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUsXG4gICAgICBjb21wbGV0ZWRfb24gdGltZXN0YW1wIHdpdGggdGltZSB6b25lLFxuICAgICAga2VlcF91bnRpbCB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgTk9UIE5VTEwgZGVmYXVsdCBub3coKSArIGludGVydmFsICcke1FVRVVFX0RFRkFVTFRTLnJldGVudGlvbl9zZWNvbmRzfScsXG4gICAgICBvdXRwdXQganNvbmIsXG4gICAgICBkZWFkX2xldHRlciB0ZXh0LFxuICAgICAgcG9saWN5IHRleHRcbiAgICApIFBBUlRJVElPTiBCWSBMSVNUIChuYW1lKVxuICBgO1xufVxuY29uc3QgSk9CX0NPTFVNTlNfTUlOID0gJ2lkLCBuYW1lLCBkYXRhLCBleHBpcmVfc2Vjb25kcyBhcyBcImV4cGlyZUluU2Vjb25kc1wiLCBncm91cF9pZCBhcyBcImdyb3VwSWRcIiwgZ3JvdXBfdGllciBhcyBcImdyb3VwVGllclwiJztcbmNvbnN0IEpPQl9DT0xVTU5TX0FMTCA9IGAke0pPQl9DT0xVTU5TX01JTn0sXG4gIHBvbGljeSxcbiAgc3RhdGUsXG4gIHByaW9yaXR5LFxuICByZXRyeV9saW1pdCBhcyBcInJldHJ5TGltaXRcIixcbiAgcmV0cnlfY291bnQgYXMgXCJyZXRyeUNvdW50XCIsXG4gIHJldHJ5X2RlbGF5IGFzIFwicmV0cnlEZWxheVwiLFxuICByZXRyeV9iYWNrb2ZmIGFzIFwicmV0cnlCYWNrb2ZmXCIsXG4gIHJldHJ5X2RlbGF5X21heCBhcyBcInJldHJ5RGVsYXlNYXhcIixcbiAgc3RhcnRfYWZ0ZXIgYXMgXCJzdGFydEFmdGVyXCIsXG4gIHN0YXJ0ZWRfb24gYXMgXCJzdGFydGVkT25cIixcbiAgc2luZ2xldG9uX2tleSBhcyBcInNpbmdsZXRvbktleVwiLFxuICBzaW5nbGV0b25fb24gYXMgXCJzaW5nbGV0b25PblwiLFxuICBkZWxldGlvbl9zZWNvbmRzIGFzIFwiZGVsZXRlQWZ0ZXJTZWNvbmRzXCIsXG4gIGNyZWF0ZWRfb24gYXMgXCJjcmVhdGVkT25cIixcbiAgY29tcGxldGVkX29uIGFzIFwiY29tcGxldGVkT25cIixcbiAga2VlcF91bnRpbCBhcyBcImtlZXBVbnRpbFwiLFxuICBkZWFkX2xldHRlciBhcyBcImRlYWRMZXR0ZXJcIixcbiAgb3V0cHV0XG5gO1xuZnVuY3Rpb24gY3JlYXRlVGFibGVKb2JDb21tb24oc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBDUkVBVEUgVEFCTEUgJHtzY2hlbWF9LiR7Q09NTU9OX0pPQl9UQUJMRX0gKExJS0UgJHtzY2hlbWF9LmpvYiBJTkNMVURJTkcgR0VORVJBVEVEIElOQ0xVRElORyBERUZBVUxUUyk7XG5cbiAgICBTRUxFQ1QgJHtzY2hlbWF9LmpvYl90YWJsZV9ydW4oJGNtZCQke2NyZWF0ZVByaW1hcnlLZXlKb2Ioc2NoZW1hKX0kY21kJCwgJyR7Q09NTU9OX0pPQl9UQUJMRX0nKTtcbiAgICBTRUxFQ1QgJHtzY2hlbWF9LmpvYl90YWJsZV9ydW4oJGNtZCQke2NyZWF0ZVF1ZXVlRm9yZWlnbktleUpvYihzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlUXVldWVGb3JlaWduS2V5Sm9iRGVhZExldHRlcihzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlSW5kZXhKb2JQb2xpY3lTaG9ydChzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlSW5kZXhKb2JQb2xpY3lTaW5nbGV0b24oc2NoZW1hKX0kY21kJCwgJyR7Q09NTU9OX0pPQl9UQUJMRX0nKTtcbiAgICBTRUxFQ1QgJHtzY2hlbWF9LmpvYl90YWJsZV9ydW4oJGNtZCQke2NyZWF0ZUluZGV4Sm9iUG9saWN5U3RhdGVseShzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlSW5kZXhKb2JQb2xpY3lFeGNsdXNpdmUoc2NoZW1hKX0kY21kJCwgJyR7Q09NTU9OX0pPQl9UQUJMRX0nKTtcbiAgICBTRUxFQ1QgJHtzY2hlbWF9LmpvYl90YWJsZV9ydW4oJGNtZCQke2NyZWF0ZUluZGV4Sm9iUG9saWN5S2V5U3RyaWN0RmlmbyhzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlQ2hlY2tDb25zdHJhaW50S2V5U3RyaWN0RmlmbyhzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlSW5kZXhKb2JUaHJvdHRsZShzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlSW5kZXhKb2JGZXRjaChzY2hlbWEpfSRjbWQkLCAnJHtDT01NT05fSk9CX1RBQkxFfScpO1xuICAgIFNFTEVDVCAke3NjaGVtYX0uam9iX3RhYmxlX3J1bigkY21kJCR7Y3JlYXRlSW5kZXhKb2JHcm91cENvbmN1cnJlbmN5KHNjaGVtYSl9JGNtZCQsICcke0NPTU1PTl9KT0JfVEFCTEV9Jyk7XG5cbiAgICBBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIEFUVEFDSCBQQVJUSVRJT04gJHtzY2hlbWF9LiR7Q09NTU9OX0pPQl9UQUJMRX0gREVGQVVMVDtcbiAgYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVF1ZXVlRnVuY3Rpb24oc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBDUkVBVEUgRlVOQ1RJT04gJHtzY2hlbWF9LmNyZWF0ZV9xdWV1ZShxdWV1ZV9uYW1lIHRleHQsIG9wdGlvbnMganNvbmIpXG4gICAgUkVUVVJOUyBWT0lEIEFTXG4gICAgJCRcbiAgICBERUNMQVJFXG4gICAgICB0YWJsZW5hbWUgdmFyY2hhciA6PSBDQVNFIFdIRU4gb3B0aW9ucy0+PidwYXJ0aXRpb24nID0gJ3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVEhFTiAnaicgfHwgZW5jb2RlKHNoYTIyNChxdWV1ZV9uYW1lOjpieXRlYSksICdoZXgnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVMU0UgJyR7Q09NTU9OX0pPQl9UQUJMRX0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRU5EO1xuICAgICAgcXVldWVfY3JlYXRlZF9vbiB0aW1lc3RhbXB0ejtcbiAgICBCRUdJTlxuXG4gICAgICBXSVRIIHEgYXMgKFxuICAgICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0ucXVldWUgKFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgcG9saWN5LFxuICAgICAgICAgIHJldHJ5X2xpbWl0LFxuICAgICAgICAgIHJldHJ5X2RlbGF5LFxuICAgICAgICAgIHJldHJ5X2JhY2tvZmYsXG4gICAgICAgICAgcmV0cnlfZGVsYXlfbWF4LFxuICAgICAgICAgIGV4cGlyZV9zZWNvbmRzLFxuICAgICAgICAgIHJldGVudGlvbl9zZWNvbmRzLFxuICAgICAgICAgIGRlbGV0aW9uX3NlY29uZHMsXG4gICAgICAgICAgd2FybmluZ19xdWV1ZWQsXG4gICAgICAgICAgZGVhZF9sZXR0ZXIsXG4gICAgICAgICAgcGFydGl0aW9uLFxuICAgICAgICAgIHRhYmxlX25hbWVcbiAgICAgICAgKVxuICAgICAgICBWQUxVRVMgKFxuICAgICAgICAgIHF1ZXVlX25hbWUsXG4gICAgICAgICAgb3B0aW9ucy0+Pidwb2xpY3knLFxuICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldHJ5TGltaXQnKTo6aW50LCAke1FVRVVFX0RFRkFVTFRTLnJldHJ5X2xpbWl0fSksXG4gICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4ncmV0cnlEZWxheScpOjppbnQsICR7UVVFVUVfREVGQVVMVFMucmV0cnlfZGVsYXl9KSxcbiAgICAgICAgICBDT0FMRVNDRSgob3B0aW9ucy0+PidyZXRyeUJhY2tvZmYnKTo6Ym9vbCwgJHtRVUVVRV9ERUZBVUxUUy5yZXRyeV9iYWNrb2ZmfSksXG4gICAgICAgICAgKG9wdGlvbnMtPj4ncmV0cnlEZWxheU1heCcpOjppbnQsXG4gICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nZXhwaXJlSW5TZWNvbmRzJyk6OmludCwgJHtRVUVVRV9ERUZBVUxUUy5leHBpcmVfc2Vjb25kc30pLFxuICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3JldGVudGlvblNlY29uZHMnKTo6aW50LCAke1FVRVVFX0RFRkFVTFRTLnJldGVudGlvbl9zZWNvbmRzfSksXG4gICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nZGVsZXRlQWZ0ZXJTZWNvbmRzJyk6OmludCwgJHtRVUVVRV9ERUZBVUxUUy5kZWxldGlvbl9zZWNvbmRzfSksXG4gICAgICAgICAgQ09BTEVTQ0UoKG9wdGlvbnMtPj4nd2FybmluZ1F1ZXVlU2l6ZScpOjppbnQsICR7UVVFVUVfREVGQVVMVFMud2FybmluZ19xdWV1ZWR9KSxcbiAgICAgICAgICBvcHRpb25zLT4+J2RlYWRMZXR0ZXInLFxuICAgICAgICAgIENPQUxFU0NFKChvcHRpb25zLT4+J3BhcnRpdGlvbicpOjpib29sLCAke1FVRVVFX0RFRkFVTFRTLnBhcnRpdGlvbn0pLFxuICAgICAgICAgIHRhYmxlbmFtZVxuICAgICAgICApXG4gICAgICAgIE9OIENPTkZMSUNUIERPIE5PVEhJTkdcbiAgICAgICAgUkVUVVJOSU5HIGNyZWF0ZWRfb25cbiAgICAgIClcbiAgICAgIFNFTEVDVCBjcmVhdGVkX29uIGludG8gcXVldWVfY3JlYXRlZF9vbiBmcm9tIHE7XG5cbiAgICAgIElGIHF1ZXVlX2NyZWF0ZWRfb24gSVMgTlVMTCBPUiBvcHRpb25zLT4+J3BhcnRpdGlvbicgSVMgRElTVElOQ1QgRlJPTSAndHJ1ZScgVEhFTlxuICAgICAgICBSRVRVUk47XG4gICAgICBFTkQgSUY7XG5cbiAgICAgIEVYRUNVVEUgZm9ybWF0KCdDUkVBVEUgVEFCTEUgJHtzY2hlbWF9LiVJIChMSUtFICR7c2NoZW1hfS5qb2IgSU5DTFVESU5HIERFRkFVTFRTKScsIHRhYmxlbmFtZSk7XG5cbiAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCQke2NyZWF0ZVByaW1hcnlLZXlKb2Ioc2NoZW1hKX0kY21kJCwgdGFibGVuYW1lKTtcbiAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCQke2NyZWF0ZVF1ZXVlRm9yZWlnbktleUpvYihzY2hlbWEpfSRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJCR7Y3JlYXRlUXVldWVGb3JlaWduS2V5Sm9iRGVhZExldHRlcihzY2hlbWEpfSRjbWQkLCB0YWJsZW5hbWUpO1xuXG4gICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkJHtjcmVhdGVJbmRleEpvYkZldGNoKHNjaGVtYSl9JGNtZCQsIHRhYmxlbmFtZSk7XG4gICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkJHtjcmVhdGVJbmRleEpvYlRocm90dGxlKHNjaGVtYSl9JGNtZCQsIHRhYmxlbmFtZSk7XG4gICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkJHtjcmVhdGVJbmRleEpvYkdyb3VwQ29uY3VycmVuY3koc2NoZW1hKX0kY21kJCwgdGFibGVuYW1lKTtcblxuICAgICAgSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ3Nob3J0JyBUSEVOXG4gICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCQke2NyZWF0ZUluZGV4Sm9iUG9saWN5U2hvcnQoc2NoZW1hKX0kY21kJCwgdGFibGVuYW1lKTtcbiAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzaW5nbGV0b24nIFRIRU5cbiAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJCR7Y3JlYXRlSW5kZXhKb2JQb2xpY3lTaW5nbGV0b24oc2NoZW1hKX0kY21kJCwgdGFibGVuYW1lKTtcbiAgICAgIEVMU0lGIG9wdGlvbnMtPj4ncG9saWN5JyA9ICdzdGF0ZWx5JyBUSEVOXG4gICAgICAgIEVYRUNVVEUgJHtzY2hlbWF9LmpvYl90YWJsZV9mb3JtYXQoJGNtZCQke2NyZWF0ZUluZGV4Sm9iUG9saWN5U3RhdGVseShzY2hlbWEpfSRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJ2V4Y2x1c2l2ZScgVEhFTlxuICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkJHtjcmVhdGVJbmRleEpvYlBvbGljeUV4Y2x1c2l2ZShzY2hlbWEpfSRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgRUxTSUYgb3B0aW9ucy0+Pidwb2xpY3knID0gJyR7UVVFVUVfUE9MSUNJRVMua2V5X3N0cmljdF9maWZvfScgVEhFTlxuICAgICAgICBFWEVDVVRFICR7c2NoZW1hfS5qb2JfdGFibGVfZm9ybWF0KCRjbWQkJHtjcmVhdGVJbmRleEpvYlBvbGljeUtleVN0cmljdEZpZm8oc2NoZW1hKX0kY21kJCwgdGFibGVuYW1lKTtcbiAgICAgICAgRVhFQ1VURSAke3NjaGVtYX0uam9iX3RhYmxlX2Zvcm1hdCgkY21kJCR7Y3JlYXRlQ2hlY2tDb25zdHJhaW50S2V5U3RyaWN0RmlmbyhzY2hlbWEpfSRjbWQkLCB0YWJsZW5hbWUpO1xuICAgICAgRU5EIElGO1xuXG4gICAgICBFWEVDVVRFIGZvcm1hdCgnQUxURVIgVEFCTEUgJHtzY2hlbWF9LiVJIEFERCBDT05TVFJBSU5UIGNqYyBDSEVDSyAobmFtZT0lTCknLCB0YWJsZW5hbWUsIHF1ZXVlX25hbWUpO1xuICAgICAgRVhFQ1VURSBmb3JtYXQoJ0FMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQVRUQUNIIFBBUlRJVElPTiAke3NjaGVtYX0uJUkgRk9SIFZBTFVFUyBJTiAoJUwpJywgdGFibGVuYW1lLCBxdWV1ZV9uYW1lKTtcbiAgICBFTkQ7XG4gICAgJCRcbiAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICBgO1xufVxuZnVuY3Rpb24gZGVsZXRlUXVldWVGdW5jdGlvbihzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIENSRUFURSBGVU5DVElPTiAke3NjaGVtYX0uZGVsZXRlX3F1ZXVlKHF1ZXVlX25hbWUgdGV4dClcbiAgICBSRVRVUk5TIFZPSUQgQVNcbiAgICAkJFxuICAgIERFQ0xBUkVcbiAgICAgIHZfdGFibGUgdmFyY2hhcjtcbiAgICAgIHZfcGFydGl0aW9uIGJvb2w7XG4gICAgQkVHSU5cbiAgICAgIFNFTEVDVCB0YWJsZV9uYW1lLCBwYXJ0aXRpb25cbiAgICAgIEZST00gJHtzY2hlbWF9LnF1ZXVlXG4gICAgICBXSEVSRSBuYW1lID0gcXVldWVfbmFtZVxuICAgICAgSU5UTyB2X3RhYmxlLCB2X3BhcnRpdGlvbjtcblxuICAgICAgSUYgdl9wYXJ0aXRpb24gVEhFTlxuICAgICAgICBFWEVDVVRFIGZvcm1hdCgnRFJPUCBUQUJMRSBJRiBFWElTVFMgJHtzY2hlbWF9LiVJJywgdl90YWJsZSk7XG4gICAgICBFTFNFXG4gICAgICAgIEVYRUNVVEUgZm9ybWF0KCdERUxFVEUgRlJPTSAke3NjaGVtYX0uJUkgV0hFUkUgbmFtZSA9ICVMJywgdl90YWJsZSwgcXVldWVfbmFtZSk7XG4gICAgICBFTkQgSUY7XG5cbiAgICAgIERFTEVURSBGUk9NICR7c2NoZW1hfS5xdWV1ZSBXSEVSRSBuYW1lID0gcXVldWVfbmFtZTtcbiAgICBFTkQ7XG4gICAgJCRcbiAgICBMQU5HVUFHRSBwbHBnc3FsO1xuICBgO1xufVxuZnVuY3Rpb24gY3JlYXRlUXVldWUoc2NoZW1hLCBuYW1lLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc3FsID0gYFNFTEVDVCAke3NjaGVtYX0uY3JlYXRlX3F1ZXVlKCcke25hbWV9JywgJyR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9Jzo6anNvbmIpYDtcbiAgICByZXR1cm4gbG9ja2VkKHNjaGVtYSwgc3FsLCAnY3JlYXRlLXF1ZXVlJyk7XG59XG5mdW5jdGlvbiBkZWxldGVRdWV1ZShzY2hlbWEsIG5hbWUpIHtcbiAgICBjb25zdCBzcWwgPSBgU0VMRUNUICR7c2NoZW1hfS5kZWxldGVfcXVldWUoJyR7bmFtZX0nKWA7XG4gICAgcmV0dXJuIGxvY2tlZChzY2hlbWEsIHNxbCwgJ2RlbGV0ZS1xdWV1ZScpO1xufVxuZnVuY3Rpb24gY3JlYXRlUHJpbWFyeUtleUpvYihzY2hlbWEpIHtcbiAgICByZXR1cm4gYEFMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQUREIFBSSU1BUlkgS0VZIChuYW1lLCBpZClgO1xufVxuZnVuY3Rpb24gY3JlYXRlUXVldWVGb3JlaWduS2V5Sm9iKHNjaGVtYSkge1xuICAgIHJldHVybiBgQUxURVIgVEFCTEUgJHtzY2hlbWF9LmpvYiBBREQgQ09OU1RSQUlOVCBxX2ZrZXkgRk9SRUlHTiBLRVkgKG5hbWUpIFJFRkVSRU5DRVMgJHtzY2hlbWF9LnF1ZXVlIChuYW1lKSBPTiBERUxFVEUgUkVTVFJJQ1QgREVGRVJSQUJMRSBJTklUSUFMTFkgREVGRVJSRURgO1xufVxuZnVuY3Rpb24gY3JlYXRlUXVldWVGb3JlaWduS2V5Sm9iRGVhZExldHRlcihzY2hlbWEpIHtcbiAgICByZXR1cm4gYEFMVEVSIFRBQkxFICR7c2NoZW1hfS5qb2IgQUREIENPTlNUUkFJTlQgZGxxX2ZrZXkgRk9SRUlHTiBLRVkgKGRlYWRfbGV0dGVyKSBSRUZFUkVOQ0VTICR7c2NoZW1hfS5xdWV1ZSAobmFtZSkgT04gREVMRVRFIFJFU1RSSUNUIERFRkVSUkFCTEUgSU5JVElBTExZIERFRkVSUkVEYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluZGV4Sm9iUG9saWN5U2hvcnQoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pMSBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5jcmVhdGVkfScgQU5EIHBvbGljeSA9ICcke1FVRVVFX1BPTElDSUVTLnNob3J0fSdgO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5kZXhKb2JQb2xpY3lTaW5nbGV0b24oc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pMiBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBDT0FMRVNDRShzaW5nbGV0b25fa2V5LCAnJykpIFdIRVJFIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JyBBTkQgcG9saWN5ID0gJyR7UVVFVUVfUE9MSUNJRVMuc2luZ2xldG9ufSdgO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5kZXhKb2JQb2xpY3lTdGF0ZWx5KHNjaGVtYSkge1xuICAgIHJldHVybiBgQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTMgT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc3RhdGUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD0gJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JyBBTkQgcG9saWN5ID0gJyR7UVVFVUVfUE9MSUNJRVMuc3RhdGVseX0nYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluZGV4Sm9iVGhyb3R0bGUoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBDUkVBVEUgVU5JUVVFIElOREVYIGpvYl9pNCBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBzaW5nbGV0b25fb24sIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD4gJyR7Sk9CX1NUQVRFUy5jYW5jZWxsZWR9JyBBTkQgc2luZ2xldG9uX29uIElTIE5PVCBOVUxMYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluZGV4Sm9iRmV0Y2goc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBDUkVBVEUgSU5ERVggam9iX2k1IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIHN0YXJ0X2FmdGVyKSBJTkNMVURFIChwcmlvcml0eSwgY3JlYXRlZF9vbiwgaWQpIFdIRVJFIHN0YXRlIDwgJyR7Sk9CX1NUQVRFUy5hY3RpdmV9J2A7XG59XG5mdW5jdGlvbiBjcmVhdGVJbmRleEpvYlBvbGljeUV4Y2x1c2l2ZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYENSRUFURSBVTklRVUUgSU5ERVggam9iX2k2IE9OICR7c2NoZW1hfS5qb2IgKG5hbWUsIENPQUxFU0NFKHNpbmdsZXRvbl9rZXksICcnKSkgV0hFUkUgc3RhdGUgPD0gJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JyBBTkQgcG9saWN5ID0gJyR7UVVFVUVfUE9MSUNJRVMuZXhjbHVzaXZlfSdgO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5kZXhKb2JQb2xpY3lLZXlTdHJpY3RGaWZvKHNjaGVtYSkge1xuICAgIHJldHVybiBgQ1JFQVRFIFVOSVFVRSBJTkRFWCBqb2JfaTggT04gJHtzY2hlbWF9LmpvYiAobmFtZSwgc2luZ2xldG9uX2tleSkgV0hFUkUgc3RhdGUgSU4gKCcke0pPQl9TVEFURVMuYWN0aXZlfScsICcke0pPQl9TVEFURVMucmV0cnl9JywgJyR7Sk9CX1NUQVRFUy5mYWlsZWR9JykgQU5EIHBvbGljeSA9ICcke1FVRVVFX1BPTElDSUVTLmtleV9zdHJpY3RfZmlmb30nYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrQ29uc3RyYWludEtleVN0cmljdEZpZm8oc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBBTFRFUiBUQUJMRSAke3NjaGVtYX0uam9iIEFERCBDT05TVFJBSU5UIGpvYl9rZXlfc3RyaWN0X2ZpZm9fc2luZ2xldG9uX2tleV9jaGVjayBDSEVDSyAoTk9UIChwb2xpY3kgPSAnJHtRVUVVRV9QT0xJQ0lFUy5rZXlfc3RyaWN0X2ZpZm99JyBBTkQgc2luZ2xldG9uX2tleSBJUyBOVUxMKSlgO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5kZXhKb2JHcm91cENvbmN1cnJlbmN5KHNjaGVtYSkge1xuICAgIHJldHVybiBgQ1JFQVRFIElOREVYIGpvYl9pNyBPTiAke3NjaGVtYX0uam9iIChuYW1lLCBncm91cF9pZCkgV0hFUkUgc3RhdGUgPSAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nIEFORCBncm91cF9pZCBJUyBOT1QgTlVMTGA7XG59XG5mdW5jdGlvbiB0cnlTZXRRdWV1ZU1vbml0b3JUaW1lKHNjaGVtYSwgcXVldWVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIHRyeVNldFF1ZXVlVGltZXN0YW1wKHNjaGVtYSwgcXVldWVzLCAnbW9uaXRvcl9vbicsIHNlY29uZHMpO1xufVxuZnVuY3Rpb24gdHJ5U2V0UXVldWVEZWxldGlvblRpbWUoc2NoZW1hLCBxdWV1ZXMsIHNlY29uZHMpIHtcbiAgICByZXR1cm4gdHJ5U2V0UXVldWVUaW1lc3RhbXAoc2NoZW1hLCBxdWV1ZXMsICdtYWludGFpbl9vbicsIHNlY29uZHMpO1xufVxuZnVuY3Rpb24gdHJ5U2V0Q3JvblRpbWUoc2NoZW1hLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIHRyeVNldFRpbWVzdGFtcChzY2hlbWEsICdjcm9uX29uJywgc2Vjb25kcyk7XG59XG5mdW5jdGlvbiB0cnlTZXRCYW1UaW1lKHNjaGVtYSwgc2Vjb25kcykge1xuICAgIHJldHVybiB0cnlTZXRUaW1lc3RhbXAoc2NoZW1hLCAnYmFtX29uJywgc2Vjb25kcyk7XG59XG5mdW5jdGlvbiB0cnlTZXRUaW1lc3RhbXAoc2NoZW1hLCBjb2x1bW4sIHNlY29uZHMpIHtcbiAgICByZXR1cm4gYFxuICAgIFVQREFURSAke3NjaGVtYX0udmVyc2lvblxuICAgIFNFVCAke2NvbHVtbn0gPSBub3coKVxuICAgIFdIRVJFIEVYVFJBQ1QoIEVQT0NIIEZST00gKG5vdygpIC0gQ09BTEVTQ0UoJHtjb2x1bW59LCBub3coKSAtIGludGVydmFsICcxIHdlZWsnKSApICkgPiAke3NlY29uZHN9XG4gICAgUkVUVVJOSU5HIHRydWVcbiAgYDtcbn1cbmZ1bmN0aW9uIHRyeVNldFF1ZXVlVGltZXN0YW1wKHNjaGVtYSwgcXVldWVzLCBjb2x1bW4sIHNlY29uZHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0OiBgXG4gICAgVVBEQVRFICR7c2NoZW1hfS5xdWV1ZVxuICAgIFNFVCAke2NvbHVtbn0gPSBub3coKVxuICAgIFdIRVJFIG5hbWUgPSBBTlkoJDE6OnRleHRbXSlcbiAgICAgIEFORCBFWFRSQUNUKCBFUE9DSCBGUk9NIChub3coKSAtIENPQUxFU0NFKCR7Y29sdW1ufSwgbm93KCkgLSBpbnRlcnZhbCAnMSB3ZWVrJykgKSApID4gJHtzZWNvbmRzfVxuICAgIFJFVFVSTklORyBuYW1lXG4gIGAsXG4gICAgICAgIHZhbHVlczogW3F1ZXVlc11cbiAgICB9O1xufVxuZnVuY3Rpb24gdXBkYXRlUXVldWUoc2NoZW1hLCB7IGRlYWRMZXR0ZXIgfSA9IHt9KSB7XG4gICAgcmV0dXJuIGBcbiAgICBXSVRIIG9wdGlvbnMgYXMgKFNFTEVDVCAkMjo6anNvbmIgYXMgZGF0YSlcbiAgICBVUERBVEUgJHtzY2hlbWF9LnF1ZXVlIFNFVFxuICAgICAgcmV0cnlfbGltaXQgPSBDT0FMRVNDRSgoby5kYXRhLT4+J3JldHJ5TGltaXQnKTo6aW50LCByZXRyeV9saW1pdCksXG4gICAgICByZXRyeV9kZWxheSA9IENPQUxFU0NFKChvLmRhdGEtPj4ncmV0cnlEZWxheScpOjppbnQsIHJldHJ5X2RlbGF5KSxcbiAgICAgIHJldHJ5X2JhY2tvZmYgPSBDT0FMRVNDRSgoby5kYXRhLT4+J3JldHJ5QmFja29mZicpOjpib29sLCByZXRyeV9iYWNrb2ZmKSxcbiAgICAgIHJldHJ5X2RlbGF5X21heCA9IENBU0UgV0hFTiBvLmRhdGEgPyAncmV0cnlEZWxheU1heCdcbiAgICAgICAgVEhFTiAoby5kYXRhLT4+J3JldHJ5RGVsYXlNYXgnKTo6aW50XG4gICAgICAgIEVMU0UgcmV0cnlfZGVsYXlfbWF4IEVORCxcbiAgICAgIGV4cGlyZV9zZWNvbmRzID0gQ09BTEVTQ0UoKG8uZGF0YS0+PidleHBpcmVJblNlY29uZHMnKTo6aW50LCBleHBpcmVfc2Vjb25kcyksXG4gICAgICByZXRlbnRpb25fc2Vjb25kcyA9IENPQUxFU0NFKChvLmRhdGEtPj4ncmV0ZW50aW9uU2Vjb25kcycpOjppbnQsIHJldGVudGlvbl9zZWNvbmRzKSxcbiAgICAgIGRlbGV0aW9uX3NlY29uZHMgPSBDT0FMRVNDRSgoby5kYXRhLT4+J2RlbGV0ZUFmdGVyU2Vjb25kcycpOjppbnQsIGRlbGV0aW9uX3NlY29uZHMpLFxuICAgICAgd2FybmluZ19xdWV1ZWQgPSBDT0FMRVNDRSgoby5kYXRhLT4+J3dhcm5pbmdRdWV1ZVNpemUnKTo6aW50LCB3YXJuaW5nX3F1ZXVlZCksXG4gICAgICAke2RlYWRMZXR0ZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICA/ICcnXG4gICAgICAgIDogYGRlYWRfbGV0dGVyID0gQ0FTRSBXSEVOICcke2RlYWRMZXR0ZXJ9JyBJUyBESVNUSU5DVCBGUk9NIGRlYWRfbGV0dGVyIFRIRU4gJyR7ZGVhZExldHRlcn0nIEVMU0UgZGVhZF9sZXR0ZXIgRU5ELGB9XG4gICAgICB1cGRhdGVkX29uID0gbm93KClcbiAgICBGUk9NIG9wdGlvbnMgb1xuICAgIFdIRVJFIG5hbWUgPSAkMVxuICBgO1xufVxuZnVuY3Rpb24gZ2V0UXVldWVzKHNjaGVtYSwgbmFtZXMpIHtcbiAgICBjb25zdCBoYXNOYW1lcyA9IG5hbWVzICYmIG5hbWVzLmxlbmd0aCA+IDA7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogYFxuICAgIFNFTEVDVFxuICAgICAgcS5uYW1lLFxuICAgICAgcS5wb2xpY3ksXG4gICAgICBxLnJldHJ5X2xpbWl0IGFzIFwicmV0cnlMaW1pdFwiLFxuICAgICAgcS5yZXRyeV9kZWxheSBhcyBcInJldHJ5RGVsYXlcIixcbiAgICAgIHEucmV0cnlfYmFja29mZiBhcyBcInJldHJ5QmFja29mZlwiLFxuICAgICAgcS5yZXRyeV9kZWxheV9tYXggYXMgXCJyZXRyeURlbGF5TWF4XCIsXG4gICAgICBxLmV4cGlyZV9zZWNvbmRzIGFzIFwiZXhwaXJlSW5TZWNvbmRzXCIsXG4gICAgICBxLnJldGVudGlvbl9zZWNvbmRzIGFzIFwicmV0ZW50aW9uU2Vjb25kc1wiLFxuICAgICAgcS5kZWxldGlvbl9zZWNvbmRzIGFzIFwiZGVsZXRlQWZ0ZXJTZWNvbmRzXCIsXG4gICAgICBxLnBhcnRpdGlvbixcbiAgICAgIHEuZGVhZF9sZXR0ZXIgYXMgXCJkZWFkTGV0dGVyXCIsXG4gICAgICBxLmRlZmVycmVkX2NvdW50IGFzIFwiZGVmZXJyZWRDb3VudFwiLFxuICAgICAgcS53YXJuaW5nX3F1ZXVlZCBhcyBcIndhcm5pbmdRdWV1ZVNpemVcIixcbiAgICAgIHEucXVldWVkX2NvdW50IGFzIFwicXVldWVkQ291bnRcIixcbiAgICAgIHEuYWN0aXZlX2NvdW50IGFzIFwiYWN0aXZlQ291bnRcIixcbiAgICAgIHEudG90YWxfY291bnQgYXMgXCJ0b3RhbENvdW50XCIsXG4gICAgICBxLnNpbmdsZXRvbnNfYWN0aXZlIGFzIFwic2luZ2xldG9uc0FjdGl2ZVwiLFxuICAgICAgcS50YWJsZV9uYW1lIGFzIFwidGFibGVcIixcbiAgICAgIHEuY3JlYXRlZF9vbiBhcyBcImNyZWF0ZWRPblwiLFxuICAgICAgcS51cGRhdGVkX29uIGFzIFwidXBkYXRlZE9uXCJcbiAgICBGUk9NICR7c2NoZW1hfS5xdWV1ZSBxXG4gICAgJHtoYXNOYW1lcyA/ICdXSEVSRSBxLm5hbWUgPSBBTlkoJDE6OnRleHRbXSknIDogJyd9XG4gICBgLFxuICAgICAgICB2YWx1ZXM6IGhhc05hbWVzID8gW25hbWVzXSA6IFtdXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZUpvYnNCeUlkKHNjaGVtYSwgdGFibGUpIHtcbiAgICByZXR1cm4gYFxuICAgIFdJVEggcmVzdWx0cyBhcyAoXG4gICAgICBERUxFVEUgRlJPTSAke3NjaGVtYX0uJHt0YWJsZX1cbiAgICAgIFdIRVJFIG5hbWUgPSAkMVxuICAgICAgICBBTkQgaWQgSU4gKFNFTEVDVCBVTk5FU1QoJDI6OnV1aWRbXSkpICAgICAgICBcbiAgICAgIFJFVFVSTklORyAxXG4gICAgKVxuICAgIFNFTEVDVCBDT1VOVCgqKSBmcm9tIHJlc3VsdHNcbiAgYDtcbn1cbmZ1bmN0aW9uIGRlbGV0ZVF1ZXVlZEpvYnMoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgREVMRVRFIGZyb20gJHtzY2hlbWF9LiR7dGFibGV9IFdIRVJFIG5hbWUgPSAkMSBhbmQgc3RhdGUgPCAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nYDtcbn1cbmZ1bmN0aW9uIGRlbGV0ZVN0b3JlZEpvYnMoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgREVMRVRFIGZyb20gJHtzY2hlbWF9LiR7dGFibGV9IFdIRVJFIG5hbWUgPSAkMSBhbmQgc3RhdGUgPiAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nYDtcbn1cbmZ1bmN0aW9uIHRydW5jYXRlVGFibGUoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgVFJVTkNBVEUgJHtzY2hlbWF9LiR7dGFibGV9YDtcbn1cbmZ1bmN0aW9uIGRlbGV0ZUFsbEpvYnMoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgREVMRVRFIGZyb20gJHtzY2hlbWF9LiR7dGFibGV9IFdIRVJFIG5hbWUgPSAkMWA7XG59XG5mdW5jdGlvbiBnZXRTY2hlZHVsZXMoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBTRUxFQ1QgKiBGUk9NICR7c2NoZW1hfS5zY2hlZHVsZSBPUkRFUiBCWSBuYW1lLCBrZXlgO1xufVxuZnVuY3Rpb24gZ2V0U2NoZWR1bGVzQnlRdWV1ZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYFNFTEVDVCAqIEZST00gJHtzY2hlbWF9LnNjaGVkdWxlIFdIRVJFIG5hbWUgPSAkMSBBTkQgQ09BTEVTQ0Uoa2V5LCAnJykgPSAkMmA7XG59XG5mdW5jdGlvbiBzY2hlZHVsZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIElOU0VSVCBJTlRPICR7c2NoZW1hfS5zY2hlZHVsZSAobmFtZSwga2V5LCBjcm9uLCB0aW1lem9uZSwgZGF0YSwgb3B0aW9ucylcbiAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYpXG4gICAgT04gQ09ORkxJQ1QgKG5hbWUsIGtleSkgRE8gVVBEQVRFIFNFVFxuICAgICAgY3JvbiA9IEVYQ0xVREVELmNyb24sXG4gICAgICB0aW1lem9uZSA9IEVYQ0xVREVELnRpbWV6b25lLFxuICAgICAgZGF0YSA9IEVYQ0xVREVELmRhdGEsXG4gICAgICBvcHRpb25zID0gRVhDTFVERUQub3B0aW9ucyxcbiAgICAgIHVwZGF0ZWRfb24gPSBub3coKVxuICBgO1xufVxuZnVuY3Rpb24gdW5zY2hlZHVsZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIERFTEVURSBGUk9NICR7c2NoZW1hfS5zY2hlZHVsZVxuICAgIFdIRVJFIG5hbWUgPSAkMVxuICAgICAgQU5EIENPQUxFU0NFKGtleSwgJycpID0gJDJcbiAgYDtcbn1cbmZ1bmN0aW9uIHN1YnNjcmliZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIElOU0VSVCBJTlRPICR7c2NoZW1hfS5zdWJzY3JpcHRpb24gKGV2ZW50LCBuYW1lKVxuICAgIFZBTFVFUyAoJDEsICQyKVxuICAgIE9OIENPTkZMSUNUIChldmVudCwgbmFtZSkgRE8gVVBEQVRFIFNFVFxuICAgICAgZXZlbnQgPSBFWENMVURFRC5ldmVudCxcbiAgICAgIG5hbWUgPSBFWENMVURFRC5uYW1lLFxuICAgICAgdXBkYXRlZF9vbiA9IG5vdygpXG4gIGA7XG59XG5mdW5jdGlvbiB1bnN1YnNjcmliZShzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIERFTEVURSBGUk9NICR7c2NoZW1hfS5zdWJzY3JpcHRpb25cbiAgICBXSEVSRSBldmVudCA9ICQxIGFuZCBuYW1lID0gJDJcbiAgYDtcbn1cbmZ1bmN0aW9uIGdldFF1ZXVlc0ZvckV2ZW50KHNjaGVtYSkge1xuICAgIHJldHVybiBgXG4gICAgU0VMRUNUIG5hbWUgRlJPTSAke3NjaGVtYX0uc3Vic2NyaXB0aW9uXG4gICAgV0hFUkUgZXZlbnQgPSAkMVxuICBgO1xufVxuZnVuY3Rpb24gZ2V0VGltZSgpIHtcbiAgICByZXR1cm4gXCJTRUxFQ1Qgcm91bmQoZGF0ZV9wYXJ0KCdlcG9jaCcsIG5vdygpKSAqIDEwMDApIGFzIHRpbWVcIjtcbn1cbmZ1bmN0aW9uIGluc2VydFdhcm5pbmcoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0ud2FybmluZyAodHlwZSwgbWVzc2FnZSwgZGF0YSlcbiAgICBWQUxVRVMgKCQxLCAkMiwgJDMpXG4gIGA7XG59XG5mdW5jdGlvbiBnZXRXYXJuaW5ncyhzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIFNFTEVDVFxuICAgICAgaWQsXG4gICAgICB0eXBlLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIGRhdGEsXG4gICAgICBjcmVhdGVkX29uIGFzIFwiY3JlYXRlZE9uXCJcbiAgICBGUk9NICR7c2NoZW1hfS53YXJuaW5nXG4gICAgV0hFUkUgKCQxOjp0ZXh0IElTIE5VTEwgT1IgdHlwZSA9ICQxKVxuICAgIE9SREVSIEJZIGNyZWF0ZWRfb24gREVTQ1xuICAgIExJTUlUICQyIE9GRlNFVCAkM1xuICBgO1xufVxuZnVuY3Rpb24gZ2V0V2FybmluZ3NDb3VudChzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIFNFTEVDVCBDT1VOVCgqKTo6aW50IGFzIGNvdW50XG4gICAgRlJPTSAke3NjaGVtYX0ud2FybmluZ1xuICAgIFdIRVJFICgkMTo6dGV4dCBJUyBOVUxMIE9SIHR5cGUgPSAkMSlcbiAgYDtcbn1cbmZ1bmN0aW9uIGRlbGV0ZU9sZFdhcm5pbmdzKHNjaGVtYSwgZGF5cykge1xuICAgIHJldHVybiBgXG4gICAgREVMRVRFIEZST00gJHtzY2hlbWF9Lndhcm5pbmdcbiAgICBXSEVSRSBjcmVhdGVkX29uIDwgbm93KCkgLSBpbnRlcnZhbCAnJHtkYXlzfSBkYXlzJ1xuICBgO1xufVxuZnVuY3Rpb24gZ2V0VmVyc2lvbihzY2hlbWEpIHtcbiAgICByZXR1cm4gYFNFTEVDVCB2ZXJzaW9uIGZyb20gJHtzY2hlbWF9LnZlcnNpb25gO1xufVxuZnVuY3Rpb24gc2V0VmVyc2lvbihzY2hlbWEsIHZlcnNpb24pIHtcbiAgICByZXR1cm4gYFVQREFURSAke3NjaGVtYX0udmVyc2lvbiBTRVQgdmVyc2lvbiA9ICcke3ZlcnNpb259J2A7XG59XG5mdW5jdGlvbiB2ZXJzaW9uVGFibGVFeGlzdHMoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBTRUxFQ1QgdG9fcmVnY2xhc3MoJyR7c2NoZW1hfS52ZXJzaW9uJykgYXMgbmFtZWA7XG59XG5mdW5jdGlvbiBpbnNlcnRWZXJzaW9uKHNjaGVtYSwgdmVyc2lvbikge1xuICAgIHJldHVybiBgSU5TRVJUIElOVE8gJHtzY2hlbWF9LnZlcnNpb24odmVyc2lvbikgVkFMVUVTICgnJHt2ZXJzaW9ufScpYDtcbn1cbmZ1bmN0aW9uIGJ1aWxkRmV0Y2hQYXJhbXMob3B0aW9ucykge1xuICAgIGNvbnN0IHsgaWdub3JlU2luZ2xldG9ucywgaWdub3JlR3JvdXBzLCBncm91cENvbmN1cnJlbmN5IH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGhhc0lnbm9yZVNpbmdsZXRvbnMgPSBpZ25vcmVTaW5nbGV0b25zICE9IG51bGwgJiYgaWdub3JlU2luZ2xldG9ucy5sZW5ndGggPiAwO1xuICAgIGNvbnN0IGhhc0lnbm9yZUdyb3VwcyA9IGlnbm9yZUdyb3VwcyAhPSBudWxsICYmIGlnbm9yZUdyb3Vwcy5sZW5ndGggPiAwO1xuICAgIGNvbnN0IGhhc0dyb3VwQ29uY3VycmVuY3kgPSBncm91cENvbmN1cnJlbmN5ICE9IG51bGw7XG4gICAgY29uc3QgZ3JvdXBDb25jdXJyZW5jeUNvbmZpZyA9IGhhc0dyb3VwQ29uY3VycmVuY3lcbiAgICAgICAgPyAodHlwZW9mIGdyb3VwQ29uY3VycmVuY3kgPT09ICdudW1iZXInID8geyBkZWZhdWx0OiBncm91cENvbmN1cnJlbmN5IH0gOiBncm91cENvbmN1cnJlbmN5KVxuICAgICAgICA6IG51bGw7XG4gICAgY29uc3QgaGFzVGllcnMgPSBncm91cENvbmN1cnJlbmN5Q29uZmlnPy50aWVycyAmJiBPYmplY3Qua2V5cyhncm91cENvbmN1cnJlbmN5Q29uZmlnLnRpZXJzKS5sZW5ndGggPiAwO1xuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGxldCBwYXJhbUluZGV4ID0gMDtcbiAgICBsZXQgaWdub3JlU2luZ2xldG9uc1BhcmFtID0gJyc7XG4gICAgbGV0IGlnbm9yZUdyb3Vwc1BhcmFtID0gJyc7XG4gICAgbGV0IGRlZmF1bHRHcm91cExpbWl0UGFyYW0gPSAnJztcbiAgICBsZXQgdGllcnNQYXJhbSA9ICcnO1xuICAgIGlmIChoYXNJZ25vcmVTaW5nbGV0b25zKSB7XG4gICAgICAgIHBhcmFtSW5kZXgrKztcbiAgICAgICAgaWdub3JlU2luZ2xldG9uc1BhcmFtID0gYCQke3BhcmFtSW5kZXh9Ojp0ZXh0W11gO1xuICAgICAgICB2YWx1ZXMucHVzaChpZ25vcmVTaW5nbGV0b25zKTtcbiAgICB9XG4gICAgaWYgKGhhc0lnbm9yZUdyb3Vwcykge1xuICAgICAgICBwYXJhbUluZGV4Kys7XG4gICAgICAgIGlnbm9yZUdyb3Vwc1BhcmFtID0gYCQke3BhcmFtSW5kZXh9Ojp0ZXh0W11gO1xuICAgICAgICB2YWx1ZXMucHVzaChpZ25vcmVHcm91cHMpO1xuICAgIH1cbiAgICBpZiAoaGFzR3JvdXBDb25jdXJyZW5jeSAmJiBncm91cENvbmN1cnJlbmN5Q29uZmlnKSB7XG4gICAgICAgIHBhcmFtSW5kZXgrKztcbiAgICAgICAgZGVmYXVsdEdyb3VwTGltaXRQYXJhbSA9IGAkJHtwYXJhbUluZGV4fTo6aW50YDtcbiAgICAgICAgdmFsdWVzLnB1c2goZ3JvdXBDb25jdXJyZW5jeUNvbmZpZy5kZWZhdWx0KTtcbiAgICAgICAgaWYgKGhhc1RpZXJzKSB7XG4gICAgICAgICAgICBwYXJhbUluZGV4Kys7XG4gICAgICAgICAgICB0aWVyc1BhcmFtID0gYCQke3BhcmFtSW5kZXh9Ojpqc29uYmA7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChKU09OLnN0cmluZ2lmeShncm91cENvbmN1cnJlbmN5Q29uZmlnLnRpZXJzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsdWVzLCBpZ25vcmVTaW5nbGV0b25zUGFyYW0sIGlnbm9yZUdyb3Vwc1BhcmFtLCBkZWZhdWx0R3JvdXBMaW1pdFBhcmFtLCB0aWVyc1BhcmFtIH07XG59XG5mdW5jdGlvbiBmZXRjaE5leHRKb2Iob3B0aW9ucykge1xuICAgIGNvbnN0IHsgc2NoZW1hLCB0YWJsZSwgbmFtZSwgcG9saWN5LCBsaW1pdCwgaW5jbHVkZU1ldGFkYXRhLCBwcmlvcml0eSA9IHRydWUsIG9yZGVyQnlDcmVhdGVkT24gPSB0cnVlLCBpZ25vcmVTdGFydEFmdGVyID0gZmFsc2UsIGdyb3VwQ29uY3VycmVuY3kgfSA9IG9wdGlvbnM7XG4gICAgY29uc3Qgc2luZ2xldG9uRmV0Y2ggPSBsaW1pdCA+IDEgJiYgKHBvbGljeSA9PT0gUVVFVUVfUE9MSUNJRVMuc2luZ2xldG9uIHx8IHBvbGljeSA9PT0gUVVFVUVfUE9MSUNJRVMuc3RhdGVseSk7XG4gICAgY29uc3QgaGFzSWdub3JlU2luZ2xldG9ucyA9IG9wdGlvbnMuaWdub3JlU2luZ2xldG9ucyAhPSBudWxsICYmIG9wdGlvbnMuaWdub3JlU2luZ2xldG9ucy5sZW5ndGggPiAwO1xuICAgIGNvbnN0IGhhc0lnbm9yZUdyb3VwcyA9IG9wdGlvbnMuaWdub3JlR3JvdXBzICE9IG51bGwgJiYgb3B0aW9ucy5pZ25vcmVHcm91cHMubGVuZ3RoID4gMDtcbiAgICBjb25zdCBoYXNHcm91cENvbmN1cnJlbmN5ID0gZ3JvdXBDb25jdXJyZW5jeSAhPSBudWxsO1xuICAgIGNvbnN0IGhhc1RpZXJzID0gaGFzR3JvdXBDb25jdXJyZW5jeSAmJlxuICAgICAgICB0eXBlb2YgZ3JvdXBDb25jdXJyZW5jeSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgZ3JvdXBDb25jdXJyZW5jeS50aWVycyAmJlxuICAgICAgICBPYmplY3Qua2V5cyhncm91cENvbmN1cnJlbmN5LnRpZXJzKS5sZW5ndGggPiAwO1xuICAgIGNvbnN0IHBhcmFtcyA9IGJ1aWxkRmV0Y2hQYXJhbXMob3B0aW9ucyk7XG4gICAgY29uc3Qgd2hlcmVDb25kaXRpb25zID0gW1xuICAgICAgICBgbmFtZSA9ICcke25hbWV9J2AsXG4gICAgICAgIGBzdGF0ZSA8ICcke0pPQl9TVEFURVMuYWN0aXZlfSdgLFxuICAgICAgICAhaWdub3JlU3RhcnRBZnRlciA/ICdzdGFydF9hZnRlciA8IG5vdygpJyA6ICcnLFxuICAgICAgICBoYXNJZ25vcmVTaW5nbGV0b25zID8gYHNpbmdsZXRvbl9rZXkgPD4gQUxMKCR7cGFyYW1zLmlnbm9yZVNpbmdsZXRvbnNQYXJhbX0pYCA6ICcnLFxuICAgICAgICBoYXNJZ25vcmVHcm91cHMgPyBgKGdyb3VwX2lkIElTIE5VTEwgT1IgZ3JvdXBfaWQgPD4gQUxMKCR7cGFyYW1zLmlnbm9yZUdyb3Vwc1BhcmFtfSkpYCA6ICcnXG4gICAgXS5maWx0ZXIoQm9vbGVhbikuam9pbignIEFORCAnKTtcbiAgICBjb25zdCBzZWxlY3RDb2xzID0gW1xuICAgICAgICAnaWQnLFxuICAgICAgICBzaW5nbGV0b25GZXRjaCA/ICdzaW5nbGV0b25fa2V5JyA6ICcnLFxuICAgICAgICBoYXNHcm91cENvbmN1cnJlbmN5ID8gJ2dyb3VwX2lkLCBncm91cF90aWVyJyA6ICcnXG4gICAgXS5maWx0ZXIoQm9vbGVhbikuam9pbignLCAnKTtcbiAgICBjb25zdCBhY3RpdmVHcm91cENvdW50c0N0ZSA9IGhhc0dyb3VwQ29uY3VycmVuY3lcbiAgICAgICAgPyBgYWN0aXZlX2dyb3VwX2NvdW50cyBBUyAoXG4gICAgICAgIFNFTEVDVCBncm91cF9pZCwgQ09VTlQoKik6OmludCBhcyBhY3RpdmVfY250XG4gICAgICAgIEZST00gJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgICAgIFdIRVJFIG5hbWUgPSAnJHtuYW1lfScgQU5EIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JyBBTkQgZ3JvdXBfaWQgSVMgTk9UIE5VTExcbiAgICAgICAgR1JPVVAgQlkgZ3JvdXBfaWRcbiAgICAgICksIGBcbiAgICAgICAgOiAnJztcbiAgICBjb25zdCBuZXh0Q3RlID0gYFxuICAgICAgbmV4dCBBUyAoXG4gICAgICAgIFNFTEVDVCAke3NlbGVjdENvbHN9XG4gICAgICAgIEZST00gJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgICAgIFdIRVJFICR7d2hlcmVDb25kaXRpb25zfVxuICAgICAgICBPUkRFUiBCWSAke3ByaW9yaXR5ID8gJ3ByaW9yaXR5IGRlc2MsICcgOiAnJ30ke29yZGVyQnlDcmVhdGVkT24gPyAnY3JlYXRlZF9vbiwgJyA6ICcnfWlkXG4gICAgICAgIExJTUlUICR7bGltaXR9XG4gICAgICAgIEZPUiBVUERBVEUgU0tJUCBMT0NLRURcbiAgICAgIClgO1xuICAgIGNvbnN0IHNpbmdsZXRvbkN0ZSA9IHNpbmdsZXRvbkZldGNoXG4gICAgICAgID8gYCwgc2luZ2xldG9uX3JhbmtpbmcgQVMgKFxuICAgICAgICBTRUxFQ1QgaWQsICR7aGFzR3JvdXBDb25jdXJyZW5jeSA/ICdncm91cF9pZCwgZ3JvdXBfdGllciwgJyA6ICcnfVxuICAgICAgICAgIHJvd19udW1iZXIoKSBPVkVSIChQQVJUSVRJT04gQlkgc2luZ2xldG9uX2tleSkgYXMgc2luZ2xldG9uX3JuXG4gICAgICAgIEZST00gbmV4dFxuICAgICAgKWBcbiAgICAgICAgOiAnJztcbiAgICBjb25zdCBncm91cENvbmN1cnJlbmN5Q3RlcyA9IGhhc0dyb3VwQ29uY3VycmVuY3lcbiAgICAgICAgPyBgLFxuICAgICAgZ3JvdXBfcmFua2luZyBBUyAoXG4gICAgICAgIFNFTEVDVCB0LmlkXG4gICAgICAgICAgLCB0Lmdyb3VwX2lkXG4gICAgICAgICAgLCB0Lmdyb3VwX3RpZXJcbiAgICAgICAgICAke3NpbmdsZXRvbkZldGNoID8gJywgc2luZ2xldG9uX3JuJyA6ICcnfVxuICAgICAgICAgICwgUk9XX05VTUJFUigpIE9WRVIgKFBBUlRJVElPTiBCWSB0Lmdyb3VwX2lkIE9SREVSIEJZIHQuaWQpIGFzIGdyb3VwX3JuXG4gICAgICAgICAgLCBDT0FMRVNDRShhZ2MuYWN0aXZlX2NudCwgMCkgYXMgYWN0aXZlX2NudFxuICAgICAgICBGUk9NICR7c2luZ2xldG9uRmV0Y2ggPyAnc2luZ2xldG9uX3JhbmtpbmcnIDogJ25leHQnfSB0XG4gICAgICAgIExFRlQgSk9JTiBhY3RpdmVfZ3JvdXBfY291bnRzIGFnYyBPTiB0Lmdyb3VwX2lkID0gYWdjLmdyb3VwX2lkXG4gICAgICAgICR7c2luZ2xldG9uRmV0Y2ggPyAnV0hFUkUgc2luZ2xldG9uX3JuID0gMScgOiAnJ31cbiAgICAgICksXG4gICAgICBncm91cF9maWx0ZXJlZCBBUyAoXG4gICAgICAgIFNFTEVDVCBpZCBGUk9NIGdyb3VwX3JhbmtpbmdcbiAgICAgICAgV0hFUkUgZ3JvdXBfaWQgSVMgTlVMTFxuICAgICAgICAgIE9SIChhY3RpdmVfY250ICsgZ3JvdXBfcm4pIDw9ICR7aGFzVGllcnNcbiAgICAgICAgICAgID8gYENPQUxFU0NFKCgke3BhcmFtcy50aWVyc1BhcmFtfSAtPj4gZ3JvdXBfdGllcik6OmludCwgJHtwYXJhbXMuZGVmYXVsdEdyb3VwTGltaXRQYXJhbX0pYFxuICAgICAgICAgICAgOiBwYXJhbXMuZGVmYXVsdEdyb3VwTGltaXRQYXJhbX1cbiAgICAgIClgXG4gICAgICAgIDogJyc7XG4gICAgY29uc3QgZmluYWxDdGUgPSAoaGFzR3JvdXBDb25jdXJyZW5jeSlcbiAgICAgICAgPyAnZ3JvdXBfZmlsdGVyZWQnXG4gICAgICAgIDogKHNpbmdsZXRvbkZldGNoKVxuICAgICAgICAgICAgPyAnc2luZ2xldG9uX3JhbmtpbmcnXG4gICAgICAgICAgICA6ICduZXh0JztcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0OiBgXG4gICAgICBXSVRIXG4gICAgICAke2FjdGl2ZUdyb3VwQ291bnRzQ3RlfVxuICAgICAgJHtuZXh0Q3RlfVxuICAgICAgJHtzaW5nbGV0b25DdGV9XG4gICAgICAke2dyb3VwQ29uY3VycmVuY3lDdGVzfVxuICAgICAgVVBEQVRFICR7c2NoZW1hfS4ke3RhYmxlfSBqIFNFVFxuICAgICAgICBzdGF0ZSA9ICcke0pPQl9TVEFURVMuYWN0aXZlfScsXG4gICAgICAgIHN0YXJ0ZWRfb24gPSBub3coKSxcbiAgICAgICAgcmV0cnlfY291bnQgPSBDQVNFIFdIRU4gc3RhcnRlZF9vbiBJUyBOT1QgTlVMTCBUSEVOIHJldHJ5X2NvdW50ICsgMSBFTFNFIHJldHJ5X2NvdW50IEVORFxuICAgICAgRlJPTSAke2ZpbmFsQ3RlfVxuICAgICAgV0hFUkUgbmFtZSA9ICcke25hbWV9JyBBTkQgai5pZCA9ICR7ZmluYWxDdGV9LmlkXG4gICAgICAke3NpbmdsZXRvbkZldGNoICYmICFoYXNHcm91cENvbmN1cnJlbmN5ID8gJ0FORCBzaW5nbGV0b25fcm4gPSAxJyA6ICcnfVxuICAgICAgUkVUVVJOSU5HIGouJHtpbmNsdWRlTWV0YWRhdGEgPyBKT0JfQ09MVU1OU19BTEwgOiBKT0JfQ09MVU1OU19NSU59XG4gICAgYCxcbiAgICAgICAgdmFsdWVzOiBwYXJhbXMudmFsdWVzXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNvbXBsZXRlSm9icyhzY2hlbWEsIHRhYmxlLCBpbmNsdWRlUXVldWVkKSB7XG4gICAgY29uc3Qgc3RhdGVGaWx0ZXIgPSBpbmNsdWRlUXVldWVkXG4gICAgICAgID8gYHN0YXRlIDwgJyR7Sk9CX1NUQVRFUy5jb21wbGV0ZWR9J2BcbiAgICAgICAgOiBgc3RhdGUgPSAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nYDtcbiAgICByZXR1cm4gYFxuICAgIFdJVEggcmVzdWx0cyBBUyAoXG4gICAgICBVUERBVEUgJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgICBTRVQgY29tcGxldGVkX29uID0gbm93KCksXG4gICAgICAgIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5jb21wbGV0ZWR9JyxcbiAgICAgICAgb3V0cHV0ID0gJDM6Ompzb25iXG4gICAgICBXSEVSRSBuYW1lID0gJDFcbiAgICAgICAgQU5EIGlkIElOIChTRUxFQ1QgVU5ORVNUKCQyOjp1dWlkW10pKVxuICAgICAgICBBTkQgJHtzdGF0ZUZpbHRlcn1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgKVxuICAgIFNFTEVDVCBDT1VOVCgqKSBGUk9NIHJlc3VsdHNcbiAgYDtcbn1cbmZ1bmN0aW9uIGNhbmNlbEpvYnMoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgXG4gICAgV0lUSCByZXN1bHRzIGFzIChcbiAgICAgIFVQREFURSAke3NjaGVtYX0uJHt0YWJsZX1cbiAgICAgIFNFVCBjb21wbGV0ZWRfb24gPSBub3coKSxcbiAgICAgICAgc3RhdGUgPSAnJHtKT0JfU1RBVEVTLmNhbmNlbGxlZH0nXG4gICAgICBXSEVSRSBuYW1lID0gJDFcbiAgICAgICAgQU5EIGlkIElOIChTRUxFQ1QgVU5ORVNUKCQyOjp1dWlkW10pKVxuICAgICAgICBBTkQgc3RhdGUgPCAnJHtKT0JfU1RBVEVTLmNvbXBsZXRlZH0nXG4gICAgICBSRVRVUk5JTkcgMVxuICAgIClcbiAgICBTRUxFQ1QgQ09VTlQoKikgZnJvbSByZXN1bHRzXG4gIGA7XG59XG5mdW5jdGlvbiByZXN1bWVKb2JzKHNjaGVtYSwgdGFibGUpIHtcbiAgICByZXR1cm4gYFxuICAgIFdJVEggcmVzdWx0cyBhcyAoXG4gICAgICBVUERBVEUgJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgICBTRVQgY29tcGxldGVkX29uID0gTlVMTCxcbiAgICAgICAgc3RhdGUgPSAnJHtKT0JfU1RBVEVTLmNyZWF0ZWR9J1xuICAgICAgV0hFUkUgbmFtZSA9ICQxXG4gICAgICAgIEFORCBpZCBJTiAoU0VMRUNUIFVOTkVTVCgkMjo6dXVpZFtdKSlcbiAgICAgICAgQU5EIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5jYW5jZWxsZWR9J1xuICAgICAgUkVUVVJOSU5HIDFcbiAgICApXG4gICAgU0VMRUNUIENPVU5UKCopIGZyb20gcmVzdWx0c1xuICBgO1xufVxuZnVuY3Rpb24gcmVzdG9yZUpvYnMoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgXG4gICAgVVBEQVRFICR7c2NoZW1hfS4ke3RhYmxlfVxuICAgIFNFVCBzdGF0ZSA9ICcke0pPQl9TVEFURVMuY3JlYXRlZH0nXG4gICAgV0hFUkUgbmFtZSA9ICQxXG4gICAgICBBTkQgaWQgSU4gKFNFTEVDVCBVTk5FU1QoJDI6OnV1aWRbXSkpXG4gIGA7XG59XG5mdW5jdGlvbiBpbnNlcnRKb2JzKHNjaGVtYSwgeyB0YWJsZSwgbmFtZSwgcmV0dXJuSWQgPSB0cnVlIH0pIHtcbiAgICBjb25zdCBzcWwgPSBgXG4gICAgSU5TRVJUIElOVE8gJHtzY2hlbWF9LiR7dGFibGV9IChcbiAgICAgIGlkLFxuICAgICAgbmFtZSxcbiAgICAgIGRhdGEsXG4gICAgICBwcmlvcml0eSxcbiAgICAgIHN0YXJ0X2FmdGVyLFxuICAgICAgc2luZ2xldG9uX2tleSxcbiAgICAgIHNpbmdsZXRvbl9vbixcbiAgICAgIGdyb3VwX2lkLFxuICAgICAgZ3JvdXBfdGllcixcbiAgICAgIGV4cGlyZV9zZWNvbmRzLFxuICAgICAgZGVsZXRpb25fc2Vjb25kcyxcbiAgICAgIGtlZXBfdW50aWwsXG4gICAgICByZXRyeV9saW1pdCxcbiAgICAgIHJldHJ5X2RlbGF5LFxuICAgICAgcmV0cnlfYmFja29mZixcbiAgICAgIHJldHJ5X2RlbGF5X21heCxcbiAgICAgIHBvbGljeSxcbiAgICAgIGRlYWRfbGV0dGVyXG4gICAgKVxuICAgIFNFTEVDVFxuICAgICAgQ09BTEVTQ0UoaWQsIGdlbl9yYW5kb21fdXVpZCgpKSBhcyBpZCxcbiAgICAgICcke25hbWV9JyBhcyBuYW1lLFxuICAgICAgZGF0YSxcbiAgICAgIENPQUxFU0NFKHByaW9yaXR5LCAwKSBhcyBwcmlvcml0eSxcbiAgICAgIGouc3RhcnRfYWZ0ZXIsXG4gICAgICBcInNpbmdsZXRvbktleVwiLFxuICAgICAgQ0FTRVxuICAgICAgICBXSEVOIFwic2luZ2xldG9uU2Vjb25kc1wiIElTIE5PVCBOVUxMIFRIRU4gJ2Vwb2NoJzo6dGltZXN0YW1wICsgJzFzJzo6aW50ZXJ2YWwgKiAoXCJzaW5nbGV0b25TZWNvbmRzXCIgKiBmbG9vcigoIGRhdGVfcGFydCgnZXBvY2gnLCBub3coKSkgKyBDT0FMRVNDRShcInNpbmdsZXRvbk9mZnNldFwiLDApKSAvIFwic2luZ2xldG9uU2Vjb25kc1wiICkpXG4gICAgICAgIEVMU0UgTlVMTFxuICAgICAgICBFTkQgYXMgc2luZ2xldG9uX29uLFxuICAgICAgXCJncm91cElkXCIgYXMgZ3JvdXBfaWQsXG4gICAgICBcImdyb3VwVGllclwiIGFzIGdyb3VwX3RpZXIsXG4gICAgICBDT0FMRVNDRShcImV4cGlyZUluU2Vjb25kc1wiLCBxLmV4cGlyZV9zZWNvbmRzKSBhcyBleHBpcmVfc2Vjb25kcyxcbiAgICAgIENPQUxFU0NFKFwiZGVsZXRlQWZ0ZXJTZWNvbmRzXCIsIHEuZGVsZXRpb25fc2Vjb25kcykgYXMgZGVsZXRpb25fc2Vjb25kcyxcbiAgICAgIGouc3RhcnRfYWZ0ZXIgKyAoQ09BTEVTQ0UoXCJyZXRlbnRpb25TZWNvbmRzXCIsIHEucmV0ZW50aW9uX3NlY29uZHMpICogaW50ZXJ2YWwgJzFzJykgYXMga2VlcF91bnRpbCxcbiAgICAgIENPQUxFU0NFKFwicmV0cnlMaW1pdFwiLCBxLnJldHJ5X2xpbWl0KSBhcyByZXRyeV9saW1pdCxcbiAgICAgIENPQUxFU0NFKFwicmV0cnlEZWxheVwiLCBxLnJldHJ5X2RlbGF5KSBhcyByZXRyeV9kZWxheSxcbiAgICAgIENPQUxFU0NFKFwicmV0cnlCYWNrb2ZmXCIsIHEucmV0cnlfYmFja29mZiwgZmFsc2UpIGFzIHJldHJ5X2JhY2tvZmYsXG4gICAgICBDT0FMRVNDRShcInJldHJ5RGVsYXlNYXhcIiwgcS5yZXRyeV9kZWxheV9tYXgpIGFzIHJldHJ5X2RlbGF5X21heCxcbiAgICAgIHEucG9saWN5LFxuICAgICAgQ09BTEVTQ0UoXCJkZWFkTGV0dGVyXCIsIHEuZGVhZF9sZXR0ZXIpIGFzIGRlYWRfbGV0dGVyXG4gICAgRlJPTSAoXG4gICAgICBTRUxFQ1QgKixcbiAgICAgICAgQ0FTRVxuICAgICAgICAgIFdIRU4gcmlnaHQoXCJzdGFydEFmdGVyXCIsIDEpID0gJ1onIFRIRU4gQ0FTVChcInN0YXJ0QWZ0ZXJcIiBhcyB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUpXG4gICAgICAgICAgRUxTRSBub3coKSArIENBU1QoQ09BTEVTQ0UoXCJzdGFydEFmdGVyXCIsJzAnKSBhcyBpbnRlcnZhbClcbiAgICAgICAgICBFTkQgYXMgc3RhcnRfYWZ0ZXJcbiAgICAgIEZST00ganNvbl90b19yZWNvcmRzZXQoJDE6Ompzb24pIGFzIHggKFxuICAgICAgICBpZCB1dWlkLFxuICAgICAgICBwcmlvcml0eSBpbnRlZ2VyLFxuICAgICAgICBkYXRhIGpzb25iLFxuICAgICAgICBcInN0YXJ0QWZ0ZXJcIiB0ZXh0LFxuICAgICAgICBcInJldHJ5TGltaXRcIiBpbnRlZ2VyLFxuICAgICAgICBcInJldHJ5RGVsYXlcIiBpbnRlZ2VyLFxuICAgICAgICBcInJldHJ5RGVsYXlNYXhcIiBpbnRlZ2VyLFxuICAgICAgICBcInJldHJ5QmFja29mZlwiIGJvb2xlYW4sXG4gICAgICAgIFwic2luZ2xldG9uS2V5XCIgdGV4dCxcbiAgICAgICAgXCJzaW5nbGV0b25TZWNvbmRzXCIgaW50ZWdlcixcbiAgICAgICAgXCJzaW5nbGV0b25PZmZzZXRcIiBpbnRlZ2VyLFxuICAgICAgICBcImdyb3VwSWRcIiB0ZXh0LFxuICAgICAgICBcImdyb3VwVGllclwiIHRleHQsXG4gICAgICAgIFwiZXhwaXJlSW5TZWNvbmRzXCIgaW50ZWdlcixcbiAgICAgICAgXCJkZWxldGVBZnRlclNlY29uZHNcIiBpbnRlZ2VyLFxuICAgICAgICBcInJldGVudGlvblNlY29uZHNcIiBpbnRlZ2VyLFxuICAgICAgICBcImRlYWRMZXR0ZXJcIiB0ZXh0XG4gICAgICApXG4gICAgKSBqXG4gICAgSk9JTiAke3NjaGVtYX0ucXVldWUgcSBPTiBxLm5hbWUgPSAnJHtuYW1lfSdcbiAgICBPTiBDT05GTElDVCBETyBOT1RISU5HXG4gICAgJHtyZXR1cm5JZCA/ICdSRVRVUk5JTkcgaWQnIDogJyd9XG4gIGA7XG4gICAgcmV0dXJuIHNxbDtcbn1cbmZ1bmN0aW9uIGZhaWxKb2JzQnlJZChzY2hlbWEsIHRhYmxlKSB7XG4gICAgY29uc3Qgd2hlcmUgPSBgbmFtZSA9ICQxIEFORCBpZCBJTiAoU0VMRUNUIFVOTkVTVCgkMjo6dXVpZFtdKSkgQU5EIHN0YXRlIDwgJyR7Sk9CX1NUQVRFUy5jb21wbGV0ZWR9J2A7XG4gICAgY29uc3Qgb3V0cHV0ID0gJyQzOjpqc29uYic7XG4gICAgcmV0dXJuIGZhaWxKb2JzKHNjaGVtYSwgdGFibGUsIHdoZXJlLCBvdXRwdXQpO1xufVxuZnVuY3Rpb24gZmFpbEpvYnNCeVRpbWVvdXQoc2NoZW1hLCB0YWJsZSwgcXVldWVzKSB7XG4gICAgY29uc3Qgd2hlcmUgPSBgc3RhdGUgPSAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nXG4gICAgICAgICAgICBBTkQgKHN0YXJ0ZWRfb24gKyBleHBpcmVfc2Vjb25kcyAqIGludGVydmFsICcxcycpIDwgbm93KClcbiAgICAgICAgICAgIEFORCBuYW1lID0gQU5ZKCR7c2VyaWFsaXplQXJyYXlQYXJhbShxdWV1ZXMpfSlgO1xuICAgIGNvbnN0IG91dHB1dCA9ICdcXCd7IFwidmFsdWVcIjogeyBcIm1lc3NhZ2VcIjogXCJqb2IgdGltZWQgb3V0XCIgfSB9XFwnOjpqc29uYic7XG4gICAgcmV0dXJuIGxvY2tlZChzY2hlbWEsIGZhaWxKb2JzKHNjaGVtYSwgdGFibGUsIHdoZXJlLCBvdXRwdXQpLCB0YWJsZSArICdmYWlsSm9ic0J5VGltZW91dCcpO1xufVxuZnVuY3Rpb24gZmFpbEpvYnMoc2NoZW1hLCB0YWJsZSwgd2hlcmUsIG91dHB1dCkge1xuICAgIHJldHVybiBgXG4gICAgV0lUSCBkZWxldGVkX2pvYnMgQVMgKFxuICAgICAgREVMRVRFIEZST00gJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgICBXSEVSRSAke3doZXJlfVxuICAgICAgUkVUVVJOSU5HICpcbiAgICApLFxuICAgIHJldHJpZWRfam9icyBBUyAoXG4gICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0uJHt0YWJsZX0gKFxuICAgICAgICBpZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZXRyeV9saW1pdCxcbiAgICAgICAgcmV0cnlfY291bnQsXG4gICAgICAgIHJldHJ5X2RlbGF5LFxuICAgICAgICByZXRyeV9iYWNrb2ZmLFxuICAgICAgICByZXRyeV9kZWxheV9tYXgsXG4gICAgICAgIHN0YXJ0X2FmdGVyLFxuICAgICAgICBzdGFydGVkX29uLFxuICAgICAgICBzaW5nbGV0b25fa2V5LFxuICAgICAgICBzaW5nbGV0b25fb24sXG4gICAgICAgIGdyb3VwX2lkLFxuICAgICAgICBncm91cF90aWVyLFxuICAgICAgICBleHBpcmVfc2Vjb25kcyxcbiAgICAgICAgZGVsZXRpb25fc2Vjb25kcyxcbiAgICAgICAgY3JlYXRlZF9vbixcbiAgICAgICAgY29tcGxldGVkX29uLFxuICAgICAgICBrZWVwX3VudGlsLFxuICAgICAgICBwb2xpY3ksXG4gICAgICAgIG91dHB1dCxcbiAgICAgICAgZGVhZF9sZXR0ZXJcbiAgICAgIClcbiAgICAgIFNFTEVDVFxuICAgICAgICBpZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIGRhdGEsXG4gICAgICAgIENBU0VcbiAgICAgICAgICBXSEVOIHJldHJ5X2NvdW50IDwgcmV0cnlfbGltaXQgVEhFTiAnJHtKT0JfU1RBVEVTLnJldHJ5fSc6OiR7c2NoZW1hfS5qb2Jfc3RhdGVcbiAgICAgICAgICBFTFNFICcke0pPQl9TVEFURVMuZmFpbGVkfSc6OiR7c2NoZW1hfS5qb2Jfc3RhdGVcbiAgICAgICAgICBFTkQgYXMgc3RhdGUsXG4gICAgICAgIHJldHJ5X2xpbWl0LFxuICAgICAgICByZXRyeV9jb3VudCxcbiAgICAgICAgcmV0cnlfZGVsYXksXG4gICAgICAgIHJldHJ5X2JhY2tvZmYsXG4gICAgICAgIHJldHJ5X2RlbGF5X21heCxcbiAgICAgICAgQ0FTRSBXSEVOIHJldHJ5X2NvdW50ID0gcmV0cnlfbGltaXQgVEhFTiBzdGFydF9hZnRlclxuICAgICAgICAgICAgIFdIRU4gTk9UIHJldHJ5X2JhY2tvZmYgVEhFTiBub3coKSArIHJldHJ5X2RlbGF5ICogaW50ZXJ2YWwgJzEnXG4gICAgICAgICAgICAgRUxTRSBub3coKSArIExFQVNUKFxuICAgICAgICAgICAgICAgcmV0cnlfZGVsYXlfbWF4LFxuICAgICAgICAgICAgICAgcmV0cnlfZGVsYXkgKiAoXG4gICAgICAgICAgICAgICAgMiBeIExFQVNUKDE2LCByZXRyeV9jb3VudCArIDEpIC8gMiArXG4gICAgICAgICAgICAgICAgMiBeIExFQVNUKDE2LCByZXRyeV9jb3VudCArIDEpIC8gMiAqIHJhbmRvbSgpXG4gICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgKSAqIGludGVydmFsICcxcydcbiAgICAgICAgRU5EIGFzIHN0YXJ0X2FmdGVyLFxuICAgICAgICBzdGFydGVkX29uLFxuICAgICAgICBzaW5nbGV0b25fa2V5LFxuICAgICAgICBzaW5nbGV0b25fb24sXG4gICAgICAgIGdyb3VwX2lkLFxuICAgICAgICBncm91cF90aWVyLFxuICAgICAgICBleHBpcmVfc2Vjb25kcyxcbiAgICAgICAgZGVsZXRpb25fc2Vjb25kcyxcbiAgICAgICAgY3JlYXRlZF9vbixcbiAgICAgICAgQ0FTRSBXSEVOIHJldHJ5X2NvdW50IDwgcmV0cnlfbGltaXQgVEhFTiBOVUxMIEVMU0Ugbm93KCkgRU5EIGFzIGNvbXBsZXRlZF9vbixcbiAgICAgICAga2VlcF91bnRpbCxcbiAgICAgICAgcG9saWN5LFxuICAgICAgICAke291dHB1dH0sXG4gICAgICAgIGRlYWRfbGV0dGVyXG4gICAgICBGUk9NIGRlbGV0ZWRfam9ic1xuICAgICAgT04gQ09ORkxJQ1QgRE8gTk9USElOR1xuICAgICAgUkVUVVJOSU5HICpcbiAgICApLFxuICAgIGZhaWxlZF9qb2JzIGFzIChcbiAgICAgIElOU0VSVCBJTlRPICR7c2NoZW1hfS4ke3RhYmxlfSAoXG4gICAgICAgIGlkLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJldHJ5X2xpbWl0LFxuICAgICAgICByZXRyeV9jb3VudCxcbiAgICAgICAgcmV0cnlfZGVsYXksXG4gICAgICAgIHJldHJ5X2JhY2tvZmYsXG4gICAgICAgIHJldHJ5X2RlbGF5X21heCxcbiAgICAgICAgc3RhcnRfYWZ0ZXIsXG4gICAgICAgIHN0YXJ0ZWRfb24sXG4gICAgICAgIHNpbmdsZXRvbl9rZXksXG4gICAgICAgIHNpbmdsZXRvbl9vbixcbiAgICAgICAgZ3JvdXBfaWQsXG4gICAgICAgIGdyb3VwX3RpZXIsXG4gICAgICAgIGV4cGlyZV9zZWNvbmRzLFxuICAgICAgICBkZWxldGlvbl9zZWNvbmRzLFxuICAgICAgICBjcmVhdGVkX29uLFxuICAgICAgICBjb21wbGV0ZWRfb24sXG4gICAgICAgIGtlZXBfdW50aWwsXG4gICAgICAgIHBvbGljeSxcbiAgICAgICAgb3V0cHV0LFxuICAgICAgICBkZWFkX2xldHRlclxuICAgICAgKVxuICAgICAgU0VMRUNUXG4gICAgICAgIGlkLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgJyR7Sk9CX1NUQVRFUy5mYWlsZWR9Jzo6JHtzY2hlbWF9LmpvYl9zdGF0ZSBhcyBzdGF0ZSxcbiAgICAgICAgcmV0cnlfbGltaXQsXG4gICAgICAgIHJldHJ5X2NvdW50LFxuICAgICAgICByZXRyeV9kZWxheSxcbiAgICAgICAgcmV0cnlfYmFja29mZixcbiAgICAgICAgcmV0cnlfZGVsYXlfbWF4LFxuICAgICAgICBzdGFydF9hZnRlcixcbiAgICAgICAgc3RhcnRlZF9vbixcbiAgICAgICAgc2luZ2xldG9uX2tleSxcbiAgICAgICAgc2luZ2xldG9uX29uLFxuICAgICAgICBncm91cF9pZCxcbiAgICAgICAgZ3JvdXBfdGllcixcbiAgICAgICAgZXhwaXJlX3NlY29uZHMsXG4gICAgICAgIGRlbGV0aW9uX3NlY29uZHMsXG4gICAgICAgIGNyZWF0ZWRfb24sXG4gICAgICAgIG5vdygpIGFzIGNvbXBsZXRlZF9vbixcbiAgICAgICAga2VlcF91bnRpbCxcbiAgICAgICAgcG9saWN5LFxuICAgICAgICAke291dHB1dH0sXG4gICAgICAgIGRlYWRfbGV0dGVyXG4gICAgICBGUk9NIGRlbGV0ZWRfam9ic1xuICAgICAgV0hFUkUgaWQgTk9UIElOIChTRUxFQ1QgaWQgZnJvbSByZXRyaWVkX2pvYnMpXG4gICAgICBSRVRVUk5JTkcgKlxuICAgICksXG4gICAgcmVzdWx0cyBhcyAoXG4gICAgICBTRUxFQ1QgKiBGUk9NIHJldHJpZWRfam9ic1xuICAgICAgVU5JT04gQUxMXG4gICAgICBTRUxFQ1QgKiBGUk9NIGZhaWxlZF9qb2JzXG4gICAgKSxcbiAgICBkbHFfam9icyBhcyAoXG4gICAgICBJTlNFUlQgSU5UTyAke3NjaGVtYX0uam9iIChuYW1lLCBkYXRhLCBvdXRwdXQsIHJldHJ5X2xpbWl0LCByZXRyeV9iYWNrb2ZmLCByZXRyeV9kZWxheSwga2VlcF91bnRpbCwgZGVsZXRpb25fc2Vjb25kcylcbiAgICAgIFNFTEVDVFxuICAgICAgICByLmRlYWRfbGV0dGVyLFxuICAgICAgICBkYXRhLFxuICAgICAgICBvdXRwdXQsXG4gICAgICAgIHEucmV0cnlfbGltaXQsXG4gICAgICAgIHEucmV0cnlfYmFja29mZixcbiAgICAgICAgcS5yZXRyeV9kZWxheSxcbiAgICAgICAgbm93KCkgKyBxLnJldGVudGlvbl9zZWNvbmRzICogaW50ZXJ2YWwgJzFzJyxcbiAgICAgICAgcS5kZWxldGlvbl9zZWNvbmRzXG4gICAgICBGUk9NIHJlc3VsdHMgclxuICAgICAgICBKT0lOICR7c2NoZW1hfS5xdWV1ZSBxIE9OIHEubmFtZSA9IHIuZGVhZF9sZXR0ZXJcbiAgICAgIFdIRVJFIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5mYWlsZWR9J1xuICAgIClcbiAgICBTRUxFQ1QgQ09VTlQoKikgRlJPTSByZXN1bHRzXG4gIGA7XG59XG5mdW5jdGlvbiBkZWxldGlvbihzY2hlbWEsIHRhYmxlLCBxdWV1ZXMpIHtcbiAgICBjb25zdCBzcWwgPSBgXG4gICAgREVMRVRFIEZST00gJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgV0hFUkUgbmFtZSA9IEFOWSgke3NlcmlhbGl6ZUFycmF5UGFyYW0ocXVldWVzKX0pXG4gICAgICBBTkRcbiAgICAgIChcbiAgICAgICAgKGRlbGV0aW9uX3NlY29uZHMgPiAwIEFORCBjb21wbGV0ZWRfb24gKyBkZWxldGlvbl9zZWNvbmRzICogaW50ZXJ2YWwgJzFzJyA8IG5vdygpKVxuICAgICAgICBPUlxuICAgICAgICAoc3RhdGUgPCAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nIEFORCBrZWVwX3VudGlsIDwgbm93KCkpXG4gICAgICApXG4gIGA7XG4gICAgcmV0dXJuIGxvY2tlZChzY2hlbWEsIHNxbCwgdGFibGUgKyAnZGVsZXRpb24nKTtcbn1cbmZ1bmN0aW9uIHJldHJ5Sm9icyhzY2hlbWEsIHRhYmxlKSB7XG4gICAgcmV0dXJuIGBcbiAgICBXSVRIIHJlc3VsdHMgYXMgKFxuICAgICAgVVBEQVRFICR7c2NoZW1hfS5qb2JcbiAgICAgIFNFVCBzdGF0ZSA9ICcke0pPQl9TVEFURVMucmV0cnl9JyxcbiAgICAgICAgcmV0cnlfbGltaXQgPSByZXRyeV9saW1pdCArIDFcbiAgICAgIFdIRVJFIG5hbWUgPSAkMVxuICAgICAgICBBTkQgaWQgSU4gKFNFTEVDVCBVTk5FU1QoJDI6OnV1aWRbXSkpXG4gICAgICAgIEFORCBzdGF0ZSA9ICcke0pPQl9TVEFURVMuZmFpbGVkfSdcbiAgICAgIFJFVFVSTklORyAxXG4gICAgKVxuICAgIFNFTEVDVCBDT1VOVCgqKSBmcm9tIHJlc3VsdHNcbiAgYDtcbn1cbmZ1bmN0aW9uIGdldFF1ZXVlU3RhdHMoc2NoZW1hLCB0YWJsZSwgcXVldWVzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogYFxuICAgIFNFTEVDVFxuICAgICAgICBuYW1lLFxuICAgICAgICAoY291bnQoKikgRklMVEVSIChXSEVSRSBzdGFydF9hZnRlciA+IG5vdygpKSk6OmludCBhcyBcImRlZmVycmVkQ291bnRcIixcbiAgICAgICAgKGNvdW50KCopIEZJTFRFUiAoV0hFUkUgc3RhdGUgPCAnJHtKT0JfU1RBVEVTLmFjdGl2ZX0nKSk6OmludCBhcyBcInF1ZXVlZENvdW50XCIsXG4gICAgICAgIChjb3VudCgqKSBGSUxURVIgKFdIRVJFIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JykpOjppbnQgYXMgXCJhY3RpdmVDb3VudFwiLFxuICAgICAgICBjb3VudCgqKTo6aW50IGFzIFwidG90YWxDb3VudFwiLFxuICAgICAgICBhcnJheV9hZ2coc2luZ2xldG9uX2tleSkgRklMVEVSIChXSEVSRSBwb2xpY3kgSU4gKCcke1FVRVVFX1BPTElDSUVTLnNpbmdsZXRvbn0nLCcke1FVRVVFX1BPTElDSUVTLnN0YXRlbHl9JykgQU5EIHN0YXRlID0gJyR7Sk9CX1NUQVRFUy5hY3RpdmV9JykgYXMgXCJzaW5nbGV0b25zQWN0aXZlXCJcbiAgICAgIEZST00gJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgICBXSEVSRSBuYW1lID0gQU5ZKCQxOjp0ZXh0W10pXG4gICAgICBHUk9VUCBCWSAxXG4gIGAsXG4gICAgICAgIHZhbHVlczogW3F1ZXVlc11cbiAgICB9O1xufVxuZnVuY3Rpb24gY2FjaGVRdWV1ZVN0YXRzKHNjaGVtYSwgdGFibGUsIHF1ZXVlcykge1xuICAgIGNvbnN0IHN0YXRzUXVlcnkgPSBnZXRRdWV1ZVN0YXRzKHNjaGVtYSwgdGFibGUsIHF1ZXVlcyk7XG4gICAgLy8gU2VyaWFsaXplIHRoZSAkMSBwYXJhbWV0ZXIgZm9yIHVzZSBpbiBsb2NrZWQoKSBtdWx0aS1zdGF0ZW1lbnQgcXVlcnlcbiAgICBjb25zdCBzdGF0c1RleHQgPSBzdGF0c1F1ZXJ5LnRleHQucmVwbGFjZSgnJDE6OnRleHRbXScsIHNlcmlhbGl6ZUFycmF5UGFyYW0ocXVldWVzKSk7XG4gICAgY29uc3Qgc3FsID0gYFxuICAgIFdJVEggc3RhdHMgQVMgKCR7c3RhdHNUZXh0fSlcbiAgICBVUERBVEUgJHtzY2hlbWF9LnF1ZXVlIFNFVFxuICAgICAgZGVmZXJyZWRfY291bnQgPSBDT0FMRVNDRShzdGF0cy5cImRlZmVycmVkQ291bnRcIiwgMCksXG4gICAgICBxdWV1ZWRfY291bnQgPSBDT0FMRVNDRShzdGF0cy5cInF1ZXVlZENvdW50XCIsIDApLFxuICAgICAgYWN0aXZlX2NvdW50ID0gQ09BTEVTQ0Uoc3RhdHMuXCJhY3RpdmVDb3VudFwiLCAwKSxcbiAgICAgIHRvdGFsX2NvdW50ID0gQ09BTEVTQ0Uoc3RhdHMuXCJ0b3RhbENvdW50XCIsIDApLFxuICAgICAgc2luZ2xldG9uc19hY3RpdmUgPSBzdGF0cy5cInNpbmdsZXRvbnNBY3RpdmVcIlxuICAgIEZST00gKFxuICAgICAgU0VMRUNUIHEubmFtZVxuICAgICAgRlJPTSB1bm5lc3QoJHtzZXJpYWxpemVBcnJheVBhcmFtKHF1ZXVlcyl9KSBBUyBxKG5hbWUpXG4gICAgKSBxXG4gICAgTEVGVCBKT0lOIHN0YXRzIE9OIHN0YXRzLm5hbWUgPSBxLm5hbWVcbiAgICBXSEVSRSBxdWV1ZS5uYW1lID0gcS5uYW1lXG4gICAgUkVUVVJOSU5HXG4gICAgICBxdWV1ZS5uYW1lLFxuICAgICAgcXVldWUucXVldWVkX2NvdW50IGFzIFwicXVldWVkQ291bnRcIixcbiAgICAgIHF1ZXVlLndhcm5pbmdfcXVldWVkIGFzIFwid2FybmluZ1F1ZXVlU2l6ZVwiXG4gIGA7XG4gICAgcmV0dXJuIGxvY2tlZChzY2hlbWEsIHNxbCwgJ3F1ZXVlLXN0YXRzJyk7XG59XG4vLyBTZXJpYWxpemUgYSBzdHJpbmcgYXJyYXkgZm9yIGVtYmVkZGluZyBkaXJlY3RseSBpbiBTUUwgYXMgUG9zdGdyZVNRTCBhcnJheSBsaXRlcmFsXG5mdW5jdGlvbiBzZXJpYWxpemVBcnJheVBhcmFtKHZhbHVlcykge1xuICAgIGNvbnN0IGVzY2FwZWQgPSB2YWx1ZXMubWFwKHYgPT4gYCcke3YucmVwbGFjZShTSU5HTEVfUVVPVEVfUkVHRVgsIFwiJydcIil9J2ApO1xuICAgIHJldHVybiBgQVJSQVlbJHtlc2NhcGVkLmpvaW4oJywnKX1dOjp0ZXh0W11gO1xufVxuZnVuY3Rpb24gbG9ja2VkKHNjaGVtYSwgcXVlcnksIGtleSkge1xuICAgIGNvbnN0IHNxbCA9IEFycmF5LmlzQXJyYXkocXVlcnkpID8gcXVlcnkuam9pbignO1xcbicpIDogcXVlcnk7XG4gICAgcmV0dXJuIGBcbiAgICBCRUdJTjtcbiAgICBTRVQgTE9DQUwgbG9ja190aW1lb3V0ID0gMzAwMDA7XG4gICAgU0VUIExPQ0FMIGlkbGVfaW5fdHJhbnNhY3Rpb25fc2Vzc2lvbl90aW1lb3V0ID0gMzAwMDA7XG4gICAgJHthZHZpc29yeUxvY2soc2NoZW1hLCBrZXkpfTtcbiAgICAke3NxbH07XG4gICAgQ09NTUlUO1xuICBgO1xufVxuZnVuY3Rpb24gYWR2aXNvcnlMb2NrKHNjaGVtYSwga2V5KSB7XG4gICAgcmV0dXJuIGBTRUxFQ1QgcGdfYWR2aXNvcnlfeGFjdF9sb2NrKFxuICAgICAgKCd4JyB8fCBlbmNvZGUoc2hhMjI0KChjdXJyZW50X2RhdGFiYXNlKCkgfHwgJy5wZ2Jvc3MuJHtzY2hlbWF9JHtrZXkgfHwgJyd9Jyk6OmJ5dGVhKSwgJ2hleCcpKTo6Yml0KDY0KTo6YmlnaW50XG4gIClgO1xufVxuZnVuY3Rpb24gYXNzZXJ0TWlncmF0aW9uKHNjaGVtYSwgdmVyc2lvbikge1xuICAgIC8vIHJhaXNlcyAnZGl2aXNpb24gYnkgemVybycgaWYgYWxyZWFkeSBvbiBkZXNpcmVkIHNjaGVtYSB2ZXJzaW9uXG4gICAgcmV0dXJuIGBTRUxFQ1QgdmVyc2lvbjo6aW50Lyh2ZXJzaW9uOjppbnQtJHt2ZXJzaW9ufSkgZnJvbSAke3NjaGVtYX0udmVyc2lvbmA7XG59XG5mdW5jdGlvbiBmaW5kSm9icyhzY2hlbWEsIHRhYmxlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBxdWV1ZWQsIGJ5S2V5LCBieURhdGEsIGJ5SWQgfSA9IG9wdGlvbnM7XG4gICAgbGV0IHBhcmFtSW5kZXggPSAxO1xuICAgIGNvbnN0IHdoZXJlQ29uZGl0aW9ucyA9IFtdO1xuICAgIGlmIChieUlkKSB7XG4gICAgICAgICsrcGFyYW1JbmRleDtcbiAgICAgICAgd2hlcmVDb25kaXRpb25zLnB1c2goYEFORCBpZCA9ICQke3BhcmFtSW5kZXh9YCk7XG4gICAgfVxuICAgIGlmIChieUtleSkge1xuICAgICAgICArK3BhcmFtSW5kZXg7XG4gICAgICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGBBTkQgc2luZ2xldG9uX2tleSA9ICQke3BhcmFtSW5kZXh9YCk7XG4gICAgfVxuICAgIGlmIChieURhdGEpIHtcbiAgICAgICAgKytwYXJhbUluZGV4O1xuICAgICAgICB3aGVyZUNvbmRpdGlvbnMucHVzaChgQU5EIGRhdGEgQD4gJCR7cGFyYW1JbmRleH1gKTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlZCkge1xuICAgICAgICB3aGVyZUNvbmRpdGlvbnMucHVzaChgQU5EIHN0YXRlIDwgJyR7Sk9CX1NUQVRFUy5hY3RpdmV9J2ApO1xuICAgIH1cbiAgICByZXR1cm4gYFxuICAgIFNFTEVDVCAke0pPQl9DT0xVTU5TX0FMTH1cbiAgICBGUk9NICR7c2NoZW1hfS4ke3RhYmxlfVxuICAgIFdIRVJFIG5hbWUgPSAkMVxuICAgICAgJHt3aGVyZUNvbmRpdGlvbnMuam9pbignXFxuICAgICAgJyl9XG4gICAgYDtcbn1cbmZ1bmN0aW9uIGdldEpvYkJ5SWQoc2NoZW1hLCB0YWJsZSkge1xuICAgIHJldHVybiBgXG4gICAgU0VMRUNUICR7Sk9CX0NPTFVNTlNfQUxMfVxuICAgIEZST00gJHtzY2hlbWF9LiR7dGFibGV9XG4gICAgV0hFUkUgbmFtZSA9ICQxXG4gICAgICBBTkQgaWQgPSAkMlxuICAgIGA7XG59XG5mdW5jdGlvbiBnZXRCbG9ja2VkS2V5cyhzY2hlbWEsIHRhYmxlKSB7XG4gICAgcmV0dXJuIGBcbiAgICBTRUxFQ1QgRElTVElOQ1Qgc2luZ2xldG9uX2tleSBhcyBcInNpbmdsZXRvbktleVwiXG4gICAgRlJPTSAke3NjaGVtYX0uJHt0YWJsZX1cbiAgICBXSEVSRSBuYW1lID0gJDFcbiAgICAgIEFORCBzdGF0ZSA9ICcke0pPQl9TVEFURVMuZmFpbGVkfSdcbiAgICAgIEFORCBwb2xpY3kgPSAnJHtRVUVVRV9QT0xJQ0lFUy5rZXlfc3RyaWN0X2ZpZm99J1xuICAgIGA7XG59XG5mdW5jdGlvbiBnZXROZXh0QmFtQ29tbWFuZChzY2hlbWEpIHtcbiAgICByZXR1cm4gYFxuICAgIFVQREFURSAke3NjaGVtYX0uYmFtXG4gICAgU0VUIHN0YXR1cyA9ICdpbl9wcm9ncmVzcycsIHN0YXJ0ZWRfb24gPSBub3coKVxuICAgIFdIRVJFIGlkID0gKFxuICAgICAgU0VMRUNUIGlkIEZST00gJHtzY2hlbWF9LmJhbVxuICAgICAgV0hFUkUgc3RhdHVzIElOICgncGVuZGluZycsICdmYWlsZWQnKVxuICAgICAgICBBTkQgTk9UIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSAke3NjaGVtYX0uYmFtIFdIRVJFIHN0YXR1cyA9ICdpbl9wcm9ncmVzcycpXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX29uXG4gICAgICBMSU1JVCAxXG4gICAgKVxuICAgIFJFVFVSTklORyBpZCwgbmFtZSwgdmVyc2lvbiwgc3RhdHVzLCBxdWV1ZSwgdGFibGVfbmFtZSBhcyBcInRhYmxlXCIsIGNvbW1hbmQsIGVycm9yLFxuICAgICAgICAgICAgICBjcmVhdGVkX29uIGFzIFwiY3JlYXRlZE9uXCIsIHN0YXJ0ZWRfb24gYXMgXCJzdGFydGVkT25cIiwgY29tcGxldGVkX29uIGFzIFwiY29tcGxldGVkT25cIlxuICBgO1xufVxuZnVuY3Rpb24gc2V0QmFtQ29tcGxldGVkKHNjaGVtYSwgaWQpIHtcbiAgICByZXR1cm4gYFxuICAgIFVQREFURSAke3NjaGVtYX0uYmFtXG4gICAgU0VUIHN0YXR1cyA9ICdjb21wbGV0ZWQnLCBjb21wbGV0ZWRfb24gPSBub3coKVxuICAgIFdIRVJFIGlkID0gJyR7aWR9J1xuICBgO1xufVxuZnVuY3Rpb24gc2V0QmFtRmFpbGVkKHNjaGVtYSwgaWQsIGVycm9yKSB7XG4gICAgY29uc3QgZXNjYXBlZEVycm9yID0gZXJyb3IucmVwbGFjZSgvJy9nLCBcIicnXCIpO1xuICAgIHJldHVybiBgXG4gICAgVVBEQVRFICR7c2NoZW1hfS5iYW1cbiAgICBTRVQgc3RhdHVzID0gJ2ZhaWxlZCcsIGVycm9yID0gJyR7ZXNjYXBlZEVycm9yfScsIGNvbXBsZXRlZF9vbiA9IG5vdygpXG4gICAgV0hFUkUgaWQgPSAnJHtpZH0nXG4gIGA7XG59XG5mdW5jdGlvbiBnZXRCYW1TdGF0dXMoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBTRUxFQ1Qgc3RhdHVzLCBjb3VudCgqKTo6aW50IGFzIGNvdW50LCBtYXgoY3JlYXRlZF9vbikgYXMgXCJsYXN0Q3JlYXRlZE9uXCJcbiAgICBGUk9NICR7c2NoZW1hfS5iYW1cbiAgICBHUk9VUCBCWSBzdGF0dXNcbiAgYDtcbn1cbmZ1bmN0aW9uIGdldEJhbUVudHJpZXMoc2NoZW1hKSB7XG4gICAgcmV0dXJuIGBcbiAgICBTRUxFQ1QgaWQsIG5hbWUsIHZlcnNpb24sIHN0YXR1cywgcXVldWUsIHRhYmxlX25hbWUgYXMgXCJ0YWJsZVwiLCBjb21tYW5kLCBlcnJvcixcbiAgICAgICAgICAgY3JlYXRlZF9vbiBhcyBcImNyZWF0ZWRPblwiLCBzdGFydGVkX29uIGFzIFwic3RhcnRlZE9uXCIsIGNvbXBsZXRlZF9vbiBhcyBcImNvbXBsZXRlZE9uXCJcbiAgICBGUk9NICR7c2NoZW1hfS5iYW1cbiAgICBPUkRFUiBCWSB2ZXJzaW9uLCBjcmVhdGVkX29uXG4gIGA7XG59XG5leHBvcnQgeyBjcmVhdGUsIGluc2VydFZlcnNpb24sIGdldFZlcnNpb24sIHNldFZlcnNpb24sIHZlcnNpb25UYWJsZUV4aXN0cywgZmV0Y2hOZXh0Sm9iLCBjb21wbGV0ZUpvYnMsIGNhbmNlbEpvYnMsIHJlc3VtZUpvYnMsIHJlc3RvcmVKb2JzLCByZXRyeUpvYnMsIGZpbmRKb2JzLCBkZWxldGVKb2JzQnlJZCwgZGVsZXRlQWxsSm9icywgZGVsZXRlUXVldWVkSm9icywgZGVsZXRlU3RvcmVkSm9icywgdHJ1bmNhdGVUYWJsZSwgZmFpbEpvYnNCeUlkLCBmYWlsSm9ic0J5VGltZW91dCwgaW5zZXJ0Sm9icywgZ2V0VGltZSwgZ2V0U2NoZWR1bGVzLCBnZXRTY2hlZHVsZXNCeVF1ZXVlLCBzY2hlZHVsZSwgdW5zY2hlZHVsZSwgc3Vic2NyaWJlLCB1bnN1YnNjcmliZSwgZ2V0UXVldWVzRm9yRXZlbnQsIGRlbGV0aW9uLCBjYWNoZVF1ZXVlU3RhdHMsIHVwZGF0ZVF1ZXVlLCBjcmVhdGVRdWV1ZSwgZGVsZXRlUXVldWUsIGdldFF1ZXVlcywgZ2V0UXVldWVTdGF0cywgdHJ5U2V0UXVldWVNb25pdG9yVGltZSwgdHJ5U2V0UXVldWVEZWxldGlvblRpbWUsIHRyeVNldENyb25UaW1lLCB0cnlTZXRCYW1UaW1lLCBsb2NrZWQsIGFzc2VydE1pZ3JhdGlvbiwgZ2V0Sm9iQnlJZCwgaW5zZXJ0V2FybmluZywgZ2V0V2FybmluZ3MsIGdldFdhcm5pbmdzQ291bnQsIGRlbGV0ZU9sZFdhcm5pbmdzLCBjcmVhdGVUYWJsZVdhcm5pbmcsIGNyZWF0ZUluZGV4V2FybmluZywgZ2V0QmxvY2tlZEtleXMsIGdldE5leHRCYW1Db21tYW5kLCBzZXRCYW1Db21wbGV0ZWQsIHNldEJhbUZhaWxlZCwgZ2V0QmFtU3RhdHVzLCBnZXRCYW1FbnRyaWVzLCBzZXJpYWxpemVBcnJheVBhcmFtLCBRVUVVRV9QT0xJQ0lFUywgSk9CX1NUQVRFUywgTUlHUkFURV9SQUNFX01FU1NBR0UsIENSRUFURV9SQUNFX01FU1NBR0UsIERFRkFVTFRfU0NIRU1BLCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/spy.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/spy.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JobSpy: () => (/* binding */ JobSpy)\n/* harmony export */ });\nclass JobSpy {\n    #jobResults = new Map();\n    #pendingPromises = [];\n    clear() {\n        this.#jobResults.clear();\n        this.#pendingPromises = [];\n    }\n    waitForJobWithId(id, awaitedState) {\n        return this.waitForJob(() => true, awaitedState, id);\n    }\n    waitForJob(dataSelector, awaitedState, specificId) {\n        const selector = (job) => {\n            if (specificId && job.id !== specificId) {\n                return false;\n            }\n            return dataSelector(job.data);\n        };\n        // Check if we already have a matching job\n        for (const job of this.#jobResults.values()) {\n            if (job.state === awaitedState && selector(job)) {\n                return Promise.resolve(this.#cloneJob(job));\n            }\n        }\n        // Register promise to be resolved when job arrives\n        return this.#registerPromise(selector, awaitedState);\n    }\n    #registerPromise(selector, awaitedState) {\n        let resolve;\n        const promise = new Promise((_resolve) => {\n            resolve = _resolve;\n        });\n        this.#pendingPromises.push({ selector, awaitedState, resolve });\n        return promise;\n    }\n    #getJobResultKey(id, state) {\n        return `${id}:${state}`;\n    }\n    #cloneJob(job) {\n        return {\n            id: job.id,\n            name: job.name,\n            data: structuredClone(job.data),\n            state: job.state,\n            output: job.output ? structuredClone(job.output) : undefined\n        };\n    }\n    addJob(id, name, data, state, output) {\n        const job = {\n            id,\n            name,\n            data: structuredClone(data),\n            state,\n            output: output ? structuredClone(output) : undefined\n        };\n        const key = this.#getJobResultKey(id, state);\n        this.#jobResults.set(key, job);\n        // Resolve any pending promises that match this job\n        const matchingPromises = [];\n        const remainingPromises = [];\n        for (const pending of this.#pendingPromises) {\n            if (pending.awaitedState === state && pending.selector(job)) {\n                matchingPromises.push(pending);\n            }\n            else {\n                remainingPromises.push(pending);\n            }\n        }\n        this.#pendingPromises = remainingPromises;\n        for (const pending of matchingPromises) {\n            pending.resolve(this.#cloneJob(job));\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3Qvc3B5LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QscUNBQXFDLGlDQUFpQztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsR0FBRyxHQUFHLE1BQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWVwLWFyY2hpdGVjdHVyZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9wZy1ib3NzQDEyLjExLjEvbm9kZV9tb2R1bGVzL3BnLWJvc3MvZGlzdC9zcHkuanM/NzQ0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgSm9iU3B5IHtcbiAgICAjam9iUmVzdWx0cyA9IG5ldyBNYXAoKTtcbiAgICAjcGVuZGluZ1Byb21pc2VzID0gW107XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuI2pvYlJlc3VsdHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy4jcGVuZGluZ1Byb21pc2VzID0gW107XG4gICAgfVxuICAgIHdhaXRGb3JKb2JXaXRoSWQoaWQsIGF3YWl0ZWRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy53YWl0Rm9ySm9iKCgpID0+IHRydWUsIGF3YWl0ZWRTdGF0ZSwgaWQpO1xuICAgIH1cbiAgICB3YWl0Rm9ySm9iKGRhdGFTZWxlY3RvciwgYXdhaXRlZFN0YXRlLCBzcGVjaWZpY0lkKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gKGpvYikgPT4ge1xuICAgICAgICAgICAgaWYgKHNwZWNpZmljSWQgJiYgam9iLmlkICE9PSBzcGVjaWZpY0lkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGFTZWxlY3Rvcihqb2IuZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGFscmVhZHkgaGF2ZSBhIG1hdGNoaW5nIGpvYlxuICAgICAgICBmb3IgKGNvbnN0IGpvYiBvZiB0aGlzLiNqb2JSZXN1bHRzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBpZiAoam9iLnN0YXRlID09PSBhd2FpdGVkU3RhdGUgJiYgc2VsZWN0b3Ioam9iKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy4jY2xvbmVKb2Ioam9iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVnaXN0ZXIgcHJvbWlzZSB0byBiZSByZXNvbHZlZCB3aGVuIGpvYiBhcnJpdmVzXG4gICAgICAgIHJldHVybiB0aGlzLiNyZWdpc3RlclByb21pc2Uoc2VsZWN0b3IsIGF3YWl0ZWRTdGF0ZSk7XG4gICAgfVxuICAgICNyZWdpc3RlclByb21pc2Uoc2VsZWN0b3IsIGF3YWl0ZWRTdGF0ZSkge1xuICAgICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSA9IF9yZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jcGVuZGluZ1Byb21pc2VzLnB1c2goeyBzZWxlY3RvciwgYXdhaXRlZFN0YXRlLCByZXNvbHZlIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgI2dldEpvYlJlc3VsdEtleShpZCwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIGAke2lkfToke3N0YXRlfWA7XG4gICAgfVxuICAgICNjbG9uZUpvYihqb2IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBqb2IuaWQsXG4gICAgICAgICAgICBuYW1lOiBqb2IubmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHN0cnVjdHVyZWRDbG9uZShqb2IuZGF0YSksXG4gICAgICAgICAgICBzdGF0ZTogam9iLnN0YXRlLFxuICAgICAgICAgICAgb3V0cHV0OiBqb2Iub3V0cHV0ID8gc3RydWN0dXJlZENsb25lKGpvYi5vdXRwdXQpIDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFkZEpvYihpZCwgbmFtZSwgZGF0YSwgc3RhdGUsIG91dHB1dCkge1xuICAgICAgICBjb25zdCBqb2IgPSB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkYXRhOiBzdHJ1Y3R1cmVkQ2xvbmUoZGF0YSksXG4gICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIG91dHB1dDogb3V0cHV0ID8gc3RydWN0dXJlZENsb25lKG91dHB1dCkgOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy4jZ2V0Sm9iUmVzdWx0S2V5KGlkLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuI2pvYlJlc3VsdHMuc2V0KGtleSwgam9iKTtcbiAgICAgICAgLy8gUmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlcyB0aGF0IG1hdGNoIHRoaXMgam9iXG4gICAgICAgIGNvbnN0IG1hdGNoaW5nUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwZW5kaW5nIG9mIHRoaXMuI3BlbmRpbmdQcm9taXNlcykge1xuICAgICAgICAgICAgaWYgKHBlbmRpbmcuYXdhaXRlZFN0YXRlID09PSBzdGF0ZSAmJiBwZW5kaW5nLnNlbGVjdG9yKGpvYikpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ1Byb21pc2VzLnB1c2gocGVuZGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZW1haW5pbmdQcm9taXNlcy5wdXNoKHBlbmRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3BlbmRpbmdQcm9taXNlcyA9IHJlbWFpbmluZ1Byb21pc2VzO1xuICAgICAgICBmb3IgKGNvbnN0IHBlbmRpbmcgb2YgbWF0Y2hpbmdQcm9taXNlcykge1xuICAgICAgICAgICAgcGVuZGluZy5yZXNvbHZlKHRoaXMuI2Nsb25lSm9iKGpvYikpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/spy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/timekeeper.js":
/*!************************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/timekeeper.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QUEUES: () => (/* binding */ QUEUES),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var cron_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cron-parser */ \"(rsc)/./node_modules/.pnpm/cron-parser@5.5.0/node_modules/cron-parser/dist/index.js\");\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var _attorney_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./attorney.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/attorney.js\");\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js\");\n/* harmony import */ var _warning_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./warning.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/warning.js\");\n\n\n\n\n\n\nconst QUEUES = {\n    SEND_IT: '__pgboss__send-it'\n};\nconst EVENTS = {\n    error: 'error',\n    schedule: 'schedule',\n    warning: 'warning'\n};\nconst WARNINGS = {\n    CLOCK_SKEW: {\n        message: 'Warning: Clock skew between this instance and the database server. This will not break scheduling, but is emitted any time the skew exceeds 60 seconds.'\n    }\n};\nconst WARNING_TYPES = {\n    CLOCK_SKEW: 'clock_skew'\n};\nclass Timekeeper extends node_events__WEBPACK_IMPORTED_MODULE_1__ {\n    db;\n    config;\n    manager;\n    stopped = true;\n    cronMonitorInterval;\n    skewMonitorInterval;\n    timekeeping;\n    clockSkew = 0;\n    events = EVENTS;\n    constructor(db, manager, config) {\n        super();\n        this.db = db;\n        this.config = config;\n        this.manager = manager;\n    }\n    get warningContext() {\n        return {\n            emitter: this,\n            db: this.db,\n            schema: this.config.schema,\n            persistWarnings: this.config.persistWarnings,\n            warningEvent: this.events.warning,\n            errorEvent: this.events.error\n        };\n    }\n    async start() {\n        this.stopped = false;\n        await this.cacheClockSkew();\n        await this.manager.createQueue(QUEUES.SEND_IT);\n        const options = {\n            pollingIntervalSeconds: this.config.cronWorkerIntervalSeconds,\n            batchSize: 50\n        };\n        await this.manager.work(QUEUES.SEND_IT, options, (jobs) => this.onSendIt(jobs));\n        setImmediate(() => this.onCron());\n        this.cronMonitorInterval = setInterval(async () => await this.onCron(), this.config.cronMonitorIntervalSeconds * 1000);\n        this.skewMonitorInterval = setInterval(async () => await this.cacheClockSkew(), this.config.clockMonitorIntervalSeconds * 1000);\n    }\n    async stop() {\n        if (this.stopped) {\n            return;\n        }\n        this.stopped = true;\n        await this.manager.offWork(QUEUES.SEND_IT, { wait: true });\n        if (this.skewMonitorInterval) {\n            clearInterval(this.skewMonitorInterval);\n            this.skewMonitorInterval = null;\n        }\n        if (this.cronMonitorInterval) {\n            clearInterval(this.cronMonitorInterval);\n            this.cronMonitorInterval = null;\n        }\n    }\n    async cacheClockSkew() {\n        let skew = 0;\n        try {\n            if (this.config.__test__force_clock_monitoring_error) {\n                throw new Error(this.config.__test__force_clock_monitoring_error);\n            }\n            const { rows } = await this.db.executeSql(_plans_js__WEBPACK_IMPORTED_MODULE_3__.getTime());\n            const local = Date.now();\n            const dbTime = parseFloat(rows[0].time);\n            skew = dbTime - local;\n            const skewSeconds = Math.abs(skew) / 1000;\n            if (skewSeconds >= 60 || this.config.__test__force_clock_skew_warning) {\n                await (0,_warning_js__WEBPACK_IMPORTED_MODULE_5__.emitAndPersistWarning)(this.warningContext, WARNING_TYPES.CLOCK_SKEW, WARNINGS.CLOCK_SKEW.message, { seconds: skewSeconds, direction: skew > 0 ? 'slower' : 'faster' });\n            }\n        }\n        catch (err) {\n            this.emit(this.events.error, err);\n        }\n        finally {\n            this.clockSkew = skew;\n        }\n    }\n    async onCron() {\n        try {\n            if (this.stopped || this.timekeeping)\n                return;\n            if (this.config.__test__force_cron_monitoring_error) {\n                throw new Error(this.config.__test__force_cron_monitoring_error);\n            }\n            this.timekeeping = true;\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_3__.trySetCronTime(this.config.schema, this.config.cronMonitorIntervalSeconds);\n            if (!this.stopped) {\n                const { rows } = await this.db.executeSql(sql);\n                if (!this.stopped && rows.length === 1) {\n                    await this.cron();\n                }\n            }\n        }\n        catch (err) {\n            this.emit(this.events.error, err);\n        }\n        finally {\n            this.timekeeping = false;\n        }\n    }\n    async cron() {\n        const schedules = await this.getSchedules();\n        const scheduled = schedules\n            .filter(i => this.shouldSendIt(i.cron, i.timezone))\n            .map(({ name, key, data, options }) => ({ data: { name, data, options }, singletonKey: `${name}__${key}`, singletonSeconds: 60 }));\n        if (scheduled.length > 0 && !this.stopped) {\n            await this.manager.insert(QUEUES.SEND_IT, scheduled);\n        }\n    }\n    shouldSendIt(cron, tz) {\n        const interval = cron_parser__WEBPACK_IMPORTED_MODULE_0__.CronExpressionParser.parse(cron, { tz, strict: false });\n        const prevTime = interval.prev();\n        const databaseTime = Date.now() + this.clockSkew;\n        const prevDiff = (databaseTime - prevTime.getTime()) / 1000;\n        return prevDiff < 60;\n    }\n    async onSendIt(jobs) {\n        await Promise.allSettled(jobs.map(({ data }) => this.manager.send(data)));\n    }\n    async getSchedules(name, key = '') {\n        let sql = _plans_js__WEBPACK_IMPORTED_MODULE_3__.getSchedules(this.config.schema);\n        let params = [];\n        if (name) {\n            sql = _plans_js__WEBPACK_IMPORTED_MODULE_3__.getSchedulesByQueue(this.config.schema);\n            params = [name, key];\n        }\n        const { rows } = await this.db.executeSql(sql, params);\n        return rows;\n    }\n    async schedule(name, cron, data, options = {}) {\n        const { tz = 'UTC', key = '', ...rest } = options;\n        cron_parser__WEBPACK_IMPORTED_MODULE_0__.CronExpressionParser.parse(cron, { tz, strict: false });\n        _attorney_js__WEBPACK_IMPORTED_MODULE_2__.checkSendArgs([name, data, { ...rest }]);\n        _attorney_js__WEBPACK_IMPORTED_MODULE_2__.assertKey(key);\n        try {\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_3__.schedule(this.config.schema);\n            await this.db.executeSql(sql, [name, key, cron, tz, data, options]);\n        }\n        catch (err) {\n            if (err.message.includes('foreign key')) {\n                err.message = `Queue ${name} not found`;\n            }\n            throw err;\n        }\n    }\n    async unschedule(name, key = '') {\n        const sql = _plans_js__WEBPACK_IMPORTED_MODULE_3__.unschedule(this.config.schema);\n        await this.db.executeSql(sql, [name, key]);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Timekeeper);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvdGltZWtlZXBlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFtRDtBQUNaO0FBQ0c7QUFDTjtBQUNBO0FBQ2lCO0FBQzlDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdDQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELFlBQVk7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU8sMkJBQTJCLDhDQUFhO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isa0VBQXFCLCtFQUErRSxpRUFBaUU7QUFDM0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxREFBb0I7QUFDNUM7QUFDQSx3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQkFBMEIsUUFBUSxRQUFRLHFCQUFxQixtQkFBbUIsS0FBSyxJQUFJLElBQUkseUJBQXlCO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQW9CLGVBQWUsbUJBQW1CO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxNQUFNO0FBQ25EO0FBQ0E7QUFDQSxrQkFBa0IsbURBQWtCO0FBQ3BDO0FBQ0E7QUFDQSxrQkFBa0IsMERBQXlCO0FBQzNDO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pELGdCQUFnQixnQ0FBZ0M7QUFDaEQsUUFBUSw2REFBb0IsZUFBZSxtQkFBbUI7QUFDOUQsUUFBUSx1REFBc0IsZ0JBQWdCLFNBQVM7QUFDdkQsUUFBUSxtREFBa0I7QUFDMUI7QUFDQSx3QkFBd0IsK0NBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsTUFBTTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlEQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxpRUFBZSxVQUFVLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWVwLWFyY2hpdGVjdHVyZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9wZy1ib3NzQDEyLjExLjEvbm9kZV9tb2R1bGVzL3BnLWJvc3MvZGlzdC90aW1la2VlcGVyLmpzPzU0NmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ3JvbkV4cHJlc3Npb25QYXJzZXIgfSBmcm9tICdjcm9uLXBhcnNlcic7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ25vZGU6ZXZlbnRzJztcbmltcG9ydCAqIGFzIEF0dG9ybmV5IGZyb20gXCIuL2F0dG9ybmV5LmpzXCI7XG5pbXBvcnQgKiBhcyBwbGFucyBmcm9tIFwiLi9wbGFucy5qc1wiO1xuaW1wb3J0ICogYXMgdHlwZXMgZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IGVtaXRBbmRQZXJzaXN0V2FybmluZyB9IGZyb20gXCIuL3dhcm5pbmcuanNcIjtcbmV4cG9ydCBjb25zdCBRVUVVRVMgPSB7XG4gICAgU0VORF9JVDogJ19fcGdib3NzX19zZW5kLWl0J1xufTtcbmNvbnN0IEVWRU5UUyA9IHtcbiAgICBlcnJvcjogJ2Vycm9yJyxcbiAgICBzY2hlZHVsZTogJ3NjaGVkdWxlJyxcbiAgICB3YXJuaW5nOiAnd2FybmluZydcbn07XG5jb25zdCBXQVJOSU5HUyA9IHtcbiAgICBDTE9DS19TS0VXOiB7XG4gICAgICAgIG1lc3NhZ2U6ICdXYXJuaW5nOiBDbG9jayBza2V3IGJldHdlZW4gdGhpcyBpbnN0YW5jZSBhbmQgdGhlIGRhdGFiYXNlIHNlcnZlci4gVGhpcyB3aWxsIG5vdCBicmVhayBzY2hlZHVsaW5nLCBidXQgaXMgZW1pdHRlZCBhbnkgdGltZSB0aGUgc2tldyBleGNlZWRzIDYwIHNlY29uZHMuJ1xuICAgIH1cbn07XG5jb25zdCBXQVJOSU5HX1RZUEVTID0ge1xuICAgIENMT0NLX1NLRVc6ICdjbG9ja19za2V3J1xufTtcbmNsYXNzIFRpbWVrZWVwZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIGRiO1xuICAgIGNvbmZpZztcbiAgICBtYW5hZ2VyO1xuICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgIGNyb25Nb25pdG9ySW50ZXJ2YWw7XG4gICAgc2tld01vbml0b3JJbnRlcnZhbDtcbiAgICB0aW1la2VlcGluZztcbiAgICBjbG9ja1NrZXcgPSAwO1xuICAgIGV2ZW50cyA9IEVWRU5UUztcbiAgICBjb25zdHJ1Y3RvcihkYiwgbWFuYWdlciwgY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgfVxuICAgIGdldCB3YXJuaW5nQ29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVtaXR0ZXI6IHRoaXMsXG4gICAgICAgICAgICBkYjogdGhpcy5kYixcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcy5jb25maWcuc2NoZW1hLFxuICAgICAgICAgICAgcGVyc2lzdFdhcm5pbmdzOiB0aGlzLmNvbmZpZy5wZXJzaXN0V2FybmluZ3MsXG4gICAgICAgICAgICB3YXJuaW5nRXZlbnQ6IHRoaXMuZXZlbnRzLndhcm5pbmcsXG4gICAgICAgICAgICBlcnJvckV2ZW50OiB0aGlzLmV2ZW50cy5lcnJvclxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIGF3YWl0IHRoaXMuY2FjaGVDbG9ja1NrZXcoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5tYW5hZ2VyLmNyZWF0ZVF1ZXVlKFFVRVVFUy5TRU5EX0lUKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHBvbGxpbmdJbnRlcnZhbFNlY29uZHM6IHRoaXMuY29uZmlnLmNyb25Xb3JrZXJJbnRlcnZhbFNlY29uZHMsXG4gICAgICAgICAgICBiYXRjaFNpemU6IDUwXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMubWFuYWdlci53b3JrKFFVRVVFUy5TRU5EX0lULCBvcHRpb25zLCAoam9icykgPT4gdGhpcy5vblNlbmRJdChqb2JzKSk7XG4gICAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiB0aGlzLm9uQ3JvbigpKTtcbiAgICAgICAgdGhpcy5jcm9uTW9uaXRvckludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5vbkNyb24oKSwgdGhpcy5jb25maWcuY3Jvbk1vbml0b3JJbnRlcnZhbFNlY29uZHMgKiAxMDAwKTtcbiAgICAgICAgdGhpcy5za2V3TW9uaXRvckludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5jYWNoZUNsb2NrU2tldygpLCB0aGlzLmNvbmZpZy5jbG9ja01vbml0b3JJbnRlcnZhbFNlY29uZHMgKiAxMDAwKTtcbiAgICB9XG4gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGF3YWl0IHRoaXMubWFuYWdlci5vZmZXb3JrKFFVRVVFUy5TRU5EX0lULCB7IHdhaXQ6IHRydWUgfSk7XG4gICAgICAgIGlmICh0aGlzLnNrZXdNb25pdG9ySW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5za2V3TW9uaXRvckludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMuc2tld01vbml0b3JJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3Jvbk1vbml0b3JJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNyb25Nb25pdG9ySW50ZXJ2YWwpO1xuICAgICAgICAgICAgdGhpcy5jcm9uTW9uaXRvckludGVydmFsID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjYWNoZUNsb2NrU2tldygpIHtcbiAgICAgICAgbGV0IHNrZXcgPSAwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLl9fdGVzdF9fZm9yY2VfY2xvY2tfbW9uaXRvcmluZ19lcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmNvbmZpZy5fX3Rlc3RfX2ZvcmNlX2Nsb2NrX21vbml0b3JpbmdfZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCB0aGlzLmRiLmV4ZWN1dGVTcWwocGxhbnMuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGRiVGltZSA9IHBhcnNlRmxvYXQocm93c1swXS50aW1lKTtcbiAgICAgICAgICAgIHNrZXcgPSBkYlRpbWUgLSBsb2NhbDtcbiAgICAgICAgICAgIGNvbnN0IHNrZXdTZWNvbmRzID0gTWF0aC5hYnMoc2tldykgLyAxMDAwO1xuICAgICAgICAgICAgaWYgKHNrZXdTZWNvbmRzID49IDYwIHx8IHRoaXMuY29uZmlnLl9fdGVzdF9fZm9yY2VfY2xvY2tfc2tld193YXJuaW5nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZW1pdEFuZFBlcnNpc3RXYXJuaW5nKHRoaXMud2FybmluZ0NvbnRleHQsIFdBUk5JTkdfVFlQRVMuQ0xPQ0tfU0tFVywgV0FSTklOR1MuQ0xPQ0tfU0tFVy5tZXNzYWdlLCB7IHNlY29uZHM6IHNrZXdTZWNvbmRzLCBkaXJlY3Rpb246IHNrZXcgPiAwID8gJ3Nsb3dlcicgOiAnZmFzdGVyJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMuZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmNsb2NrU2tldyA9IHNrZXc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25Dcm9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCB8fCB0aGlzLnRpbWVrZWVwaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5fX3Rlc3RfX2ZvcmNlX2Nyb25fbW9uaXRvcmluZ19lcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmNvbmZpZy5fX3Rlc3RfX2ZvcmNlX2Nyb25fbW9uaXRvcmluZ19lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRpbWVrZWVwaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHNxbCA9IHBsYW5zLnRyeVNldENyb25UaW1lKHRoaXMuY29uZmlnLnNjaGVtYSwgdGhpcy5jb25maWcuY3Jvbk1vbml0b3JJbnRlcnZhbFNlY29uZHMpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdG9wcGVkICYmIHJvd3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMuZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVrZWVwaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY3JvbigpIHtcbiAgICAgICAgY29uc3Qgc2NoZWR1bGVzID0gYXdhaXQgdGhpcy5nZXRTY2hlZHVsZXMoKTtcbiAgICAgICAgY29uc3Qgc2NoZWR1bGVkID0gc2NoZWR1bGVzXG4gICAgICAgICAgICAuZmlsdGVyKGkgPT4gdGhpcy5zaG91bGRTZW5kSXQoaS5jcm9uLCBpLnRpbWV6b25lKSlcbiAgICAgICAgICAgIC5tYXAoKHsgbmFtZSwga2V5LCBkYXRhLCBvcHRpb25zIH0pID0+ICh7IGRhdGE6IHsgbmFtZSwgZGF0YSwgb3B0aW9ucyB9LCBzaW5nbGV0b25LZXk6IGAke25hbWV9X18ke2tleX1gLCBzaW5nbGV0b25TZWNvbmRzOiA2MCB9KSk7XG4gICAgICAgIGlmIChzY2hlZHVsZWQubGVuZ3RoID4gMCAmJiAhdGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1hbmFnZXIuaW5zZXJ0KFFVRVVFUy5TRU5EX0lULCBzY2hlZHVsZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNob3VsZFNlbmRJdChjcm9uLCB0eikge1xuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IENyb25FeHByZXNzaW9uUGFyc2VyLnBhcnNlKGNyb24sIHsgdHosIHN0cmljdDogZmFsc2UgfSk7XG4gICAgICAgIGNvbnN0IHByZXZUaW1lID0gaW50ZXJ2YWwucHJldigpO1xuICAgICAgICBjb25zdCBkYXRhYmFzZVRpbWUgPSBEYXRlLm5vdygpICsgdGhpcy5jbG9ja1NrZXc7XG4gICAgICAgIGNvbnN0IHByZXZEaWZmID0gKGRhdGFiYXNlVGltZSAtIHByZXZUaW1lLmdldFRpbWUoKSkgLyAxMDAwO1xuICAgICAgICByZXR1cm4gcHJldkRpZmYgPCA2MDtcbiAgICB9XG4gICAgYXN5bmMgb25TZW5kSXQoam9icykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoam9icy5tYXAoKHsgZGF0YSB9KSA9PiB0aGlzLm1hbmFnZXIuc2VuZChkYXRhKSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRTY2hlZHVsZXMobmFtZSwga2V5ID0gJycpIHtcbiAgICAgICAgbGV0IHNxbCA9IHBsYW5zLmdldFNjaGVkdWxlcyh0aGlzLmNvbmZpZy5zY2hlbWEpO1xuICAgICAgICBsZXQgcGFyYW1zID0gW107XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICBzcWwgPSBwbGFucy5nZXRTY2hlZHVsZXNCeVF1ZXVlKHRoaXMuY29uZmlnLnNjaGVtYSk7XG4gICAgICAgICAgICBwYXJhbXMgPSBbbmFtZSwga2V5XTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByb3dzO1xuICAgIH1cbiAgICBhc3luYyBzY2hlZHVsZShuYW1lLCBjcm9uLCBkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgeyB0eiA9ICdVVEMnLCBrZXkgPSAnJywgLi4ucmVzdCB9ID0gb3B0aW9ucztcbiAgICAgICAgQ3JvbkV4cHJlc3Npb25QYXJzZXIucGFyc2UoY3JvbiwgeyB0eiwgc3RyaWN0OiBmYWxzZSB9KTtcbiAgICAgICAgQXR0b3JuZXkuY2hlY2tTZW5kQXJncyhbbmFtZSwgZGF0YSwgeyAuLi5yZXN0IH1dKTtcbiAgICAgICAgQXR0b3JuZXkuYXNzZXJ0S2V5KGtleSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5zY2hlZHVsZSh0aGlzLmNvbmZpZy5zY2hlbWEpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYi5leGVjdXRlU3FsKHNxbCwgW25hbWUsIGtleSwgY3JvbiwgdHosIGRhdGEsIG9wdGlvbnNdKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZvcmVpZ24ga2V5JykpIHtcbiAgICAgICAgICAgICAgICBlcnIubWVzc2FnZSA9IGBRdWV1ZSAke25hbWV9IG5vdCBmb3VuZGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgdW5zY2hlZHVsZShuYW1lLCBrZXkgPSAnJykge1xuICAgICAgICBjb25zdCBzcWwgPSBwbGFucy51bnNjaGVkdWxlKHRoaXMuY29uZmlnLnNjaGVtYSk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGIuZXhlY3V0ZVNxbChzcWwsIFtuYW1lLCBrZXldKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBUaW1la2VlcGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/timekeeper.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   delay: () => (/* binding */ delay),\n/* harmony export */   resolveWithinSeconds: () => (/* binding */ resolveWithinSeconds),\n/* harmony export */   unwrapSQLResult: () => (/* binding */ unwrapSQLResult)\n/* harmony export */ });\n/* harmony import */ var node_timers_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:timers/promises */ \"node:timers/promises\");\n\n/**\n * When sql contains multiple queries, result is an array of objects with rows property\n * This function unwraps the result into a single object with rows property\n*/\nfunction unwrapSQLResult(result) {\n    if (Array.isArray(result)) {\n        return { rows: result.flatMap(i => i.rows) };\n    }\n    return result;\n}\nfunction delay(ms, error, abortController) {\n    const ac = abortController || new AbortController();\n    const promise = new Promise((resolve, reject) => {\n        (0,node_timers_promises__WEBPACK_IMPORTED_MODULE_0__.setTimeout)(ms, null, { signal: ac.signal })\n            .then(() => {\n            if (error) {\n                reject(new Error(error));\n            }\n            else {\n                resolve();\n            }\n        })\n            .catch(resolve);\n    });\n    promise.abort = () => {\n        if (!ac.signal.aborted) {\n            ac.abort();\n        }\n    };\n    return promise;\n}\nasync function resolveWithinSeconds(promise, seconds, message, abortController) {\n    const timeout = Math.max(1, seconds) * 1000;\n    const reject = delay(timeout, message, abortController);\n    let result;\n    try {\n        result = await Promise.race([promise, reject]);\n    }\n    finally {\n        reject.abort();\n    }\n    return result;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvdG9vbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBVSxhQUFhLG1CQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3RCIsInNvdXJjZXMiOlsid2VicGFjazovL2RlZXAtYXJjaGl0ZWN0dXJlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BnLWJvc3NAMTIuMTEuMS9ub2RlX21vZHVsZXMvcGctYm9zcy9kaXN0L3Rvb2xzLmpzPzVmMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0VGltZW91dCB9IGZyb20gJ25vZGU6dGltZXJzL3Byb21pc2VzJztcbi8qKlxuICogV2hlbiBzcWwgY29udGFpbnMgbXVsdGlwbGUgcXVlcmllcywgcmVzdWx0IGlzIGFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCByb3dzIHByb3BlcnR5XG4gKiBUaGlzIGZ1bmN0aW9uIHVud3JhcHMgdGhlIHJlc3VsdCBpbnRvIGEgc2luZ2xlIG9iamVjdCB3aXRoIHJvd3MgcHJvcGVydHlcbiovXG5mdW5jdGlvbiB1bndyYXBTUUxSZXN1bHQocmVzdWx0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyByb3dzOiByZXN1bHQuZmxhdE1hcChpID0+IGkucm93cykgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGRlbGF5KG1zLCBlcnJvciwgYWJvcnRDb250cm9sbGVyKSB7XG4gICAgY29uc3QgYWMgPSBhYm9ydENvbnRyb2xsZXIgfHwgbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQobXMsIG51bGwsIHsgc2lnbmFsOiBhYy5zaWduYWwgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChyZXNvbHZlKTtcbiAgICB9KTtcbiAgICBwcm9taXNlLmFib3J0ID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWFjLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICBhYy5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmVXaXRoaW5TZWNvbmRzKHByb21pc2UsIHNlY29uZHMsIG1lc3NhZ2UsIGFib3J0Q29udHJvbGxlcikge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBNYXRoLm1heCgxLCBzZWNvbmRzKSAqIDEwMDA7XG4gICAgY29uc3QgcmVqZWN0ID0gZGVsYXkodGltZW91dCwgbWVzc2FnZSwgYWJvcnRDb250cm9sbGVyKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmFjZShbcHJvbWlzZSwgcmVqZWN0XSk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICByZWplY3QuYWJvcnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCB7IGRlbGF5LCByZXNvbHZlV2l0aGluU2Vjb25kcywgdW53cmFwU1FMUmVzdWx0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvdHlwZXMuanMiLCJtYXBwaW5ncyI6IjtBQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVlcC1hcmNoaXRlY3R1cmUvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3QvdHlwZXMuanM/ZTc4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/warning.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/warning.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emitAndPersistWarning: () => (/* binding */ emitAndPersistWarning)\n/* harmony export */ });\n/* harmony import */ var _plans_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plans.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/plans.js\");\n\n/**\n * Emits a warning event and optionally persists it to the database.\n * This is a shared utility to avoid duplicating warning persistence logic\n * across boss.ts and timekeeper.ts.\n */\nasync function emitAndPersistWarning(ctx, type, message, data) {\n    ctx.emitter.emit(ctx.warningEvent, { message, data });\n    if (ctx.persistWarnings) {\n        try {\n            const sql = _plans_js__WEBPACK_IMPORTED_MODULE_0__.insertWarning(ctx.schema);\n            await ctx.db.executeSql(sql, [type, message, JSON.stringify(data)]);\n        }\n        catch (err) {\n            ctx.emitter.emit(ctx.errorEvent, err);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3Qvd2FybmluZy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx5Q0FBeUMsZUFBZTtBQUN4RDtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RlZXAtYXJjaGl0ZWN0dXJlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BnLWJvc3NAMTIuMTEuMS9ub2RlX21vZHVsZXMvcGctYm9zcy9kaXN0L3dhcm5pbmcuanM/ZjU4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwbGFucyBmcm9tIFwiLi9wbGFucy5qc1wiO1xuLyoqXG4gKiBFbWl0cyBhIHdhcm5pbmcgZXZlbnQgYW5kIG9wdGlvbmFsbHkgcGVyc2lzdHMgaXQgdG8gdGhlIGRhdGFiYXNlLlxuICogVGhpcyBpcyBhIHNoYXJlZCB1dGlsaXR5IHRvIGF2b2lkIGR1cGxpY2F0aW5nIHdhcm5pbmcgcGVyc2lzdGVuY2UgbG9naWNcbiAqIGFjcm9zcyBib3NzLnRzIGFuZCB0aW1la2VlcGVyLnRzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW1pdEFuZFBlcnNpc3RXYXJuaW5nKGN0eCwgdHlwZSwgbWVzc2FnZSwgZGF0YSkge1xuICAgIGN0eC5lbWl0dGVyLmVtaXQoY3R4Lndhcm5pbmdFdmVudCwgeyBtZXNzYWdlLCBkYXRhIH0pO1xuICAgIGlmIChjdHgucGVyc2lzdFdhcm5pbmdzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzcWwgPSBwbGFucy5pbnNlcnRXYXJuaW5nKGN0eC5zY2hlbWEpO1xuICAgICAgICAgICAgYXdhaXQgY3R4LmRiLmV4ZWN1dGVTcWwoc3FsLCBbdHlwZSwgbWVzc2FnZSwgSlNPTi5zdHJpbmdpZnkoZGF0YSldKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjdHguZW1pdHRlci5lbWl0KGN0eC5lcnJvckV2ZW50LCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/warning.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/worker.js":
/*!********************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/worker.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tools.js */ \"(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/tools.js\");\n\nconst WORKER_STATES = {\n    created: 'created',\n    active: 'active',\n    stopping: 'stopping',\n    stopped: 'stopped'\n};\nclass Worker {\n    id;\n    name;\n    options;\n    fetch;\n    onFetch;\n    onError;\n    interval;\n    jobs = [];\n    createdOn = Date.now();\n    state = WORKER_STATES.created;\n    lastFetchedOn = null;\n    lastJobStartedOn = null;\n    lastJobEndedOn = null;\n    lastJobDuration = null;\n    lastError = null;\n    lastErrorOn = null;\n    stopping = false;\n    stopped = false;\n    abortController = null;\n    loopDelayPromise = null;\n    beenNotified = false;\n    runPromise = null;\n    constructor({ id, name, options, interval, fetch, onFetch, onError }) {\n        this.id = id;\n        this.name = name;\n        this.options = options;\n        this.fetch = fetch;\n        this.onFetch = onFetch;\n        this.onError = onError;\n        this.interval = interval;\n    }\n    start() {\n        this.runPromise = this.run();\n    }\n    async run() {\n        this.state = WORKER_STATES.active;\n        while (!this.stopping) {\n            const started = Date.now();\n            try {\n                this.beenNotified = false;\n                const jobs = await this.fetch();\n                this.lastFetchedOn = Date.now();\n                if (jobs) {\n                    this.jobs = jobs;\n                    this.lastJobStartedOn = this.lastFetchedOn;\n                    await this.onFetch(jobs);\n                    this.lastJobEndedOn = Date.now();\n                    this.jobs = [];\n                }\n            }\n            catch (err) {\n                this.lastErrorOn = Date.now();\n                this.lastError = err;\n                err.message = `${err.message} (Queue: ${this.name}, Worker: ${this.id})`;\n                this.onError(err);\n            }\n            const duration = Date.now() - started;\n            this.lastJobDuration = duration;\n            if (!this.stopping && !this.beenNotified && (this.interval - duration) > 100) {\n                this.loopDelayPromise = (0,_tools_js__WEBPACK_IMPORTED_MODULE_0__.delay)(this.interval - duration);\n                await this.loopDelayPromise;\n                this.loopDelayPromise = null;\n            }\n        }\n        this.stopping = false;\n        this.stopped = true;\n        this.state = WORKER_STATES.stopped;\n    }\n    notify() {\n        this.beenNotified = true;\n        if (this.loopDelayPromise) {\n            this.loopDelayPromise.abort();\n        }\n    }\n    async stop() {\n        this.stopping = true;\n        this.state = WORKER_STATES.stopping;\n        if (this.loopDelayPromise) {\n            this.loopDelayPromise.abort();\n        }\n        await this.runPromise;\n    }\n    abort() {\n        if (this.abortController && !this.abortController.signal.aborted) {\n            this.abortController.abort();\n        }\n    }\n    toWipData() {\n        return {\n            id: this.id,\n            name: this.name,\n            options: this.options,\n            state: this.state,\n            count: this.jobs.length,\n            createdOn: this.createdOn,\n            lastFetchedOn: this.lastFetchedOn,\n            lastJobStartedOn: this.lastJobStartedOn,\n            lastJobEndedOn: this.lastJobEndedOn,\n            lastError: this.lastError,\n            lastErrorOn: this.lastErrorOn,\n            lastJobDuration: this.lastJobDuration\n        };\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Worker);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3Qvd29ya2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQXNEO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxhQUFhLFVBQVUsVUFBVSxZQUFZLFFBQVE7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnREFBSztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsTUFBTSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVlcC1hcmNoaXRlY3R1cmUvLi9ub2RlX21vZHVsZXMvLnBucG0vcGctYm9zc0AxMi4xMS4xL25vZGVfbW9kdWxlcy9wZy1ib3NzL2Rpc3Qvd29ya2VyLmpzPzczYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVsYXkgfSBmcm9tIFwiLi90b29scy5qc1wiO1xuY29uc3QgV09SS0VSX1NUQVRFUyA9IHtcbiAgICBjcmVhdGVkOiAnY3JlYXRlZCcsXG4gICAgYWN0aXZlOiAnYWN0aXZlJyxcbiAgICBzdG9wcGluZzogJ3N0b3BwaW5nJyxcbiAgICBzdG9wcGVkOiAnc3RvcHBlZCdcbn07XG5jbGFzcyBXb3JrZXIge1xuICAgIGlkO1xuICAgIG5hbWU7XG4gICAgb3B0aW9ucztcbiAgICBmZXRjaDtcbiAgICBvbkZldGNoO1xuICAgIG9uRXJyb3I7XG4gICAgaW50ZXJ2YWw7XG4gICAgam9icyA9IFtdO1xuICAgIGNyZWF0ZWRPbiA9IERhdGUubm93KCk7XG4gICAgc3RhdGUgPSBXT1JLRVJfU1RBVEVTLmNyZWF0ZWQ7XG4gICAgbGFzdEZldGNoZWRPbiA9IG51bGw7XG4gICAgbGFzdEpvYlN0YXJ0ZWRPbiA9IG51bGw7XG4gICAgbGFzdEpvYkVuZGVkT24gPSBudWxsO1xuICAgIGxhc3RKb2JEdXJhdGlvbiA9IG51bGw7XG4gICAgbGFzdEVycm9yID0gbnVsbDtcbiAgICBsYXN0RXJyb3JPbiA9IG51bGw7XG4gICAgc3RvcHBpbmcgPSBmYWxzZTtcbiAgICBzdG9wcGVkID0gZmFsc2U7XG4gICAgYWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICBsb29wRGVsYXlQcm9taXNlID0gbnVsbDtcbiAgICBiZWVuTm90aWZpZWQgPSBmYWxzZTtcbiAgICBydW5Qcm9taXNlID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcih7IGlkLCBuYW1lLCBvcHRpb25zLCBpbnRlcnZhbCwgZmV0Y2gsIG9uRmV0Y2gsIG9uRXJyb3IgfSkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuZmV0Y2ggPSBmZXRjaDtcbiAgICAgICAgdGhpcy5vbkZldGNoID0gb25GZXRjaDtcbiAgICAgICAgdGhpcy5vbkVycm9yID0gb25FcnJvcjtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IGludGVydmFsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5ydW5Qcm9taXNlID0gdGhpcy5ydW4oKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gV09SS0VSX1NUQVRFUy5hY3RpdmU7XG4gICAgICAgIHdoaWxlICghdGhpcy5zdG9wcGluZykge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRlZCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmVlbk5vdGlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9icyA9IGF3YWl0IHRoaXMuZmV0Y2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGZXRjaGVkT24gPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIGlmIChqb2JzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuam9icyA9IGpvYnM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEpvYlN0YXJ0ZWRPbiA9IHRoaXMubGFzdEZldGNoZWRPbjtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkZldGNoKGpvYnMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RKb2JFbmRlZE9uID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qb2JzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEVycm9yT24gPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgIGVyci5tZXNzYWdlID0gYCR7ZXJyLm1lc3NhZ2V9IChRdWV1ZTogJHt0aGlzLm5hbWV9LCBXb3JrZXI6ICR7dGhpcy5pZH0pYDtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0ZWQ7XG4gICAgICAgICAgICB0aGlzLmxhc3RKb2JEdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3BwaW5nICYmICF0aGlzLmJlZW5Ob3RpZmllZCAmJiAodGhpcy5pbnRlcnZhbCAtIGR1cmF0aW9uKSA+IDEwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9vcERlbGF5UHJvbWlzZSA9IGRlbGF5KHRoaXMuaW50ZXJ2YWwgLSBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb29wRGVsYXlQcm9taXNlO1xuICAgICAgICAgICAgICAgIHRoaXMubG9vcERlbGF5UHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wcGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN0YXRlID0gV09SS0VSX1NUQVRFUy5zdG9wcGVkO1xuICAgIH1cbiAgICBub3RpZnkoKSB7XG4gICAgICAgIHRoaXMuYmVlbk5vdGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMubG9vcERlbGF5UHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5sb29wRGVsYXlQcm9taXNlLmFib3J0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zdG9wcGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBXT1JLRVJfU1RBVEVTLnN0b3BwaW5nO1xuICAgICAgICBpZiAodGhpcy5sb29wRGVsYXlQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLmxvb3BEZWxheVByb21pc2UuYWJvcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnJ1blByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy5hYm9ydENvbnRyb2xsZXIgJiYgIXRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvV2lwRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICBjb3VudDogdGhpcy5qb2JzLmxlbmd0aCxcbiAgICAgICAgICAgIGNyZWF0ZWRPbjogdGhpcy5jcmVhdGVkT24sXG4gICAgICAgICAgICBsYXN0RmV0Y2hlZE9uOiB0aGlzLmxhc3RGZXRjaGVkT24sXG4gICAgICAgICAgICBsYXN0Sm9iU3RhcnRlZE9uOiB0aGlzLmxhc3RKb2JTdGFydGVkT24sXG4gICAgICAgICAgICBsYXN0Sm9iRW5kZWRPbjogdGhpcy5sYXN0Sm9iRW5kZWRPbixcbiAgICAgICAgICAgIGxhc3RFcnJvcjogdGhpcy5sYXN0RXJyb3IsXG4gICAgICAgICAgICBsYXN0RXJyb3JPbjogdGhpcy5sYXN0RXJyb3JPbixcbiAgICAgICAgICAgIGxhc3RKb2JEdXJhdGlvbjogdGhpcy5sYXN0Sm9iRHVyYXRpb25cbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBXb3JrZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/dist/worker.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/package.json":
/*!******************************************************************************!*\
  !*** ./node_modules/.pnpm/pg-boss@12.11.1/node_modules/pg-boss/package.json ***!
  \******************************************************************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"name":"pg-boss","version":"12.11.1","description":"Queueing jobs in Postgres from Node.js like a boss","type":"module","main":"./dist/index.js","types":"./dist/index.d.ts","bin":{"pg-boss":"./dist/cli.js"},"engines":{"node":">=22.12.0"},"dependencies":{"cron-parser":"^5.5.0","pg":"^8.18.0","serialize-error":"^13.0.1"},"devDependencies":{"@tsconfig/node-ts":"^23.6.3","@tsconfig/node22":"^22.0.5","@types/luxon":"^3.7.1","@types/node":"^22.19.11","@types/pg":"^8.16.0","@vitest/coverage-v8":"^4.0.18","cli-testlab":"^5.1.0","eslint":"^9.39.2","luxon":"^3.7.2","neostandard":"^0.12.2","tsx":"^4.21.0","typescript":"^5.9.3","vitest":"^4.0.18"},"scripts":{"build":"npm run clean && tsc --project tsconfig.build.json","clean":"node -e \\"fs.rmSync(\'dist\',{recursive:true,force:true})\\"","prepublishOnly":"npm install && npm test && npm run build","test":"eslint . && vitest run","lint:fix":"eslint . --fix","cover":"vitest run --coverage","tsc":"tsc --noEmit","readme":"node ./examples/readme.js","db:migrate":"node --import=tsx -e \'console.log(require(\\"./src\\").getMigrationPlans())\'","db:construct":"node --import=tsx -e \'console.log(require(\\"./src\\").getConstructionPlans())\'"},"pgboss":{"schema":29},"repository":{"type":"git","url":"git+https://github.com/timgit/pg-boss.git"},"author":"timgit","license":"MIT","bugs":{"url":"https://github.com/timgit/pg-boss/issues"},"homepage":"https://timgit.github.io/pg-boss","keywords":["postgresql","postgres","queue","job"],"files":["dist","README.md","LICENSE","package.json"]}');

/***/ })

};
;